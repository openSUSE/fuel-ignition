var ke=Object.defineProperty;var xe=(e,o,n)=>o in e?ke(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var R=(e,o,n)=>(xe(e,typeof o!="symbol"?o+"":o,n),n);import{r as y,o as m,c as p,a as r,b as l,w as b,d as K,e as Y,t as z,F as S,f as x,g,h as $e,i as Fe,u as H,j as Te,B as Z,k as X,l as Ke,m as Se,n as Ie,p as Ee,q as Pe,s as Ve,v as Ue}from"./vendor.3142294c.js";const Ae=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};Ae();var me,pe,c={GlobalStorage:(me=class{},R(me,"store",{addUsers:{amount:0}}),me),PasswordHashes:(pe=class{},R(pe,"hashes",{}),pe),parseJsonFile:async function(e){return new Promise((o,n)=>{const s=new FileReader;s.onload=t=>{try{return o(JSON.parse(t.target.result))}catch(a){return n(a)}},s.onerror=t=>n(t),s.readAsText(e)})},saveTemplateAsFile:(e,o,n)=>{const s=new Blob(n?[o]:[JSON.stringify(o,null,2)],{type:"text/json"}),t=document.createElement("a");t.download=e,t.href=window.URL.createObjectURL(s),t.dataset.downloadurl=["text/json",t.download,t.href].join(":");const a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(a),t.remove()},copy:function(e){var o=document.createElement("textarea");o.innerHTML=e,document.body.appendChild(o),o.select();var n=document.execCommand("copy");return document.body.removeChild(o),n},setupFormComponentWatcher:(e,o,n)=>{e!==void 0&&"methods"in e&&"watchFormData"in e.methods&&o(n,async(s,t)=>{e.methods.watchFormData(s,t)})},uid:()=>(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,""),getFormKey:(e,o,n)=>e+"_"+o+"_"+n,getFormValue:function(e,o,n,s){return o[this.getFormKey(e,n,s)]},normalizeZypperPackages:function(e){return e.split(/[ ,]/).filter(o=>o).join(" ")},setFormValue:function(e,o,n,s,t){o[this.getFormKey(e,n,s)]=t}},k=(e,o)=>{for(const[n,s]of o)e[n]=s;return e};const Ce={},Me={class:"navbar navbar-expand-lg navbar-light fixed-top py-3",id:"mainNav"},Oe={class:"container px-4 px-lg-5"},Be=K("Fuel Ignition \u{1F680}"),Ne=Y('<button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto my-2 my-lg-0"><li class="nav-item"><a class="nav-link" href="#/">Start</a></li><li class="nav-item"><a class="nav-link" href="#about">About</a></li><li class="nav-item"><a class="nav-link" href="https://microos.opensuse.org/" target="_blank" rel="noopener noreferrer">MicroOS</a></li><li class="nav-item"><a class="nav-link" href="https://coreos.github.io/ignition/" target="_blank" rel="noopener noreferrer">Ignition Docs</a></li></ul></div>',2);function qe(e,o){const n=y("router-link");return m(),p("nav",Me,[r("div",Oe,[l(n,{class:"navbar-brand",to:"/"},{default:b(()=>[Be]),_:1}),Ne])])}var Le=k(Ce,[["render",qe]]);const Re={},ze={class:"page-section bg-primary",id:"about"},He=Y('<div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-lg-8 text-center"><h2 class="text-white mt-0">We&#39;ve got what you need!</h2><hr class="divider divider-light"><p class="text-white-75 mb-4">Looking for an easy way to write and edit Ignition configs? Look no further than Fuel Ignition! Our user-friendly web application makes it a breeze to create the config files you need. No strings attached!</p><a class="btn btn-light btn-xl" href="/fuel-ignition/edit">Get Started!</a></div></div></div>',1),Ge=[He];function We(e,o){return m(),p("section",ze,Ge)}var Je=k(Re,[["render",We]]);const De={class:"bg-light py-5"},Ye={class:"container px-4 px-lg-5"},Ze={class:"small text-center text-muted"},Xe={setup(e){return(o,n)=>{const s=y("router-view");return m(),p(S,null,[l(Le),l(s),l(Je),r("footer",De,[r("div",Ye,[r("div",Ze," Copyright \xA9 "+z(new Date().getFullYear())+" \u2013 built with \u{1F49A}, Vue, and openSUSE ",1)])])],64)}}},Qe={},je={class:"masthead"},et={class:"container px-4 px-lg-5 h-75"},tt={class:"row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center"},nt=r("div",{class:"col-lg-8 align-self-end"},[r("h1",{class:"text-white font-weight-bold"},[K(" Ignition & Combustion "),r("br"),K("Config Generator ")]),r("hr",{class:"divider"})],-1),at={class:"col-lg-8 align-self-baseline"},ot=r("p",{class:"text-white-75 mb-5"},[K(" Easily generate new or edit existing Ignition configs. "),r("br"),K("No more fiddling around with JSON or Butane. ")],-1),it={class:"container-fluid"},st={class:"row"},rt={class:"col-xs-6 mb-3"},lt=K("Create New Config"),ct={class:"col-xs-6"},dt=K("JSON to Ignition IMG");function ut(e,o){const n=y("router-link");return m(),p("header",je,[r("div",et,[r("div",tt,[nt,r("div",at,[ot,r("div",it,[r("div",st,[r("div",rt,[l(n,{class:"btn btn-primary btn-xl",to:"/edit"},{default:b(()=>[lt]),_:1})]),r("div",ct,[l(n,{class:"btn btn-primary btn-xl",to:"/convert"},{default:b(()=>[dt]),_:1})])])])])])])])}var _t=k(Qe,[["render",ut]]),mt="/fuel-ignition/assets/undraw_programming_re_kg9v.a835d9b3.svg";const pt={style:{width:"100% !important"},class:"expandable-comp text-white"},ft={key:0},ht={key:0,class:"mb-5"},vt=r("hr",{class:"divider"},null,-1),gt=[vt],yt={class:"mt-1"},F={props:{displaysAtBegin:{type:Number,default:0},maxComponents:{type:Number,default:-1},title:String},setup(e){const o=e,n=x(o.displaysAtBegin);return(s,t)=>(m(),p("div",pt,[o.title!==void 0?(m(),p("h4",ft,z(o.title),1)):g("",!0),(m(!0),p(S,null,$e(n.value,a=>(m(),p("div",{key:a},[Fe(s.$slots,"default"),a<n.value?(m(),p("div",ht,gt)):g("",!0)]))),128)),r("div",yt,[e.maxComponents===-1||e.maxComponents!==-1&&e.maxComponents>n.value?(m(),p("button",{key:0,class:"btn btn-primary mr-5 mb-5",onClick:t[0]||(t[0]=a=>n.value++)}," \xA0\xA0\xA0Add\xA0\xA0\xA0 ")):g("",!0),n.value>=1?(m(),p("button",{key:1,class:"btn btn-danger ml-5 mr-5 mb-5",onClick:t[1]||(t[1]=a=>n.value>=1?n.value--:n.value)}," Remove ")):g("",!0)])]))}},bt={key:0,class:"sk-folding-cube"},wt=r("div",{class:"sk-cube1 sk-cube"},null,-1),kt=r("div",{class:"sk-cube2 sk-cube"},null,-1),xt=r("div",{class:"sk-cube4 sk-cube"},null,-1),$t=r("div",{class:"sk-cube3 sk-cube"},null,-1),Ft=[wt,kt,xt,$t],he={props:["ignJson","combustionScript"],setup(e){const o=e;var n=x(!1);const s=new ve,t=async function(){a();try{let i=await s.convertToImage(o.ignJson,o.combustionScript);s.downloadImageFile(i)}catch(i){alert(i)}a()},a=function(){document.querySelector("#loadingToggle").click()};return(i,_)=>(m(),p(S,null,[r("button",{class:"btn btn-primary mb-4",style:{width:"100%"},onClick:_[0]||(_[0]=d=>t())}," Convert and Download "),H(n)?(m(),p("div",bt,Ft)):g("",!0),r("button",{id:"loadingToggle",hidden:"",onClick:_[1]||(_[1]=d=>Te(n)?n.value=!H(n):n=!H(n))})],64))}};class ve{constructor(){R(this,"images",{zero:{ignFatDirEntry:61536,ignFileOffset:86016},combustion:{ignFatDirEntry:61632,combFatDirEntry:63680,ignFileOffset:15796224,combFileOffset:3244032}});R(this,"alphabet",["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whisky","X-ray","Yankee","Zulu","Nico","Ignaz","Robert","Moritz"]);String.prototype.replaceAt=function(o,n){return this.substring(0,o)+n+this.substring(o+n.length)},String.prototype.hexEncode=function(){var o,n,s="";for(n=0;n<this.length;n++)o=this.charCodeAt(n).toString(16),s+=("000"+o).slice(-4);return s}}bufferToHex(o){return[...new Uint8Array(o)].map(n=>n.toString(16).padStart(2,"0")).join("")}strToHex(o){for(var n="",s=0;s<o.length;s++)n+=o.charCodeAt(s).toString(16);return n}async fetchImage(o){return fetch("templates/ignition-"+o+"-template.img").then(n=>n.arrayBuffer())}async convertToImage(o,n){let s=JSON.stringify(o,null,2),t=n===void 0?"zero":"combustion",a=n!==void 0;console.log("images["+t+"] :>> ",this.images[t]);let i=await this.fetchImage(t),_=new DataView(i),d=this.images[t].ignFatDirEntry,v=new DataView(i,d+28,4),w=new TextEncoder,T=w.encode(s),q=v.getInt32(0,!0);if(v.setInt32(0,T.length,!0),T.length>=q)throw new Error(`Warning!

Ignition configuration is too large.

The maximum file size for the Ignition configuration is currently set to `+q+"B.");for(let u=0;u<T.length;u++)_.setInt8(this.images[t].ignFileOffset+u,T[u]);if(console.log("jsonSize(string): "+s.length),console.log("jsonSize(bin): "+T.length),console.log("dirEntry :>> ",d),console.log("images["+t+"] :>> ",this.images[t]),a){let u=this.images[t].combFatDirEntry;v=new DataView(i,u+28,4);let h=w.encode(n),$=v.getInt32(0,!0);if(v.setInt32(0,h.length,!0),h.length>=$)throw new Error(`Warning!

Combustion configuration is too large.

The maximum file size for the Combustion configuration is currently set to `+$+"B.");for(let E=0;E<h.length;E++)_.setInt8(this.images[t].combFileOffset+E,h[E])}var f=new Uint8Array(i);return new Blob([f],{type:"application/octet-stream"})}downloadImageFile(o){var n=window.document.createElement("a");n.href=window.URL.createObjectURL(o),n.download="ignition-"+this.alphabet[Math.floor(Math.random()*this.alphabet.length)].toLowerCase()+".img",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}const I="user",Tt={setup:()=>{const e=c.uid();return{uid:e,Utils:c,formKey:o=>c.getFormKey(I,o,e)}},methods:{encodeToInstallation:function(e,o){c.GlobalStorage.store.addUsers.amount=0;const n=(t,a)=>c.getFormValue(I,o,t,a),s=I+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{if(e.passwd="passwd"in e?e.passwd:{users:[]},c.GlobalStorage.store.addUsers.amount++,n("name",t)!=="root"&&(c.GlobalStorage.store.addUsers.onlyUsernameRoot=!1),n("runs_on_suse",t)===!0&&(e.storage===void 0&&(e.storage={}),e.storage.filesystems===void 0&&(e.storage.filesystems=[]),e.storage.filesystems.push({device:"/dev/disk/by-label/ROOT",format:"btrfs",mountOptions:["subvol=/@/home"],path:"/home",wipeFilesystem:!1})),e.passwd.users!==void 0){const a=n("ssh_keys",t),i=a!==void 0&&a.includes(",")?a.replaceAll(" ","").split(","):[a],_=n("passwd",t)===""||n("passwd",t)===void 0;e.passwd.users.push({name:n("name",t),passwordHash:_?void 0:c.PasswordHashes.hashes[t],sshAuthorizedKeys:a===void 0||a===""?void 0:i})}})},watchFormData:async function(e,o){const n=(s,t)=>e[c.getFormKey(I,s,t)];Object.keys(e).filter(s=>s.includes("user_passwd")&&!s.includes("hashed")).map(s=>s.replace("user_passwd_","")).forEach(async s=>{const t=n("passwd",s),a=n("hash_type",s),i=t===""||t===void 0,_=e["user_passwd_"+s]===o["user_passwd_"+s];i||_||Kt(t,a).then(d=>c.PasswordHashes.hashes[s]=d)})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(I,o,t,a),s=I+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.login===void 0&&(e.login={}),e.login.users===void 0&&(e.login.users=[]);let a={};a.name=n("name",t),a.hash_type=n("hash_type",t),a.passwd=n("passwd",t),a.ssh_keys=n("ssh_keys",t),a.runs_on_suse=n("runs_on_suse",t),e.login.users.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(I,o,t,a,i),s=I+"_name_";e.login==null||e.login.users==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.login.users.shift();n("name",t,a.name),n("hash_type",t,a.hash_type),n("passwd",t,a.passwd),c.PasswordHashes.hashes[t]=Z.hashSync(a.passwd,8),n("ssh_keys",t,a.ssh_keys),n("runs_on_suse",t,a.runs_on_suse)})},countImport:function(e){return e.login!=null&&e.login.users!=null?e.login.users.length:0}}};async function Kt(e,o){if(o==="Hash Yourself")return e;var n=await Z.genSalt(10).then();return Z.hash(e,n)}const St={class:"users"},It={key:0};function Et(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",St,[l(i,{class:"form-control",name:e.formKey("name"),label:"Username (required)",placeholder:"write your os username here",validation:"required","validation-behavior":"live",value:"root",help:"A new user will be created, if it does not exist."},null,8,["name"]),l(i,{name:e.formKey("hash_type"),label:"Password Hash Type",placeholder:"bcrypt",type:"select",validation:"optional","validation-behavior":"live",value:"bcrypt",options:["bcrypt","Hash Yourself"],help:"The way you want your password to be hashed."},null,8,["name"]),l(i,{name:e.formKey("passwd"),label:"Password",placeholder:"write the corresponding password here",type:"password",validation:"optional","validation-behavior":"live",help:"Your password is never sent over the internet, everything is local."},null,8,["name"]),l(i,{name:e.formKey("ssh_keys"),label:"SSH Public Keys",placeholder:"write the corresponding ssh keys here, separated by commas, spaces are ignored",type:"textarea",validation:"optional","validation-behavior":"live",help:"Your keys are never sent over the internet, everything is local."},null,8,["name"]),e.Utils.GlobalStorage.store.addUsers.amount==0?(m(),p("div",It,[l(i,{name:e.formKey("runs_on_suse"),label:"Mount /home",validation:"required",type:"checkbox","validation-behavior":"live",help:"Required on SUSE related systems for creating users not named root. Otherwise, applying the Ignition config will fail"},null,8,["name"])])):g("",!0)])}var Q=k(Tt,[["render",Et]]);const P="create_file",Pt={setup:()=>{const e=c.uid();return{sourceType:x("data"),formKey:n=>c.getFormKey(P,n,e)}},methods:{encodeToInstallation:function(e,o){const n=(a,i)=>c.getFormValue(P,o,a,i),s=function(a){return window.btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(_,d){return String.fromCharCode("0x"+d)}))},t=P+"_path_";Object.keys(o).filter(a=>a.includes(t)).map(a=>a.replace("create_file_path_","")).forEach(a=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let i,_={};switch(n("source_type",a)){case"data":let d=n("data_content",a);i="data:text/plain;charset=utf-8;base64,"+s(d===void 0?"":d);break;case"data-vagrant":let v=n("data_vagrant_content",a);i="data:,"+encodeURIComponent(v===void 0?"":v);break;case"https":i=n("https_content",a);break;case"http":i=n("http_content",a);let w=n("http_verification",a);w&&(_.verification={hash:w});break;case"tftp":case"s3":case"gs":i=n("tftp_s3_gs_content",a);break}e.storage.files.push(Object.assign({path:n("path",a),mode:parseInt(n("mode",a)),overwrite:n("overwrite",a),contents:{source:i}},_))})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(P,o,t,a),s=P+"_path_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let a={};switch(a.source_type=n("source_type",t),a.source_type){case"data":a.data_content=n("data_content",t);break;case"data-vagrant":a.data_vagrant_content=n("data_vagrant_content",t);case"https":a.https_content=n("https_content",t);break;case"http":a.http_content=n("http_content",t),a.http_verification=n("http_verification",t);break;case"tftp":case"s3":case"gs":a.tftp_s3_gs_content=n("tftp_s3_gs_content",t);break}a.path=n("path",t),a.mode=n("mode",t),a.overwrite=n("overwrite",t),e.storage.files.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(P,o,t,a,i),s=P+"_path_";e.storage==null||e.storage.files==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.storage.files.shift();switch(n("source_type",t,a.source_type),a.source_type){case"data":n("data_content",t,a.data_content);break;case"data-vagrant":n("data_vagrant_content",t,a.data_vagrant_content);case"https":n("https_content",t,a.https_content);break;case"http":n("http_content",t,a.http_content),n("http_verification",t,a.http_verification);break;case"tftp":case"s3":case"gs":n("tftp_s3_gs_content",t,a.tftp_s3_gs_content);break}n("path",t,a.path),n("mode",t,a.mode),n("overwrite",t,a.overwrite)})},countImport:function(e){return e.storage!=null&&e.storage.files!=null?e.storage.files.length:0}}},Vt={class:"createfiles"},Ut={class:"source"},At={key:0,class:"data"},Ct={key:1,class:"data-vagrant"},Mt={key:2,class:"https"},Ot={key:3,class:"http"},Bt={key:4,class:"tftp-s3-gs"};function Nt(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",Vt,[l(i,{name:e.formKey("path"),label:"File Path (required)",placeholder:"path on the filesystem",validation:"required","validation-behavior":"live",value:"/etc/someconfig",help:"The absolute path to the file"},null,8,["name"]),l(i,{name:e.formKey("overwrite"),label:"Overwrite",placeholder:"path on the filesystem",validation:"required",type:"checkbox","validation-behavior":"live",help:"Whether to delete preexisting nodes at the path"},null,8,["name"]),l(i,{name:e.formKey("mode"),label:"File Mode (required)",type:"number",value:"420",validation:"required","validation-behavior":"live",help:"The file's permission mode. Note that the mode must be properly specified as a decimal value (i.e. 0644 -> 420)."},null,8,["name"]),r("div",Ut,[l(i,{type:"select",name:e.formKey("source_type"),modelValue:e.sourceType,"onUpdate:modelValue":o[0]||(o[0]=_=>e.sourceType=_),label:"Scheme for file contents url (use data for plain text)",help:"If source is omitted and a regular file already exists at the path, Ignition will do nothing. If source is omitted and no file exists, an empty file will be created.",options:["data","data-vagrant","https","http","tftp","s3","gs","omit"]},null,8,["name","modelValue"])]),e.sourceType==="data"?(m(),p("div",At,[l(i,{name:e.formKey("data_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),e.sourceType==="data-vagrant"?(m(),p("div",Ct,[l(i,{name:e.formKey("data_vagrant_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),e.sourceType==="https"?(m(),p("div",Mt,[l(i,{name:e.formKey("https_content"),label:"HTTPS Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"])])):g("",!0),e.sourceType==="http"?(m(),p("div",Ot,[l(i,{name:e.formKey("http_content"),label:"HTTP Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"]),l(i,{name:e.formKey("http_verification"),label:"Verification Hash (optional)",placeholder:"e.g. sha512-012345678..",type:"text",validation:"optional","validation-behavior":"live",help:"The hash of the contents, in the form <type>-<value> where type is either sha512 or sha256."},null,8,["name"])])):g("",!0),!e.sourceType.includes("http")&&e.sourceType!=="data"&&e.sourceType!=="data-vagrant"&&e.sourceType!=="omit"?(m(),p("div",Bt,[l(i,{name:e.formKey("tftp_s3_gs_content"),label:e.sourceType.toUpperCase()+" Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required","validation-behavior":"live"},null,8,["name","label"])])):g("",!0)])}var j=k(Pt,[["render",Nt]]);const V="add_hostname",qt={setup:()=>{const e=c.uid();return{formKey:o=>c.getFormKey(V,o,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(V,o,t,a),s=V+"_hostname_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let a=n("hostname",t),i="data:,"+(a===void 0?"":a);e.storage.files.push({path:"/etc/hostname",mode:420,overwrite:!0,contents:{source:i}})})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(V,o,t,a),s=V+"_hostname_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=n("hostname",t);e.hostname=a===void 0?"":a})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(V,o,t,a,i),s=V+"_hostname_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.hostname!=null&&(n("hostname",t,e.hostname),e.hostname=void 0)})},countImport:function(e){return e.hostname!=null?1:0}}};function Lt(e,o,n,s,t,a){const i=y("FormKit");return m(),X(i,{name:e.formKey("hostname"),label:"Hostname",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])}var ee=k(qt,[["render",Lt]]);const ge=new Map([["Arabic","arabic"],["Belgian","be"],["Croatian","hr"],["Canadian (CSA)","ca-multix"],["Chinese Traditional","tw"],["Chinese Simplified","cn"],["Czech","cz"],["Czech (qwerty)","cz-qwerty"],["Danish","dk"],["Dutch","nl"],["Dvorak","us-dvorak"],["Dvorak (programmer)","us-dvp"],["English (US)","us"],["English (UK)","gb"],["Estonian","ee"],["Finnish","fi-kotoistus"],["French","fr"],["French (Canada)","ca"],["French (Switzerland)","ch-fr"],["German","de-nodeadkeys"],["German (with deadkeys)","de"],["German (Switzerland)","sg-latin1"],["Greek","gr"],["Hungarian","hu"],["Icelandic","is"],["Italian","it"],["Japanese","jp"],["Khmer","khmer"],["Korean","kr"],["Lithuanian","lt"],["Norwegian","no"],["Persian","ir"],["Polish","pl"],["Portuguese","pt"],["Portuguese (Brazil)","br"],["Portuguese (Brazil -- US accents)","us-acentos"],["Romanian","ro"],["Russian","ru"],["Serbian","rs-latin"],["Slovak","sk"],["Slovak (qwerty)","sk-qwerty"],["Slovene","si"],["Spanish","es"],["Spanish (Asturian variant)","es-ast"],["Spanish (Latin America)","latam"],["Swedish","se"],["Tajik","tj_alt-UTF8"],["Turkish","tr"],["Ukrainian","ua-utf"],["US International","us-intl"]]),G=new Map([["Afrikaans",new Map([["lang_code","af_ZA"],["utf8",".UTF-8"],["none_utf8",""]])],["Arabic",new Map([["lang_code","ar_EG"],["utf8",".UTF-8"],["none_utf8",""]])],["Asturian",new Map([["lang_code","ast_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Bengali",new Map([["lang_code","bn_BD"],["utf8",".UTF-8"],["none_utf8",""]])],["Bosnian",new Map([["lang_code","bs_BA"],["utf8",".UTF-8"],["none_utf8",""]])],["Bulgarian",new Map([["lang_code","bg_BG"],["utf8",".UTF-8"],["none_utf8",""]])],["Catalan",new Map([["lang_code","ca_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Chinese Simplified",new Map([["lang_code","zh_CN"],["utf8",".UTF-8"],["none_utf8",""]])],["Chinese Traditional",new Map([["lang_code","zh_TW"],["utf8",".UTF-8"],["none_utf8",""]])],["Croatian",new Map([["lang_code","hr_HR"],["utf8",".UTF-8"],["none_utf8",""]])],["Czech",new Map([["lang_code","cs_CZ"],["utf8",".UTF-8"],["none_utf8",""]])],["Danish",new Map([["lang_code","da_DK"],["utf8",".UTF-8"],["none_utf8",""]])],["Dutch",new Map([["lang_code","nl_NL"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["English (UK)",new Map([["lang_code","en_GB"],["utf8",".UTF-8"],["none_utf8",""]])],["English (US)",new Map([["lang_code","en_US"],["utf8",".UTF-8"],["none_utf8",""]])],["Estonian",new Map([["lang_code","et_EE"],["utf8",".UTF-8"],["none_utf8",""]])],["Finnish",new Map([["lang_code","fi_FI"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["French",new Map([["lang_code","fr_FR"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Galician",new Map([["lang_code","gl_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Georgian",new Map([["lang_code","ka_GE"],["utf8",".UTF-8"],["none_utf8",""]])],["German",new Map([["lang_code","de_DE"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Greek",new Map([["lang_code","el_GR"],["utf8",".UTF-8"],["none_utf8",".ISO-8859-7"]])],["Gujarati",new Map([["lang_code","gu_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Hebrew",new Map([["lang_code","he_IL"],["utf8",".UTF-8"],["none_utf8",""]])],["Hindi",new Map([["lang_code","hi_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Hungarian",new Map([["lang_code","hu_HU"],["utf8",".UTF-8"],["none_utf8",""]])],["Indonesian",new Map([["lang_code","id_ID"],["utf8",".UTF-8"],["none_utf8",""]])],["Italian",new Map([["lang_code","it_IT"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Japanese",new Map([["lang_code","ja_JP"],["utf8",".UTF-8"],["none_utf8",".eucJP"]])],["Khmer",new Map([["lang_code","km_KH"],["utf8",".UTF-8"],["none_utf8",""]])],["Korean",new Map([["lang_code","ko_KR"],["utf8",".UTF-8"],["none_utf8",""]])],["Lithuanian",new Map([["lang_code","lt_LT"],["utf8",".UTF-8"],["none_utf8",""]])],["Macedonian",new Map([["lang_code","mk_MK"],["utf8",".UTF-8"],["none_utf8",""]])],["Marathi",new Map([["lang_code",""],["utf8",".UTF-8"],["none_utf8",""]])],["Norwegian",new Map([["lang_code","nb_NO"],["utf8",".UTF-8"],["none_utf8",""]])],["Nynorsk",new Map([["lang_code","nn_NO"],["utf8",".UTF-8"],["none_utf8",""]])],["Persian",new Map([["lang_code","fa_IR"],["utf8",".UTF-8"],["none_utf8",""]])],["Polish",new Map([["lang_code","pl_PL"],["utf8",".UTF-8"],["none_utf8",""]])],["Portuguese (Br)",new Map([["lang_code","pt_BR"],["utf8",".UTF-8"],["none_utf8",""]])],["Portuguese",new Map([["lang_code","pt_PT"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Punjabi",new Map([["lang_code","pa_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Romanian",new Map([["lang_code","ro_RO"],["utf8",".UTF-8"],["none_utf8",""]])],["Russian",new Map([["lang_code","ru_RU"],["utf8",".UTF-8"],["none_utf8",""]])],["Serbian",new Map([["lang_code","sr_RS"],["utf8",".UTF-8"],["none_utf8",""]])],["Sinhala",new Map([["lang_code","si_LK"],["utf8",".UTF-8"],["none_utf8",""]])],["Slovak",new Map([["lang_code","sk_SK"],["utf8",".UTF-8"],["none_utf8",""]])],["Slovenian",new Map([["lang_code","sl_SI"],["utf8",".UTF-8"],["none_utf8",""]])],["Spanish",new Map([["lang_code","es_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Swedish",new Map([["lang_code","sv_SE"],["utf8",".UTF-8"],["none_utf8",""]])],["Tajik",new Map([["lang_code","tg_TJ"],["utf8",".UTF-8"],["none_utf8",""]])],["Tamil",new Map([["lang_code","ta_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Thai",new Map([["lang_code","th_TH"],["utf8",".UTF-8"],["none_utf8",""]])],["Turkish",new Map([["lang_code","tr_TR"],["utf8",".UTF-8"],["none_utf8",""]])],["Ukrainian",new Map([["lang_code","uk_UA"],["utf8",".UTF-8"],["none_utf8",""]])],["Vietnamese",new Map([["lang_code","vi_VN"],["utf8",".UTF-8"],["none_utf8",""]])],["Walloon",new Map([["lang_code","wa_BE"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Welsh",new Map([["lang_code","cy_GB"],["utf8",".UTF-8"],["none_utf8",""]])],["Xhosa",new Map([["lang_code","xh_ZA"],["utf8",".UTF-8"],["none_utf8",""]])],["Zulu",new Map([["lang_code","zu_ZA"],["utf8",".UTF-8"],["none_utf8",""]])]]);var L={availableLanguages:()=>Array.from(G.entries()).map(e=>e[0]),langCode:e=>G.get(e).get("lang_code"),utf8Encoding:e=>G.get(e).get("utf8"),noneUtf8Encoding:e=>G.get(e).get("none_utf8"),availableKeyboards:()=>Array.from(ge.entries()).map(e=>e[0]),keyboardCode:e=>ge.get(e)};const U="add_language",Rt={setup:()=>{const e=c.uid();return{formKey:o=>c.getFormKey(U,o,e),languages:()=>L.availableLanguages()}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(U,o,t,a),s=U+"_language_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{const a=n("language_utf8",t),i=n("language_name",t);e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let _=L.langCode(i);a===!0?_=_+L.utf8Encoding(i):_=_+L.noneUtf8Encoding(i);let d="data:,LANG="+_;e.storage.files.push({path:"/etc/locale.conf",mode:420,overwrite:!0,contents:{source:d}})})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(U,o,t,a),s=U+"_language_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.language_name=n("language_name",t),e.language_utf8=n("language_utf8",t)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(U,o,t,a,i),s=U+"_language_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.language_name!=null&&(n("language_name",t,e.language_name),e.language_name=void 0),e.language_utf8!=null&&n("language_utf8",t,e.language_utf8)})},countImport:function(e){return e.language_name!=null?1:0}}};function zt(e,o,n,s,t,a){const i=y("FormKit");return m(),p(S,null,[l(i,{type:"select",name:e.formKey("language_name"),label:"Language",validation:"required","validation-behavior":"live",options:e.languages(),help:"select primary language"},null,8,["name","options"]),l(i,{name:e.formKey("language_utf8"),label:"Use UTF-8 Encoding",type:"checkbox","validation-behavior":"live",value:!0,help:"enable UTF8-Code"},null,8,["name"])],64)}var te=k(Rt,[["render",zt]]);const A="add_network",Ht={setup:()=>{const e=c.uid(),o=x("DHCP"),n=x("DHCP"),s=x(!1),t=x(!0),a=x(!0),i=x("WPA & WPA2 Personal");return{ipv4enabled:t,ipv4networkType:o,ipv6enabled:a,ipv6networkType:n,wifienabled:s,keymgmt:i,formKey:_=>c.getFormKey(A,_,e)}},methods:{encodeToInstallation:function(e,o){const n=(i,_)=>c.getFormValue(A,o,i,_),s=function(i){return window.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(d,v){return String.fromCharCode("0x"+v)}))},t=A+"_interface_";let a=0;Object.keys(o).filter(i=>i.includes(t)).map(i=>i.replace(t,"")).forEach(i=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let _="/etc/NetworkManager/system-connections/",d="";const v=n("wifi_enabled",i),w=n("available_in_initrd",i),T=n("ipv4_enabled",i),q=n("ipv4_auto_dns",i),f=n("ipv6_enabled",i),u=n("ipv6_auto_dns",i),h=n("ipv4_network_type",i)==="DHCP",$=n("ipv6_network_type",i)==="DHCP",E=n("key_mgmt",i),fe=n(v===!0?"wifi_ssid_content":"interface",i);_=_.concat(fe,".nmconnection"),d=d.concat(`
[connection]`,`
`,"id=",fe,`
`,"type=",v===!0?"wifi":"ethernet",`
`,"interface-name=",n("interface",i),`
`),d=d.concat(`
[ipv4]`,`
`,`dns-search=
`),T===!0?(d=d.concat("method=",h===!0?"auto":"manual",`
`),h===!1&&(d=d.concat("address1=",n("ipv4_address",i),"/",n("ipv4_netmask",i)),n("ipv4_gateway",i)!=null&&(d=d.concat(",",n("ipv4_gateway",i))),d=d.concat(`
`)),n("ipv4_dns",i)&&(d=d.concat("dns=",n("ipv4_dns",i),`
`)),q==!1&&(d=d.concat(`ignore_auto_dns=true
`))):d=d.concat("method=disabled",`
`),d=d.concat(`
[ipv6]`,`
`,`dns-search=
`,`addr-gen-mode=eui64
`),f===!0?(d=d.concat("method=",$===!0?"auto":"manual",`
`),$===!1&&(d=d.concat("address1=",n("ipv6_address",i),"/",n("ipv6_netmask",i)),n("ipv6_gateway",i)!=null&&(d=d.concat(",",n("ipv6_gateway",i))),d=d.concat(`
`)),n("ipv6_dns",i)&&(d=d.concat("dns=",n("ipv6_dns",i),`
`)),u==!1&&(d=d.concat(`ignore_auto_dns=true
`))):d=d.concat("method=ignore",`
`),v===!0&&(d=d.concat(`
[wifi]`,`
`,"ssid=",n("wifi_ssid_content",i),`
`),E!=="none"&&(d=d.concat(`
[wifi-security]`,`
`,"key-mgmt=",E==="WPA3 Personal"?"sae":"wpa-psk",`
`,"psk=",n("wifi_password_content",i),`
`))),w?e.combustion_prepare+=`umask 077 # Required for NM config
mkdir -p /etc/NetworkManager/system-connections/
cat >`+_+` <<-EOF
`+d+`EOF

`:e.storage.files.push({path:_,mode:384,overwrite:!0,contents:{source:"data:text/plain;charset=utf-8;base64,"+s(d),human_read:d}}),a==0&&(d=`[main]
# Do not do automatic (DHCP/SLAAC) configuration on ethernet devices
# with no other matching connections.
no-auto-default=*
`,e.storage.files.push({path:"/etc/NetworkManager/conf.d/noauto.conf",mode:420,overwrite:!0,contents:{source:"data:text/plain;charset=utf-8;base64,"+s(d),human_read:d}})),a++})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(A,o,t,a),s=A+"_interface_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.network===void 0&&(e.network={}),e.network.interfaces===void 0&&(e.network.interfaces=[]);let a={};a.name=n("interface",t),n("wifi_enabled",t)&&(a.wifi={},a.wifi.key_mgmt=n("key_mgmt",t),a.wifi.ssid=n("wifi_ssid_content",t),a.wifi.password=n("wifi_password_content",t)),a.available_in_initrd=n("available_in_initrd",t),n("ipv4_enabled",t)&&(a.ipv4={},a.ipv4.network_type=n("ipv4_network_type",t),a.ipv4.auto_dns_enabled=n("ipv4_auto_dns",t),a.ipv4.dns=n("ipv4_dns",t),a.ipv4.network_type==="fixed IPv4 Address"&&(a.ipv4.address=n("ipv4_address",t),a.ipv4.netmask=n("ipv4_netmask",t),a.ipv4.gateway=n("ipv4_gateway",t))),n("ipv6_enabled",t)&&(a.ipv6={},a.ipv6.network_type=n("ipv6_network_type",t),a.ipv6.auto_dns_enabled=n("ipv6_auto_dns",t),a.ipv6.dns=n("ipv6_dns",t),a.ipv6.network_type==="fixed IPv6 Address"&&(a.ipv6.address=n("ipv6_address",t),a.ipv6.netmask=n("ipv6_netmask",t),a.ipv6.gateway=n("ipv6_gateway",t))),e.network.interfaces.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(A,o,t,a,i),s=A+"_interface_";e.network==null||e.network.interfaces==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.network.interfaces.shift();n("interface",t,a.name),a.wifi!=null?(n("wifi_enabled",t,!0),n("key_mgmt",t,a.wifi.key_mgmt),n("wifi_ssid_content",t,a.wifi.ssid),n("wifi_password_content",t,a.wifi.password)):n("wifi_enabled",t,!1),a.available_in_initrd!=null&&n("available_in_initrd",t,a.available_in_initrd),a.ipv4!=null?(n("ipv4_enabled",t,!0),n("ipv4_network_type",t,a.ipv4.network_type),n("ipv4_auto_dns",t,a.ipv4.auto_dns_enabled),n("ipv4_dns",t,a.ipv4.dns),a.ipv4.network_type==="fixed IPv4 Address"&&(n("ipv4_address",t,a.ipv4.address),n("ipv4_netmask",t,a.ipv4.netmask),n("ipv4_gateway",t,a.ipv4.gateway))):n("ipv4_enabled",t,!1),a.ipv6!=null?(n("ipv6_enabled",t,!0),n("ipv6_network_type",t,a.ipv6.network_type),n("ipv6_auto_dns",t,a.ipv6.auto_dns_enabled),n("ipv6_dns",t,a.ipv6.dns),a.ipv6.network_type==="fixed IPv6 Address"&&(n("ipv6_address",t,a.ipv6.address),n("ipv6_netmask",t,a.ipv6.netmask),n("ipv6_gateway",t,a.ipv6.gateway))):n("ipv6_enabled",t,!1)})},countImport:function(e){return e.network!=null&&e.network.interfaces!=null?e.network.interfaces.length:0}}},Gt={key:0},Wt={class:"container-fluid"},Jt={class:"row"},Dt=r("div",{class:"col-1"},null,-1),Yt={class:"col-12"},Zt={key:0},Xt={key:1},Qt={class:"container-fluid"},jt={class:"row"},en=r("div",{class:"col-1"},null,-1),tn={class:"col-12"},nn={key:0},an={key:2},on={class:"container-fluid"},sn={class:"row"},rn=r("div",{class:"col-1"},null,-1),ln={class:"col-12"},cn={key:0};function dn(e,o,n,s,t,a){const i=y("FormKit");return m(),p(S,null,[l(i,{name:e.formKey("interface"),label:"Interface Name",type:"text",placeholder:"e.g. eth0, wlan0,... ",validation:"required","validation-visibility":"live",help:" "},null,8,["name"]),l(i,{name:e.formKey("ipv4_enabled"),label:"IPv4 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv4enabled,"onUpdate:modelValue":o[0]||(o[0]=_=>e.ipv4enabled=_)},null,8,["name","modelValue"]),e.ipv4enabled===!0?(m(),p("div",Gt,[r("div",Wt,[r("div",Jt,[Dt,r("div",Yt,[l(i,{type:"select",name:e.formKey("ipv4_network_type"),modelValue:e.ipv4networkType,"onUpdate:modelValue":o[1]||(o[1]=_=>e.ipv4networkType=_),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv4 Address"]},null,8,["name","modelValue"]),e.ipv4networkType==="fixed IPv4 Address"?(m(),p("div",Zt,[l(i,{name:e.formKey("ipv4_address"),label:"IP Address",placeholder:"___.___.___.___",type:"text",validation:[["required"],["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"IPv4 address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"]),l(i,{name:e.formKey("ipv4_netmask"),label:"Netmask",type:"number",value:"24",validation:"between:0,32","validation-visibility":"live",help:"Values between 0 and 32"},null,8,["name"]),l(i,{name:e.formKey("ipv4_gateway"),label:"Gateway",placeholder:"___.___.___.___",type:"text",validation:[["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"Gateway address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"])])):g("",!0),l(i,{name:e.formKey("ipv4_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evalutated automatically."},null,8,["name"]),l(i,{name:e.formKey("ipv4_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(i,{name:e.formKey("ipv6_enabled"),label:"IPv6 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv6enabled,"onUpdate:modelValue":o[2]||(o[2]=_=>e.ipv6enabled=_)},null,8,["name","modelValue"]),e.ipv6enabled===!0?(m(),p("div",Xt,[r("div",Qt,[r("div",jt,[en,r("div",tn,[l(i,{type:"select",name:e.formKey("ipv6_network_type"),modelValue:e.ipv6networkType,"onUpdate:modelValue":o[3]||(o[3]=_=>e.ipv6networkType=_),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv6 Address"]},null,8,["name","modelValue"]),e.ipv6networkType==="fixed IPv6 Address"?(m(),p("div",nn,[l(i,{name:e.formKey("ipv6_address"),label:"IP Address",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["required"],["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"IPv6 address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"]),l(i,{name:e.formKey("ipv6_netmask"),label:"Netmask",type:"number",value:"64",validation:"between:0,128","validation-visibility":"live",help:"Values between 0 and 128"},null,8,["name"]),l(i,{name:e.formKey("ipv6_gateway"),label:"Gateway",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"Gateway address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"])])):g("",!0),l(i,{name:e.formKey("ipv6_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evalutated automatically."},null,8,["name"]),l(i,{name:e.formKey("ipv6_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(i,{name:e.formKey("wifi_enabled"),label:"Enable WiFi",type:"checkbox","validation-behavior":"live",modelValue:e.wifienabled,"onUpdate:modelValue":o[4]||(o[4]=_=>e.wifienabled=_),help:"Whether interface will be connected to WiFi."},null,8,["name","modelValue"]),e.wifienabled===!0?(m(),p("div",an,[r("div",on,[r("div",sn,[rn,r("div",ln,[l(i,{name:e.formKey("wifi_ssid_content"),label:"SSID",type:"text",placeholder:"Service Set IDentifier (SSID)",validation:"required","validation-behavior":"live",help:"Uniquely name of a wireless local area network (WLAN)."},null,8,["name"]),l(i,{type:"select",name:e.formKey("key_mgmt"),modelValue:e.keymgmt,"onUpdate:modelValue":o[5]||(o[5]=_=>e.keymgmt=_),label:"Key Management",help:"Key management used for the connection.",options:["none","WPA & WPA2 Personal","WPA3 Personal"],value:"WPA & WPA2 Personal"},null,8,["name","modelValue"]),e.keymgmt!=="none"?(m(),p("div",cn,[l(i,{name:e.formKey("wifi_password_content"),label:"Password",type:"text",help:"Password required for the WiFi connection."},null,8,["name"])])):g("",!0)])])])])):g("",!0),l(i,{name:e.formKey("available_in_initrd"),label:"Also enabled during installation process",type:"checkbox","validation-behavior":"live",help:"Whether interface will also be available during the installation process."},null,8,["name"])],64)}var ne=k(Ht,[["render",dn]]);const C="start_service",un={setup:()=>{const e=c.uid();return{sourceType:x("data"),formKey:n=>c.getFormKey(C,n,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(C,o,t,a),s=C+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd="systemd"in e?e.systemd:{units:[]};let a=n("enabled",t),i=a==="omit";e.systemd.units.push({name:n("name",t),enabled:i?void 0:a==="yes",contents:n("contents",t)?n("contents",t):void 0})})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(C,o,t,a),s=C+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.units===void 0&&(e.systemd.units=[]);let a={};a.name=n("name",t),a.enabled=n("enabled",t),n("contents",t)&&(a.contents=n("contents",t)),e.systemd.units.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(C,o,t,a,i),s=C+"_name_";e.systemd==null||e.systemd.units==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.systemd.units.shift();n("name",t,a.name),n("enabled",t,a.enabled),n("contents",t,a.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.units!=null?e.systemd.units.length:0}}},_n={class:"startservices"};function mn(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",_n,[l(i,{name:e.formKey("name"),label:"Service Name (required)",validation:"required","validation-behavior":"live",value:"example.service",help:"Every unit must have a unique name. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(i,{name:e.formKey("enabled"),label:"enabled",value:"yes",validation:"optional",type:"select","validation-behavior":"live",help:"Whether or not the service shall be enabled. When true, the service is enabled. When false, the service is disabled. When omitted, the service is unmodified.",options:["yes","no","omit"]},null,8,["name"]),l(i,{name:e.formKey("contents"),label:"Service Unit Content (optional)",placeholder:"write the service unit content here, spaces, newlines etc. are preserved",type:"textarea",validation:"optional","validation-behavior":"live",help:"The contents of the unit."},null,8,["name"])])}var ae=k(un,[["render",mn]]);const M="modify_service",pn={setup:()=>{const e=c.uid();return{formKey:o=>c.getFormKey(M,o,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(M,o,t,a),s=M+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd="systemd"in e?e.systemd:{units:[]};let a=e.systemd.units.find(_=>_.name===n("name",t)),i={name:n("dropin_name",t),contents:n("contents",t)};if(a!==void 0){if(a.dropins!==void 0){a.dropins.push(i);return}a.dropins=[i];return}e.systemd.units.push({name:n("name",t),dropins:[i]})})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(M,o,t,a),s=M+"_name_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.dropins===void 0&&(e.systemd.dropins=[]);let a={};a.name=n("name",t),a.dropin_name=n("dropin_name",t),a.contents=n("contents",t),e.systemd.dropins.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(M,o,t,a,i),s=M+"_name_";e.systemd==null||e.systemd.dropins==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.systemd.dropins.shift();n("name",t,a.name),n("dropin_name",t,a.dropin_name),n("contents",t,a.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.dropins!=null?e.systemd.dropins.length:0}}},fn={class:"modifyservice"};function hn(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",fn,[l(i,{name:e.formKey("name"),label:"Name of the service that you want to modify (required)",validation:"required","validation-behavior":"live",value:"example.service",placeholder:"e.g. systemd-journald.service",help:"The name of the unit. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(i,{name:e.formKey("dropin_name"),label:"Name of the drop-in file",validation:"required","validation-behavior":"live",value:"debug.conf",help:"The name of the drop-in. This must be suffixed with \u201C.conf\u201D."},null,8,["name"]),l(i,{name:e.formKey("contents"),label:"Drop-In Unit Content (required)",placeholder:"e.g. [Service].. | spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Write the service unit content here, spaces, newlines etc. are preserved."},null,8,["name"])])}var oe=k(pn,[["render",hn]]);const ie="debug_bytes",vn={setup:()=>{const e=c.uid();return{uid:e,formKey:o=>c.getFormKey(ie,o,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(ie,o,t,a),s=ie+"_size_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{var a=new Array(parseInt(n("size",t)-128)+1).join("B");e.debugBytes=e.debugBytes!==void 0?e.debugBytes:[],e.debugBytes.push(a)})}}},gn={class:"users"};function yn(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",gn,[l(i,{name:e.formKey("size"),label:"Bytes To Add",type:"number",validation:"required","validation-behavior":"live",value:"2048",help:"This is a debug form."},null,8,["name"])])}var se=k(vn,[["render",yn]]);const ye="debug_analyze",bn={setup:()=>{const e=c.uid();let o=new ve;return console.log(o),{uid:e,formKey:n=>c.getFormKey(ye,n,e)}},methods:{encodeToInstallation:function(e,o){const n=ye+"_file_";Object.keys(o).filter(s=>s.includes(n)).map(s=>s.replace(n,"")).forEach(s=>{console.log("--- debug analyze file ---");let t;try{console.log('formData["debug_analyze_file_" + id] :>> ',o["debug_analyze_file_"+s]),t=Object.assign({},o["debug_analyze_file_"+s][0])}catch{}console.log(t),console.log("-----")})}}},wn={class:"analyze"};function kn(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",wn,[l(i,{name:e.formKey("file"),label:"File To Analyze (Console Log)",type:"file",validation:"required","validation-behavior":"live",help:"This is a debug form."},null,8,["name"])])}var be=k(bn,[["render",kn]]);const W="comb_keyboard",xn={setup:()=>{const e=c.uid();return{uid:e,formKey:o=>c.getFormKey(W,o,e),keyboards:()=>L.availableKeyboards()}},methods:{encodeToInstallation:function(e,o){Object.keys(o).filter(n=>n.includes(W)).forEach(n=>{e.combustion+=`
# Keyboard
systemd-firstboot --force --keymap=`+L.keyboardCode(o[n])+`
`})},encodeToExport:function(e,o){Object.keys(o).filter(n=>n.includes(W)).forEach(n=>{e.keyboard=o[n]})},fillImport:function(e,o){e.keyboard!=null&&Object.keys(o).filter(n=>n.includes(W)).forEach(n=>{o[n]=e.keyboard})},countImport:function(e){return e.keyboard!=null?1:0}}};function $n(e,o,n,s,t,a){const i=y("FormKit");return m(),X(i,{type:"select",name:e.formKey("keyboard"),label:"Keyboard",validation:"required","validation-behavior":"live",options:e.keyboards(),help:"select keyboard"},null,8,["name","options"])}var re=k(xn,[["render",$n]]);const O="comb_registration",Fn={setup:()=>{const e=c.uid(),o=x(!1);return{uid:e,usb_regcode:o,formKey:n=>c.getFormKey(O,n,e)}},methods:{encodeToInstallation:function(e,o){const n=(a,i)=>c.getFormValue(O,o,a,i);let s=0;const t=O+"_registrationserver_";Object.keys(o).filter(a=>a.includes(t)).map(a=>a.replace(t,"")).forEach(a=>{s===0&&(e.combustion+=`
# Registration
if ! which SUSEConnect > /dev/null 2>&1; then
    zypper --non-interactive install suseconnect-ng
fi
`),s++,e.combustion+='product="'+n("product",a)+`"
`,n("usb_regcode",a)===!0?e.combustion+=`for I in \`fdisk -l | grep '^/dev' | awk '{print $1}'\`
do
  if ! findmnt $I > /dev/null; then
    if mount $I /mnt; then
      if  [ -f /mnt/regcode.xml ]; then
        regcode=\`cat /mnt/regcode.xml|sed '2 s/xmlns=".*"//g'|xmllint --xpath "//addon[name='$product']/reg_code/text()" -\`
        umount /mnt
        break
      fi
      if  [ -f /mnt/regcode.txt ]; then
        regcode=$(grep $product /mnt/regcode.txt|awk '{print $2}')
        umount /mnt
        break
      fi
      umount /mnt
    fi
  fi
done
`:e.combustion+='regcode="'+n("regcode",a)+`"
`,n("product",a)!=="Base_Product"?(e.combustion+="architecture=`arch`\n",e.combustion+='version=`xmllint --xpath "//version/text()" /etc/products.d/baseproduct`\n',e.combustion+="SUSEConnect --product $product/$version/$architecture "):e.combustion+="SUSEConnect ",n("email",a)&&(e.combustion+="--email "+n("email",a)+" "),e.combustion+="--url "+n("registrationserver",a)+` --regcode $regcode
`})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(O,o,t,a),s=O+"_registrationserver_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.registration===void 0&&(e.registration={}),e.registration.registrations===void 0&&(e.registration.registrations=[]);let a={};a.registrationserver=n("registrationserver",t),a.regcode=n("regcode",t),a.product=n("product",t),a.email=n("email",t),a.usb_regcode=n("usb_regcode",t),e.registration.registrations.push(a)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(O,o,t,a,i),s=O+"_registrationserver_";e.registration==null||e.registration.registrations==null||Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let a=e.registration.registrations.shift();n("registrationserver",t,a.registrationserver),n("usb_regcode",t,a.usb_regcode),n("regcode",t,a.regcode),n("product",t,a.product),n("email",t,a.email)})},countImport:function(e){return e.registration!=null&&e.registration.registrations!=null?e.registration.registrations.length:0}}},Tn={key:0};function Kn(e,o,n,s,t,a){const i=y("FormKit");return m(),p(S,null,[l(i,{name:e.formKey("registrationserver"),label:"Registration server",type:"text",value:"https://scc.suse.com",help:"URL of the registration server"},null,8,["name"]),l(i,{name:e.formKey("product"),label:"Product name",type:"text",value:"Base_Product",help:"Product or extension name"},null,8,["name"]),l(i,{name:e.formKey("usb_regcode"),label:"Reading registration code from mounted USB medium",type:"checkbox","validation-behavior":"live",modelValue:e.usb_regcode,"onUpdate:modelValue":o[0]||(o[0]=_=>e.usb_regcode=_)},null,8,["name","modelValue"]),e.usb_regcode===!1?(m(),p("div",Tn,[l(i,{name:e.formKey("regcode"),label:"Registration code",type:"text",value:"",help:"Subscription registration code for the product to be registered."},null,8,["name"])])):g("",!0),l(i,{name:e.formKey("email"),label:"Email",type:"email",validation:"email","validation-visibility":"live",help:"Email address for which the registration will be done (optional)."},null,8,["name"])],64)}var le=k(Fn,[["render",Kn]]);const B="comb_salt",Sn={setup:()=>{const e=c.uid();return{preseedKeyVia:x("defining keys manually"),uid:e,formKey:n=>c.getFormKey(B,n,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(B,o,t,a),s=B+"_master_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.combustion+=`
# Salt Minion
if ! which salt-minion > /dev/null 2>&1; then
    zypper --non-interactive install salt-minion
fi
`,n("master",t)&&(e.combustion+='echo "master: '+n("master",t)+`" \\
 >/etc/salt/minion.d/fuel-ignition.conf
`),n("preseed_key_via",t)=="defining keys manually"&&(n("minion_pem_key",t)&&(e.combustion+='echo "'+n("minion_pem_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pem
`),n("minion_pub_key",t)&&(e.combustion+='echo "'+n("minion_pub_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pub
`)),n("preseed_key_via",t)=="downloading keys from a ftp/http server"&&(e.combustion+=`if ! which curl > /dev/null 2>&1; then
    zypper --non-interactive install curl
fi
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pub "+n("key_url",t)+"/"+n("key_name",t)+`.pub
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pem "+n("key_url",t)+"/"+n("key_name",t)+`.pem
`),n("enableservice",t)&&(e.combustion+=`systemctl enable salt-minion.service
`)})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(B,o,t,a),s=B+"_master_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.salt===void 0&&(e.salt={}),e.salt.master=n("master",t),e.salt.preseed_key_via=n("preseed_key_via",t),e.salt.minion_pem_key=n("minion_pem_key",t),e.salt.minion_pub_key=n("minion_pub_key",t),e.salt.url_login_name=n("url_login_name",t),e.salt.url_login_password=n("url_login_password",t),e.salt.key_url=n("key_url",t),e.salt.key_name=n("key_name",t),e.salt.enableservice=n("enableservice",t)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(B,o,t,a,i),s=B+"_master_";e.salt!=null&&Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{n("master",t,e.salt.master),n("preseed_key_via",t,e.salt.preseed_key_via),n("minion_pem_key",t,e.salt.minion_pem_key),n("minion_pub_key",t,e.salt.minion_pub_key),n("url_login_name",t,e.salt.url_login_name),n("url_login_password",t,e.salt.url_login_password),n("key_url",t,e.salt.key_url),n("key_name",t,e.salt.key_name),n("enableservice",t,e.salt.enableservice)})},countImport:function(e){return e.salt!=null?1:0}}},In={key:0},En={key:1};function Pn(e,o,n,s,t,a){const i=y("FormKit");return m(),p(S,null,[l(i,{name:e.formKey("master"),label:"Salt master",type:"text",validation:"required",help:"Host name or IP address of the configuration management server."},null,8,["name"]),l(i,{type:"select",name:e.formKey("preseed_key_via"),modelValue:e.preseedKeyVia,"onUpdate:modelValue":o[0]||(o[0]=_=>e.preseedKeyVia=_),label:"Preseed salt minion with accepted key",help:"Select how the keys are given.",options:["defining keys manually","downloading keys from a ftp/http server"]},null,8,["name","modelValue"]),e.preseedKeyVia==="defining keys manually"?(m(),p("div",In,[l(i,{name:e.formKey("minion_pem_key"),label:"Minion pem key",placeholder:`-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----`,type:"textarea","validation-behavior":"live",help:"Private key for communitcation with the master."},null,8,["name"]),l(i,{name:e.formKey("minion_pub_key"),label:"Minion pub key",placeholder:`-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY-----`,type:"textarea","validation-behavior":"live",help:"Public key for communitcation with the master."},null,8,["name"])])):g("",!0),e.preseedKeyVia==="downloading keys from a ftp/http server"?(m(),p("div",En,[l(i,{name:e.formKey("key_name"),label:"Minion ID",type:"text",validation:"required","validation-behavior":"live",help:"Minion-ID which is the name of the key too. (<Minion ID>.pem, <Minion ID>.pub)"},null,8,["name"]),l(i,{name:e.formKey("key_url"),label:"Key download URL",type:"text",placeholder:"http://<download_server>/<directory>",validation:"required","validation-behavior":"live",help:"Path to a HTTP/FTP (and other curl formats) server which contains the files <Minion ID>.pem and <Minion ID>.pub"},null,8,["name"]),l(i,{name:e.formKey("url_login_name"),label:"Login name of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"]),l(i,{name:e.formKey("url_login_password"),label:"Login password of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"])])):g("",!0),l(i,{name:e.formKey("enableservice"),label:"Enable Salt Minion Service",type:"checkbox",value:!0,"validation-behavior":"live",help:"Whether the service will be enabled."},null,8,["name"])],64)}var ce=k(Sn,[["render",Pn]]);const N="s390_channel",Vn={setup:()=>{const e=c.uid();return{uid:e,formKey:o=>c.getFormKey(N,o,e)}},methods:{encodeToInstallation:function(e,o){const n=(t,a)=>c.getFormValue(N,o,t,a),s=N+"_read_channel_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.combustion_prepare+=`# S390 Channels Setup
chzdev qeth `+n("read_channel",t)+","+n("write_channel",t)+","+n("data_channel",t)+` -e
`})},encodeToExport:function(e,o){const n=(t,a)=>c.getFormValue(N,o,t,a),s=N+"_read_channel_";Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.s390_channels===void 0&&(e.s390_channels={}),e.s390_channels.read=n("read_channel",t),e.s390_channels.write=n("write_channel",t),e.s390_channels.data=n("data_channel",t)})},fillImport:function(e,o){const n=(t,a,i)=>c.setFormValue(N,o,t,a,i),s=N+"_read_channel_";e.s390_channels!=null&&Object.keys(o).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{n("read_channel",t,e.s390_channels.read),n("write_channel",t,e.s390_channels.write),n("data_channel",t,e.s390_channels.data)})},countImport:function(e){return e.s390_channels!=null?1:0}}};function Un(e,o,n,s,t,a){const i=y("FormKit");return m(),p(S,null,[l(i,{name:e.formKey("read_channel"),label:"Read I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.800",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"]),l(i,{name:e.formKey("write_channel"),label:"Write I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.801",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"]),l(i,{name:e.formKey("data_channel"),label:"Data I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.802",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"])],64)}var de=k(Vn,[["render",Un]]);const J="install_package",An={setup:()=>{const e=c.uid();return{uid:e,formKey:o=>c.getFormKey(J,o,e)}},methods:{encodeToInstallation:function(e,o){Object.keys(o).filter(n=>n.includes(J)).forEach(n=>{e.combustion+=`
zypper --non-interactive install `+c.normalizeZypperPackages(o[n])})},encodeToExport:function(e,o){Object.keys(o).filter(n=>n.includes(J)).forEach(n=>{e.package===void 0&&(e.package={}),e.package.install===void 0&&(e.package.install=[]),e.package.install.push(o[n])})},fillImport:function(e,o){e.package==null||e.package.install==null||Object.keys(o).filter(n=>n.includes(J)).forEach(n=>{o[n]=e.package.install.shift()})},countImport:function(e){return e.package!=null&&e.package.install!=null?e.package.install.length:0}}};function Cn(e,o,n,s,t,a){const i=y("FormKit");return m(),X(i,{name:e.formKey("package_name"),label:"Packages you want to install (space or comma separated)",type:"text",validation:"required","validation-behavior":"live",value:"vim-small",help:"This will add a 'zypper --non-interactive install [packages]' line to the combustion script."},null,8,["name"])}var ue=k(An,[["render",Cn]]);const D="comb_raw",Mn={setup:()=>{const e=c.uid();return{uid:e,formKey:o=>c.getFormKey(D,o,e)}},methods:{encodeToInstallation:function(e,o){Object.keys(o).filter(n=>n.includes(D)).forEach(n=>{o[n]!=null&&(e.combustion+=`
`+o[n])})},encodeToExport:function(e,o){Object.keys(o).filter(n=>n.includes(D)).forEach(n=>{e.scripts===void 0&&(e.scripts=[]),o[n]!=null&&e.scripts.push(o[n])})},fillImport:function(e,o){e.scripts!=null&&Object.keys(o).filter(n=>n.includes(D)).forEach(n=>{o[n]=e.scripts.shift()})},countImport:function(e){return e.scripts!=null?e.scripts.length:0}}},On={class:"combustionraw"};function Bn(e,o,n,s,t,a){const i=y("FormKit");return m(),p("div",On,[l(i,{name:e.formKey("script_content"),label:"Lines to add",type:"textarea",validation:"required","validation-behavior":"live",value:'echo "hello combustion"',help:"You can find examples of a combustion script here: https://en.opensuse.org/Portal:MicroOS/Combustion#Simple_example"},null,8,["name"])])}var _e=k(Mn,[["render",Bn]]);const Nn={class:"page-section p-2 bg-dark",id:"edit"},qn={class:"container mt-5 px-0"},Ln=r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[r("h1",{class:"mt-5"},"Config Generator"),r("div",{class:"d-grid mb-5"},[r("img",{class:"text-center mx-auto w-50",src:mt})])])],-1),Rn={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},zn={class:"col-lg-6"},Hn={class:"form-floating mb-3"},Gn=r("hr",{class:"divider-long"},null,-1),Wn=r("hr",{class:"divider-long"},null,-1),Jn=r("hr",{class:"divider-long"},null,-1),Dn=r("hr",{class:"divider-long"},null,-1),Yn={key:0},Zn={class:"page-section p-2",id:"export"},Xn={class:"container mt-5 px-0"},Qn={class:"row gx-4 gx-lg-5 justify-content-center"},jn={class:"col-lg-8 col-xl-6"},ea=r("h1",{class:"mt-5 text-center"},"config.ign",-1),ta={class:"d-grid mb-5"},na={class:"form-data"},aa={class:"double"},oa=K(" Copy "),ia=r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard",viewBox:"0 0 16 16"},[r("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),r("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})],-1),sa=[oa,ia],ra={key:0},la=r("h1",{class:"mt-5 text-center"},"combustion script",-1),ca=r("hr",{class:"divider"},null,-1),da={class:"d-grid mb-5"},ua={class:"form-data"},_a=r("hr",{class:"divider"},null,-1),ma={class:"mt-5 text-center"},pa=K(" Convert to Ignition-"),fa={key:0},ha=K("Ready Filesystem IMG in the Browser "),va=Y('<div><h2 class="mt-5 text-center"> Convert to ISO Filesystem with mkisofs </h2><pre class="form-data">  # mkisofs -full-iso9660-filenames -o ignition.iso -V ignition -root ignition config.ign</pre><p> How to use the generated data with <a href="https://documentation.suse.com/sle-micro/5.2/html/SLE-Micro-all/cha-images-ignition.html" target="_blank">ignition</a> and <a href="https://documentation.suse.com/sle-micro/5.2/html/SLE-Micro-all/cha-images-combustion.html" target="_blank">combustion</a> . </p><hr class="divider"></div><h2 class="mt-5 text-center">Load Settings from</h2>',2),ga=r("h2",{class:"mt-5 text-center"},"Save Settings to",-1),ya={setup(e){const o=[Q,j,ee,te,ne,ae,oe,re,le,ce,de,ue,_e,se,be],n=x({debug:!1,save_to:"fuel-ignition.json"}),s=x({});o.forEach(f=>c.setupFormComponentWatcher(f,Ke,n));let t=x(0);const a=()=>{t.value+=1},i=f=>f.methods.hasOwnProperty("countImport")?f.methods.countImport(s.value):0;Se(()=>{Object.keys(s.value).length>0&&(o.filter(f=>f.methods.hasOwnProperty("fillImport")).forEach(f=>f.methods.fillImport(s.value,n.value)),s.value={})});const _=f=>{console.log("downloading.."),c.saveTemplateAsFile("config.ign",v(f))},d=f=>{c.copy(JSON.stringify(v(f),null,2))},v=f=>{let u={ignition:{version:"3.2.0"}};return o.filter(h=>h.methods.hasOwnProperty("encodeToInstallation")).forEach(h=>h.methods.encodeToInstallation(u,f)),f.debug&&(u["debug:form"]=f),u.combustion=void 0,u.combustion_prepare=void 0,u},w=f=>{let u={combustion:"",combustion_prepare:"",output:""};return o.filter(h=>h.methods.hasOwnProperty("encodeToInstallation")).forEach(h=>h.methods.encodeToInstallation(u,f)),u.combustion_prepare!=""&&(console.log("prepare: "+u.combustion_prepare),u.output==""&&(u.output=`#!/bin/bash
# combustion: network prepare
# script generated with https://opensuse.github.io/fuel-ignition/

`),u.output+=u.combustion_prepare+`
`),u.output!=""?u.output+=`if [ "\${1-}" = "--prepare" ]; then
  exit 0
fi
`:u.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/
`,u.output+=`
# Redirect output to the console
exec > >(exec tee -a /dev/tty0) 2>&1
`,u.combustion="",u.combustion_prepare="",o.filter(h=>h.methods.hasOwnProperty("encodeToInstallation")).forEach(h=>h.methods.encodeToInstallation(u,f)),u.combustion!==""&&(console.log(u.combustion),u.output+=u.combustion),u.output+=`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/combustion`,u.output+=`

# Close outputs and wait for tee to finish.
exec 1>&- 2>&-; wait;`,u.output};async function T(f){let u=f.target.files[0];s.value=await c.parseJsonFile(u).catch(()=>{alert(jsonErrorMsg),clearFile()}),n.value={debug:n.value.debug,save_to:n.value.save_to},a()}const q=f=>{let u={};o.filter(h=>h.methods.hasOwnProperty("encodeToExport")).forEach(h=>h.methods.encodeToExport(u,f)),c.saveTemplateAsFile(f.save_to,u,!1)};return(f,u)=>{const h=y("FormKit");return m(),p("div",{key:H(t)},[r("section",Nn,[r("div",qn,[Ln,r("div",Rn,[r("div",zn,[r("div",Hn,[l(h,{type:"group",modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=$=>n.value=$)},{default:b(()=>[l(F,{title:"Add User",displaysAtBegin:i(Q)},{default:b(()=>[l(Q)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Set Hostname",displaysAtBegin:i(ee),maxComponents:1},{default:b(()=>[l(ee)]),_:1},8,["displaysAtBegin"]),Gn,l(F,{title:"Set Language",displaysAtBegin:i(te),maxComponents:1},{default:b(()=>[l(te)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Set Keyboard",displaysAtBegin:i(re),maxComponents:1},{default:b(()=>[l(re)]),_:1},8,["displaysAtBegin"]),Wn,l(F,{title:"Add Network Interface",displaysAtBegin:i(ne)},{default:b(()=>[l(ne)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Register Products",displaysAtBegin:i(le)},{default:b(()=>[l(le)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Connect to Salt Master",maxComponents:1,displaysAtBegin:i(ce)},{default:b(()=>[l(ce)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Set S390 Channels",maxComponents:1,displaysAtBegin:i(de)},{default:b(()=>[l(de)]),_:1},8,["displaysAtBegin"]),Jn,l(F,{title:"Enable or Create Service",displaysAtBegin:i(ae)},{default:b(()=>[l(ae)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Modify Existing Service",displaysAtBegin:i(oe)},{default:b(()=>[l(oe)]),_:1},8,["displaysAtBegin"]),Dn,l(F,{title:"Install Additional Packages",displaysAtBegin:i(ue)},{default:b(()=>[l(ue)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Add Files To System",displaysAtBegin:i(j)},{default:b(()=>[l(j)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Add Custom Lines To Combustion Script",displaysAtBegin:i(_e)},{default:b(()=>[l(_e)]),_:1},8,["displaysAtBegin"]),n.value.debug?(m(),p("div",Yn,[l(F,{title:"DEBUG: Add Bytes",displaysAtBegin:i(se)},{default:b(()=>[l(se)]),_:1},8,["displaysAtBegin"]),l(F,{title:"DEBUG: Analyze File",displaysAtBegin:1,maxComponents:1},{default:b(()=>[l(be)]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])])])])]),r("section",Zn,[r("div",Xn,[r("div",Qn,[r("div",jn,[ea,r("div",ta,[r("pre",na,z(v(n.value)),1),r("div",aa,[l(h,{modelValue:n.value.debug,"onUpdate:modelValue":u[1]||(u[1]=$=>n.value.debug=$),type:"checkbox",label:"Debug",name:"debug"},null,8,["modelValue"]),r("button",{class:"btn btn-outline-secondary mb-2",onClick:u[2]||(u[2]=$=>d(n.value))},sa)]),r("button",{class:"btn btn-primary mb-4",onClick:u[3]||(u[3]=$=>_(n.value)),"data-testid":"download_ignition"}," Download "),w(n.value)!==void 0?(m(),p("div",ra,[la,ca,r("div",da,[r("pre",ua,z(w(n.value)),1),r("button",{class:"btn btn-primary mb-4","data-testid":"download_combustion",onClick:u[4]||(u[4]=$=>H(c).saveTemplateAsFile("script",w(n.value),!0))}," Download ")])])):g("",!0),r("div",null,[_a,r("h2",ma,[pa,w(n.value)!==void 0?(m(),p("span",fa,"Combustion-")):g("",!0),ha]),l(he,{ignJson:v(n.value),combustionScript:w(n.value)},null,8,["ignJson","combustionScript"])]),va,l(h,{name:"load_from",type:"file",onChange:T}),ga,l(h,{modelValue:n.value.save_to,"onUpdate:modelValue":u[5]||(u[5]=$=>n.value.save_to=$),type:"text",name:"save_to"},null,8,["modelValue"]),r("button",{class:"btn btn-primary mt-3",onClick:u[6]||(u[6]=$=>q(n.value))}," Save ")])])])])])])}}};var ba="/fuel-ignition/assets/undraw_convert_re_l0y1.2c99c673.svg";const wa={class:"page-section p-2 bg-dark",id:"edit"},ka={class:"container mt-5 px-0"},xa=r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[r("h1",{class:"mt-5"},"Convert JSON to Ignition-Ready IMG"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("img",{class:"text-center mx-auto w-25",src:ba})])])],-1),$a={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Fa={class:"col-lg-6 expandable-comp text-white"},Ta={class:"form-floating mb-3"},Ka=r("p",null,null,-1),Sa=r("hr",{class:"divider"},null,-1),Ia={class:"page-section p-2",id:"export"},Ea={class:"container mt-5 px-0"},Pa={class:"row gx-4 gx-lg-5 justify-content-center"},Va={class:"col-lg-8 col-xl-6"},Ua=r("h1",{class:"mt-5 text-center"},"JSON That Will Be Converted",-1),Aa=r("hr",{class:"divider"},null,-1),Ca={class:"d-grid mb-5"},Ma={class:"form-data"},Oa={setup(e){const o=x({}),n="The provided json is invalid.";let s=x({});function t(){return s}function a(){let d=document.querySelector(".formkit-remove-files");d!==void 0&&d.click()}async function i(d){let v=d.target.files[0];v!==void 0&&await c.parseJsonFile(v).catch(()=>{alert(n),a()}).then(w=>(s=w,o.value.convert_text=JSON.stringify(s,null,2),w))}const _=function(d){if(o.value.convert_file!==void 0){if(console.log("convert file defined"),!confirm("You already uploaded a file. Discard?")){o.value.convert_text=JSON.stringify(s,null,2);return}a();try{s=JSON.parse(o.value.convert_text)}catch{alert(n)}}};return(d,v)=>{const w=y("FormKit");return m(),p(S,null,[r("section",wa,[r("div",ka,[xa,r("div",$a,[r("div",Fa,[l(w,{type:"group",modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=T=>o.value=T)},{default:b(()=>[r("div",Ta,[l(w,{name:"convert_file",label:"Either  -  Config.ign / Json File To Convert",type:"file",onChange:i}),Ka,l(w,{name:"convert_text",label:"Or  -  JSON as Text",placeholder:'e.g. { "ignition": { "version": "3.2.0" } }',type:"textarea",id:"convert_text","validation-behavior":"live",onKeyup:_})])]),_:1},8,["modelValue"]),l(he,{ignJson:t()},null,8,["ignJson"])])])]),Sa]),r("section",Ia,[r("div",Ea,[r("div",Pa,[r("div",Va,[Ua,Aa,r("div",Ca,[r("pre",Ma,z(t()),1)])])])])])],64)}}};var we="/fuel-ignition/assets/undraw_freelancer_re_irh4.f098216d.svg";const Ba={},Na={class:"page-section bg-dark",id:"import"},qa={class:"container px-4 px-lg-5"},La={class:"row gx-4 gx-lg-5 justify-content-center"},Ra=r("div",{class:"d-grid"},[r("img",{class:"text-center mx-auto",src:we})],-1),za={class:"col-lg-8 col-xl-6 text-white text-center"},Ha=r("h2",{class:"mt-2"},"Sorry, this is not implemented yet!",-1),Ga=r("hr",{class:"divider"},null,-1),Wa=r("p",{class:"mb-5"}," For now, Fuel Ignition can only create new configs. ",-1),Ja=K("Back Home");function Da(e,o){const n=y("router-link");return m(),p("section",Na,[r("div",qa,[r("div",La,[Ra,r("div",za,[Ha,Ga,Wa,l(n,{class:"btn btn-primary btn-xl",to:"/"},{default:b(()=>[Ja]),_:1})])])])])}var Ya=k(Ba,[["render",Da]]);const Za=r("section",{class:"page-section bg-dark",id:"contact"},[r("div",{class:"container px-4 px-lg-5"},[r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"d-grid"},[r("img",{class:"text-center mx-auto",src:we})])])])],-1),Xa=r("section",{class:"page-section p-2",id:"export"},[r("div",{class:"container mt-5 px-0"},[r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("h2",{class:"mt-5 text-center"},"Convert to ISO in the Browser (Alpha)"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("div",{class:"mx-auto"})])])])],-1),Qa={setup(e){return(o,n)=>(m(),p(S,null,[Za,Xa],64))}},ja="/fuel-ignition/",eo=[{path:"/",name:"Home",component:_t},{path:"/edit",name:"Edit",component:ya},{path:"/import",name:"Import",component:Ya},{path:"/convert",name:"Convert",component:Oa},{path:"/test",name:"Test",component:Qa}],to=Ie({history:Ee(ja),routes:eo});window.addEventListener("DOMContentLoaded",e=>{var o=function(){const t=document.body.querySelector("#mainNav");!t||(window.scrollY===0?t.classList.remove("navbar-shrink"):t.classList.add("navbar-shrink"))};o(),document.addEventListener("scroll",o);const n=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(t){t.addEventListener("click",()=>{window.getComputedStyle(n).display!=="none"&&n.click()})})});Pe(Xe).use(Ve,Ue).use(to).mount("#app");
