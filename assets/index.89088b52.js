var ue=Object.defineProperty;var me=(e,i,n)=>i in e?ue(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var q=(e,i,n)=>(me(e,typeof i!="symbol"?i+"":i,n),n);import{r as w,o as m,c as p,a as r,b as l,w as b,d as I,e as ae,t as L,F as V,f as x,g,h as pe,i as _e,u as R,j as fe,B as z,k as he,l as ve,m as ge,n as ye,p as be,q as we,s as ke,v as xe}from"./vendor.3142294c.js";const $e=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}};$e();var oe,ie,d={GlobalStorage:(oe=class{},q(oe,"store",{addUsers:{amount:0}}),oe),PasswordHashes:(ie=class{},q(ie,"hashes",{}),ie),parseJsonFile:async function(e){return new Promise((i,n)=>{const s=new FileReader;s.onload=t=>{try{return i(JSON.parse(t.target.result))}catch(o){return n(o)}},s.onerror=t=>n(t),s.readAsText(e)})},saveTemplateAsFile:(e,i,n)=>{const s=new Blob(n?[i]:[JSON.stringify(i,null,2)],{type:"text/json"}),t=document.createElement("a");t.download=e,t.href=window.URL.createObjectURL(s),t.dataset.downloadurl=["text/json",t.download,t.href].join(":");const o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(o),t.remove()},copy:function(e){var i=document.createElement("textarea");i.innerHTML=e,document.body.appendChild(i),i.select();var n=document.execCommand("copy");return document.body.removeChild(i),n},setupFormComponentWatcher:(e,i,n)=>{e!==void 0&&"methods"in e&&"watchFormData"in e.methods&&i(n,async(s,t)=>{e.methods.watchFormData(s,t)})},uid:()=>(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,""),getFormKey:(e,i,n)=>e+"_"+i+"_"+n,getFormValue:function(e,i,n,s){return i[this.getFormKey(e,n,s)]},normalizeZypperPackages:function(e){return e.split(/[ ,]/).filter(i=>i).join(" ")},setFormValue:function(e,i,n,s,t){i[this.getFormKey(e,n,s)]=t}},$=(e,i)=>{for(const[n,s]of i)e[n]=s;return e};const Fe={},Ke={class:"navbar navbar-expand-lg navbar-light fixed-top py-3",id:"mainNav"},Ie={class:"container px-4 px-lg-5"},Ve=I("Fuel Ignition \u{1F680}"),Pe=ae('<button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto my-2 my-lg-0"><li class="nav-item"><a class="nav-link" href="#/">Start</a></li><li class="nav-item"><a class="nav-link" href="#about">About</a></li><li class="nav-item"><a class="nav-link" href="https://microos.opensuse.org/" target="_blank" rel="noopener noreferrer">MicroOS</a></li><li class="nav-item"><a class="nav-link" href="https://kubic.opensuse.org/" target="_blank" rel="noopener noreferrer">Kubic</a></li><li class="nav-item"><a class="nav-link" href="https://coreos.github.io/ignition/" target="_blank" rel="noopener noreferrer">Ignition Docs</a></li></ul></div>',2);function Se(e,i){const n=w("router-link");return m(),p("nav",Ke,[r("div",Ie,[l(n,{class:"navbar-brand",to:"/"},{default:b(()=>[Ve]),_:1}),Pe])])}var Ee=$(Fe,[["render",Se]]);const Ce={},Ae={class:"page-section bg-primary",id:"about"},Te=ae('<div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-lg-8 text-center"><h2 class="text-white mt-0">We&#39;ve got what you need!</h2><hr class="divider divider-light"><p class="text-white-75 mb-4">Looking for an easy way to write and edit Ignition configs? Look no further than Fuel Ignition! Our user-friendly web application makes it a breeze to create the config files you need. No strings attached!</p><a class="btn btn-light btn-xl" href="/fuel-ignition/edit">Get Started!</a></div></div></div>',1),Oe=[Te];function Be(e,i){return m(),p("section",Ae,Oe)}var Ne=$(Ce,[["render",Be]]);const Ue={class:"bg-light py-5"},qe={class:"container px-4 px-lg-5"},Le={class:"small text-center text-muted"},Re={setup(e){return(i,n)=>{const s=w("router-view");return m(),p(V,null,[l(Ee),l(s),l(Ne),r("footer",Ue,[r("div",qe,[r("div",Le," Copyright \xA9 "+L(new Date().getFullYear())+" \u2013 built with \u{1F49A}, Vue, and openSUSE ",1)])])],64)}}},He={},Me={class:"masthead"},ze={class:"container px-4 px-lg-5 h-75"},We={class:"row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center"},De=r("div",{class:"col-lg-8 align-self-end"},[r("h1",{class:"text-white font-weight-bold"},[I(" Ignition & Combustion "),r("br"),I("Config Generator ")]),r("hr",{class:"divider"})],-1),Je={class:"col-lg-8 align-self-baseline"},Ge=r("p",{class:"text-white-75 mb-5"},[I(" Easily generate new or edit existing Ignition configs. "),r("br"),I("No more fiddling around with JSON or Butane. ")],-1),Ye={class:"container-fluid"},Ze={class:"row"},Qe={class:"col-xs-6 mb-3"},Xe=I("Create New Config"),je={class:"col-xs-6"},et=I("JSON to Ignition IMG");function tt(e,i){const n=w("router-link");return m(),p("header",Me,[r("div",ze,[r("div",We,[De,r("div",Je,[Ge,r("div",Ye,[r("div",Ze,[r("div",Qe,[l(n,{class:"btn btn-primary btn-xl",to:"/edit"},{default:b(()=>[Xe]),_:1})]),r("div",je,[l(n,{class:"btn btn-primary btn-xl",to:"/convert"},{default:b(()=>[et]),_:1})])])])])])])])}var nt=$(He,[["render",tt]]),ot="/fuel-ignition/assets/undraw_programming_re_kg9v.a835d9b3.svg",it="/fuel-ignition/assets/undraw_building_blocks_re_5ahy.a7d51760.svg";const at={style:{width:"100% !important"},class:"expandable-comp text-white"},st={key:0},rt={key:0,class:"mb-5"},lt=r("hr",{class:"divider"},null,-1),ct=[lt],dt={class:"mt-1"},F={props:{displaysAtBegin:{type:Number,default:0},maxComponents:{type:Number,default:-1},title:String},setup(e){const i=e,n=x(i.displaysAtBegin);return(s,t)=>(m(),p("div",at,[i.title!==void 0?(m(),p("h4",st,L(i.title),1)):g("",!0),(m(!0),p(V,null,pe(n.value,o=>(m(),p("div",{key:o},[_e(s.$slots,"default"),o<n.value?(m(),p("div",rt,ct)):g("",!0)]))),128)),r("div",dt,[e.maxComponents===-1||e.maxComponents!==-1&&e.maxComponents>n.value?(m(),p("button",{key:0,class:"btn btn-primary mr-5 mb-5",onClick:t[0]||(t[0]=o=>n.value++)}," \xA0\xA0\xA0Add\xA0\xA0\xA0 ")):g("",!0),n.value>=1?(m(),p("button",{key:1,class:"btn btn-danger ml-5 mr-5 mb-5",onClick:t[1]||(t[1]=o=>n.value>=1?n.value--:n.value)}," Remove ")):g("",!0)])]))}},ut={key:0,class:"sk-folding-cube"},mt=r("div",{class:"sk-cube1 sk-cube"},null,-1),pt=r("div",{class:"sk-cube2 sk-cube"},null,-1),_t=r("div",{class:"sk-cube4 sk-cube"},null,-1),ft=r("div",{class:"sk-cube3 sk-cube"},null,-1),ht=[mt,pt,_t,ft],se={props:["ignJson","combustionScript"],setup(e){const i=e;var n=x(!1);const s=new re,t=async function(){o();try{let a=await s.convertToImage(i.ignJson,i.combustionScript);s.downloadImageFile(a)}catch(a){alert(a)}o()},o=function(){document.querySelector("#loadingToggle").click()};return(a,u)=>(m(),p(V,null,[r("button",{class:"btn btn-primary mb-4",style:{width:"100%"},onClick:u[0]||(u[0]=c=>t())}," Convert and Download "),R(n)?(m(),p("div",ut,ht)):g("",!0),r("button",{id:"loadingToggle",hidden:"",onClick:u[1]||(u[1]=c=>fe(n)?n.value=!R(n):n=!R(n))})],64))}};class re{constructor(){q(this,"images",{zero:{ignFatDirEntry:61536,ignFileOffset:86016},combustion:{ignFatDirEntry:61632,combFatDirEntry:63680,ignFileOffset:15796224,combFileOffset:3244032}});q(this,"alphabet",["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whisky","X-ray","Yankee","Zulu","Nico","Ignaz","Robert","Moritz"]);String.prototype.replaceAt=function(i,n){return this.substring(0,i)+n+this.substring(i+n.length)},String.prototype.hexEncode=function(){var i,n,s="";for(n=0;n<this.length;n++)i=this.charCodeAt(n).toString(16),s+=("000"+i).slice(-4);return s}}bufferToHex(i){return[...new Uint8Array(i)].map(n=>n.toString(16).padStart(2,"0")).join("")}strToHex(i){for(var n="",s=0;s<i.length;s++)n+=i.charCodeAt(s).toString(16);return n}async fetchImage(i){return fetch("templates/ignition-"+i+"-template.img").then(n=>n.arrayBuffer())}async convertToImage(i,n){let s=JSON.stringify(i,null,2),t=n===void 0?"zero":"combustion",o=n!==void 0;console.log("images["+t+"] :>> ",this.images[t]);let a=await this.fetchImage(t),u=new DataView(a),c=this.images[t].ignFatDirEntry,h=new DataView(a,c+28,4),y=new TextEncoder,K=y.encode(s),U=h.getInt32(0,!0);if(h.setInt32(0,K.length,!0),K.length>=U)throw new Error(`Warning!

Ignition configuration is too large.

The maximum file size for the Ignition configuration is currently set to `+U+"B.");for(let _=0;_<K.length;_++)u.setInt8(this.images[t].ignFileOffset+_,K[_]);if(console.log("jsonSize(string): "+s.length),console.log("jsonSize(bin): "+K.length),console.log("dirEntry :>> ",c),console.log("images["+t+"] :>> ",this.images[t]),o){let _=this.images[t].combFatDirEntry;h=new DataView(a,_+28,4);let v=y.encode(n),k=h.getInt32(0,!0);if(h.setInt32(0,v.length,!0),v.length>=k)throw new Error(`Warning!

Combustion configuration is too large.

The maximum file size for the Combustion configuration is currently set to `+k+"B.");for(let S=0;S<v.length;S++)u.setInt8(this.images[t].combFileOffset+S,v[S])}var f=new Uint8Array(a);return new Blob([f],{type:"application/octet-stream"})}downloadImageFile(i){var n=window.document.createElement("a");n.href=window.URL.createObjectURL(i),n.download="ignition-"+this.alphabet[Math.floor(Math.random()*this.alphabet.length)].toLowerCase()+".img",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}const P="user",vt={setup:()=>{const e=d.uid();return{uid:e,Utils:d,formKey:i=>d.getFormKey(P,i,e)}},methods:{encodeToIgn:function(e,i){d.GlobalStorage.store.addUsers.amount=0;const n=(t,o)=>d.getFormValue(P,i,t,o),s=P+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{if(e.passwd="passwd"in e?e.passwd:{users:[]},d.GlobalStorage.store.addUsers.amount++,n("name",t)!=="root"&&(d.GlobalStorage.store.addUsers.onlyUsernameRoot=!1),n("runs_on_suse",t)===!0&&(e.storage===void 0&&(e.storage={}),e.storage.filesystems===void 0&&(e.storage.filesystems=[]),e.storage.filesystems.push({device:"/dev/disk/by-label/ROOT",format:"btrfs",mountOptions:["subvol=/@/home"],path:"/home",wipeFilesystem:!1})),e.passwd.users!==void 0){const o=n("ssh_keys",t),a=o!==void 0&&o.includes(",")?o.replaceAll(" ","").split(","):[o],u=n("passwd",t)===""||n("passwd",t)===void 0;e.passwd.users.push({name:n("name",t),passwordHash:u?void 0:d.PasswordHashes.hashes[t],sshAuthorizedKeys:o===void 0||o===""?void 0:a})}})},watchFormData:async function(e,i){const n=(s,t)=>e[d.getFormKey(P,s,t)];Object.keys(e).filter(s=>s.includes("user_passwd")&&!s.includes("hashed")).map(s=>s.replace("user_passwd_","")).forEach(async s=>{const t=n("passwd",s),o=n("hash_type",s),a=t===""||t===void 0,u=e["user_passwd_"+s]===i["user_passwd_"+s];a||u||gt(t,o).then(c=>d.PasswordHashes.hashes[s]=c)})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(P,i,t,o),s=P+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.login===void 0&&(e.login={}),e.login.users===void 0&&(e.login.users=[]);let o={};o.name=n("name",t),o.hash_type=n("hash_type",t),o.passwd=n("passwd",t),o.ssh_keys=n("ssh_keys",t),o.runs_on_suse=n("runs_on_suse",t),e.login.users.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(P,i,t,o,a),s=P+"_name_";e.login==null||e.login.users==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.login.users.shift();n("name",t,o.name),n("hash_type",t,o.hash_type),n("passwd",t,o.passwd),d.PasswordHashes.hashes[t]=z.hashSync(o.passwd,8),n("ssh_keys",t,o.ssh_keys),n("runs_on_suse",t,o.runs_on_suse)})},countImport:function(e){return e.login!=null&&e.login.users!=null?e.login.users.length:0}}};async function gt(e,i){if(i==="Hash Yourself")return e;var n=await z.genSalt(10).then();return z.hash(e,n)}const yt={class:"users"},bt={key:0};function wt(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",yt,[l(a,{class:"form-control",name:e.formKey("name"),label:"Username (required)",placeholder:"write your os username here",validation:"required","validation-behavior":"live",value:"root",help:"A new user will be created, if it does not exist."},null,8,["name"]),l(a,{name:e.formKey("hash_type"),label:"Password Hash Type",placeholder:"bcrypt",type:"select",validation:"optional","validation-behavior":"live",value:"bcrypt",options:["bcrypt","Hash Yourself"],help:"The way you want your password to be hashed."},null,8,["name"]),l(a,{name:e.formKey("passwd"),label:"Password",placeholder:"write the corresponding password here",type:"password",validation:"optional","validation-behavior":"live",help:"Your password is never sent over the internet, everything is local."},null,8,["name"]),l(a,{name:e.formKey("ssh_keys"),label:"SSH Public Keys",placeholder:"write the corresponding ssh keys here, separated by commas, spaces are ignored",type:"textarea",validation:"optional","validation-behavior":"live",help:"Your keys are never sent over the internet, everything is local."},null,8,["name"]),e.Utils.GlobalStorage.store.addUsers.amount==0?(m(),p("div",bt,[l(a,{name:e.formKey("runs_on_suse"),label:"Mount /home",validation:"required",type:"checkbox","validation-behavior":"live",help:"Required on SUSE related systems for creating users not named root. Otherwise, applying the Ignition config will fail"},null,8,["name"])])):g("",!0)])}var W=$(vt,[["render",wt]]);const E="create_file",kt={setup:()=>{const e=d.uid();return{sourceType:x("data"),formKey:n=>d.getFormKey(E,n,e)}},methods:{encodeToIgn:function(e,i){const n=(o,a)=>d.getFormValue(E,i,o,a),s=function(o){return window.btoa(encodeURIComponent(o).replace(/%([0-9A-F]{2})/g,function(u,c){return String.fromCharCode("0x"+c)}))},t=E+"_path_";Object.keys(i).filter(o=>o.includes(t)).map(o=>o.replace("create_file_path_","")).forEach(o=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let a,u={};switch(n("source_type",o)){case"data":let c=n("data_content",o);a="data:text/plain;charset=utf-8;base64,"+s(c===void 0?"":c);break;case"data-vagrant":let h=n("data_vagrant_content",o);a="data:,"+encodeURIComponent(h===void 0?"":h);break;case"https":a=n("https_content",o);break;case"http":a=n("http_content",o);let y=n("http_verification",o);y&&(u.verification={hash:y});break;case"tftp":case"s3":case"gs":a=n("tftp_s3_gs_content",o);break}e.storage.files.push(Object.assign({path:n("path",o),mode:parseInt(n("mode",o)),overwrite:n("overwrite",o),contents:{source:a}},u))})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(E,i,t,o),s=E+"_path_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let o={};switch(o.source_type=n("source_type",t),o.source_type){case"data":o.data_content=n("data_content",t);break;case"data-vagrant":o.data_vagrant_content=n("data_vagrant_content",t);case"https":o.https_content=n("https_content",t);break;case"http":o.http_content=n("http_content",t),o.http_verification=n("http_verification",t);break;case"tftp":case"s3":case"gs":o.tftp_s3_gs_content=n("tftp_s3_gs_content",t);break}o.path=n("path",t),o.mode=n("mode",t),o.overwrite=n("overwrite",t),e.storage.files.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(E,i,t,o,a),s=E+"_path_";e.storage==null||e.storage.files==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.storage.files.shift();switch(n("source_type",t,o.source_type),o.source_type){case"data":n("data_content",t,o.data_content);break;case"data-vagrant":n("data_vagrant_content",t,o.data_vagrant_content);case"https":n("https_content",t,o.https_content);break;case"http":n("http_content",t,o.http_content),n("http_verification",t,o.http_verification);break;case"tftp":case"s3":case"gs":n("tftp_s3_gs_content",t,o.tftp_s3_gs_content);break}n("path",t,o.path),n("mode",t,o.mode),n("overwrite",t,o.overwrite)})},countImport:function(e){return e.storage!=null&&e.storage.files!=null?e.storage.files.length:0}}},xt={class:"createfiles"},$t={class:"source"},Ft={key:0,class:"data"},Kt={key:1,class:"data-vagrant"},It={key:2,class:"https"},Vt={key:3,class:"http"},Pt={key:4,class:"tftp-s3-gs"};function St(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",xt,[l(a,{name:e.formKey("path"),label:"File Path (required)",placeholder:"path on the filesystem",validation:"required","validation-behavior":"live",value:"/etc/someconfig",help:"The absolute path to the file"},null,8,["name"]),l(a,{name:e.formKey("overwrite"),label:"Overwrite",placeholder:"path on the filesystem",validation:"required",type:"checkbox","validation-behavior":"live",help:"Whether to delete preexisting nodes at the path"},null,8,["name"]),l(a,{name:e.formKey("mode"),label:"File Mode (required)",type:"number",value:"420",validation:"required","validation-behavior":"live",help:"The file's permission mode. Note that the mode must be properly specified as a decimal value (i.e. 0644 -> 420)."},null,8,["name"]),r("div",$t,[l(a,{type:"select",name:e.formKey("source_type"),modelValue:e.sourceType,"onUpdate:modelValue":i[0]||(i[0]=u=>e.sourceType=u),label:"Scheme for file contents url (use data for plain text)",help:"If source is omitted and a regular file already exists at the path, Ignition will do nothing. If source is omitted and no file exists, an empty file will be created.",options:["data","data-vagrant","https","http","tftp","s3","gs","omit"]},null,8,["name","modelValue"])]),e.sourceType==="data"?(m(),p("div",Ft,[l(a,{name:e.formKey("data_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),e.sourceType==="data-vagrant"?(m(),p("div",Kt,[l(a,{name:e.formKey("data_vagrant_content"),label:"File Content Data (required)",placeholder:"write the file content here, spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])])):g("",!0),e.sourceType==="https"?(m(),p("div",It,[l(a,{name:e.formKey("https_content"),label:"HTTPS Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"])])):g("",!0),e.sourceType==="http"?(m(),p("div",Vt,[l(a,{name:e.formKey("http_content"),label:"HTTP Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required|url","validation-behavior":"live"},null,8,["name"]),l(a,{name:e.formKey("http_verification"),label:"Verification Hash (optional)",placeholder:"e.g. sha512-012345678..",type:"text",validation:"optional","validation-behavior":"live",help:"The hash of the contents, in the form <type>-<value> where type is either sha512 or sha256."},null,8,["name"])])):g("",!0),!e.sourceType.includes("http")&&e.sourceType!=="data"&&e.sourceType!=="data-vagrant"&&e.sourceType!=="omit"?(m(),p("div",Pt,[l(a,{name:e.formKey("tftp_s3_gs_content"),label:e.sourceType.toUpperCase()+" Url (required)",placeholder:"the URL of the file contents",type:"text",validation:"required","validation-behavior":"live"},null,8,["name","label"])])):g("",!0)])}var D=$(kt,[["render",St]]);const C="add_hostname",Et={setup:()=>{const e=d.uid();return{formKey:i=>d.getFormKey(C,i,e)}},methods:{encodeToIgn:function(e,i){const n=(t,o)=>d.getFormValue(C,i,t,o),s=C+"_hostname_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let o=n("hostname",t),a="data:,"+(o===void 0?"":o);e.storage.files.push({path:"/etc/hostname",mode:420,overwrite:!0,contents:{source:a}})})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(C,i,t,o),s=C+"_hostname_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=n("hostname",t);e.hostname=o===void 0?"":o})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(C,i,t,o,a),s=C+"_hostname_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.hostname!=null&&(n("hostname",t,e.hostname),e.hostname=void 0)})},countImport:function(e){return e.hostname!=null?1:0}}};function Ct(e,i,n,s,t,o){const a=w("FormKit");return m(),he(a,{name:e.formKey("hostname"),label:"Hostname",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])}var J=$(Et,[["render",Ct]]);const A="add_network",At={setup:()=>{const e=d.uid(),i=x("DHCP"),n=x("DHCP"),s=x(!1),t=x(!0),o=x(!0),a=x("WPA & WPA2 Personal");return{ipv4enabled:t,ipv4networkType:i,ipv6enabled:o,ipv6networkType:n,wifienabled:s,keymgmt:a,formKey:u=>d.getFormKey(A,u,e)}},methods:{encodeToIgn:function(e,i){const n=(a,u)=>d.getFormValue(A,i,a,u),s=function(a){return window.btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))},t=A+"_interface_";let o=0;Object.keys(i).filter(a=>a.includes(t)).map(a=>a.replace(t,"")).forEach(a=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let u="/etc/NetworkManager/system-connections/",c="";const h=n("wifi_enabled",a),y=n("ipv4_enabled",a),K=n("ipv4_auto_dns",a),U=n("ipv6_enabled",a),f=n("ipv6_auto_dns",a),_=n("ipv4_network_type",a)==="DHCP",v=n("ipv6_network_type",a)==="DHCP",k=n("key_mgmt",a),S=n(h===!0?"wifi_ssid_content":"interface",a);u=u.concat(S,".nmconnection"),c=c.concat(`
[connection]`,`
`,"id=",S,`
`,"type=",h===!0?"wifi":"ethernet",`
`,"interface-name=",n("interface",a),`
`),c=c.concat(`
[ipv4]`,`
`,`dns-search=
`),y===!0?(c=c.concat("method=",_===!0?"auto":"manual",`
`),_===!1&&(c=c.concat("address1=",n("ipv4_address",a),"/",n("ipv4_netmask",a)),n("ipv4_gateway",a)!=null&&(c=c.concat(",",n("ipv4_gateway",a))),c=c.concat(`
`)),n("ipv4_dns",a)&&(c=c.concat("dns=",n("ipv4_dns",a),`
`)),K==!1&&(c=c.concat(`ignore_auto_dns=true
`))):c=c.concat("method=disabled",`
`),c=c.concat(`
[ipv6]`,`
`,`dns-search=
`,`addr-gen-mode=eui64
`),U===!0?(c=c.concat("method=",v===!0?"auto":"manual",`
`),v===!1&&(c=c.concat("address1=",n("ipv6_address",a),"/",n("ipv6_netmask",a)),n("ipv6_gateway",a)!=null&&(c=c.concat(",",n("ipv6_gateway",a))),c=c.concat(`
`)),n("ipv6_dns",a)&&(c=c.concat("dns=",n("ipv6_dns",a),`
`)),f==!1&&(c=c.concat(`ignore_auto_dns=true
`))):c=c.concat("method=ignore",`
`),h===!0&&(c=c.concat(`
[wifi]`,`
`,"ssid=",n("wifi_ssid_content",a),`
`),k!=="none"&&(c=c.concat(`
[wifi-security]`,`
`,"key-mgmt=",k==="WPA3 Personal"?"sae":"wpa-psk",`
`,"psk=",n("wifi_password_content",a),`
`))),e.storage.files.push({path:u,mode:384,overwrite:!0,contents:{source:"data:text/plain;charset=utf-8;base64,"+s(c),human_read:c}}),o==0&&(c=`[main]
# Do not do automatic (DHCP/SLAAC) configuration on ethernet devices
# with no other matching connections.
no-auto-default=*
`,e.storage.files.push({path:"/etc/NetworkManager/conf.d/noauto.conf",mode:420,overwrite:!0,contents:{source:"data:text/plain;charset=utf-8;base64,"+s(c),human_read:c}})),o++})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(A,i,t,o),s=A+"_interface_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.network===void 0&&(e.network={}),e.network.interfaces===void 0&&(e.network.interfaces=[]);let o={};o.name=n("interface",t),n("wifi_enabled",t)&&(o.wifi={},o.wifi.key_mgmt=n("key_mgmt",t),o.wifi.ssid=n("wifi_ssid_content",t),o.wifi.password=n("wifi_password_content",t)),n("ipv4_enabled",t)&&(o.ipv4={},o.ipv4.network_type=n("ipv4_network_type",t),o.ipv4.auto_dns_enabled=n("ipv4_auto_dns",t),o.ipv4.dns=n("ipv4_dns",t),o.ipv4.network_type==="fixed IPv4 Address"&&(o.ipv4.address=n("ipv4_address",t),o.ipv4.netmask=n("ipv4_netmask",t),o.ipv4.gateway=n("ipv4_gateway",t))),n("ipv6_enabled",t)&&(o.ipv6={},o.ipv6.network_type=n("ipv6_network_type",t),o.ipv6.auto_dns_enabled=n("ipv6_auto_dns",t),o.ipv6.dns=n("ipv6_dns",t),o.ipv6.network_type==="fixed IPv6 Address"&&(o.ipv6.address=n("ipv6_address",t),o.ipv6.netmask=n("ipv6_netmask",t),o.ipv6.gateway=n("ipv6_gateway",t))),e.network.interfaces.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(A,i,t,o,a),s=A+"_interface_";e.network==null||e.network.interfaces==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.network.interfaces.shift();n("interface",t,o.name),o.wifi!=null?(n("wifi_enabled",t,!0),n("key_mgmt",t,o.wifi.key_mgmt),n("wifi_ssid_content",t,o.wifi.ssid),n("wifi_password_content",t,o.wifi.password)):n("wifi_enabled",t,!1),o.ipv4!=null?(n("ipv4_enabled",t,!0),n("ipv4_network_type",t,o.ipv4.network_type),n("ipv4_auto_dns",t,o.ipv4.auto_dns_enabled),n("ipv4_dns",t,o.ipv4.dns),o.ipv4.network_type==="fixed IPv4 Address"&&(n("ipv4_address",t,o.ipv4.address),n("ipv4_netmask",t,o.ipv4.netmask),n("ipv4_gateway",t,o.ipv4.gateway))):n("ipv4_enabled",t,!1),o.ipv6!=null?(n("ipv6_enabled",t,!0),n("ipv6_network_type",t,o.ipv6.network_type),n("ipv6_auto_dns",t,o.ipv6.auto_dns_enabled),n("ipv6_dns",t,o.ipv6.dns),o.ipv6.network_type==="fixed IPv6 Address"&&(n("ipv6_address",t,o.ipv6.address),n("ipv6_netmask",t,o.ipv6.netmask),n("ipv6_gateway",t,o.ipv6.gateway))):n("ipv6_enabled",t,!1)})},countImport:function(e){return e.network!=null&&e.network.interfaces!=null?e.network.interfaces.length:0}}},Tt={key:0},Ot={class:"container-fluid"},Bt={class:"row"},Nt=r("div",{class:"col-1"},null,-1),Ut={class:"col-12"},qt={key:0},Lt={key:1},Rt={class:"container-fluid"},Ht={class:"row"},Mt=r("div",{class:"col-1"},null,-1),zt={class:"col-12"},Wt={key:0},Dt={key:2},Jt={class:"container-fluid"},Gt={class:"row"},Yt=r("div",{class:"col-1"},null,-1),Zt={class:"col-12"},Qt={key:0};function Xt(e,i,n,s,t,o){const a=w("FormKit");return m(),p(V,null,[l(a,{name:e.formKey("interface"),label:"Interface Name",type:"text",placeholder:"e.g. eth0, wlan0,... ",validation:"required","validation-visibility":"live",help:" "},null,8,["name"]),l(a,{name:e.formKey("ipv4_enabled"),label:"IPv4 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv4enabled,"onUpdate:modelValue":i[0]||(i[0]=u=>e.ipv4enabled=u)},null,8,["name","modelValue"]),e.ipv4enabled===!0?(m(),p("div",Tt,[r("div",Ot,[r("div",Bt,[Nt,r("div",Ut,[l(a,{type:"select",name:e.formKey("ipv4_network_type"),modelValue:e.ipv4networkType,"onUpdate:modelValue":i[1]||(i[1]=u=>e.ipv4networkType=u),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv4 Address"]},null,8,["name","modelValue"]),e.ipv4networkType==="fixed IPv4 Address"?(m(),p("div",qt,[l(a,{name:e.formKey("ipv4_address"),label:"IP Address",placeholder:"___.___.___.___",type:"text",validation:[["required"],["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"IPv4 address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"]),l(a,{name:e.formKey("ipv4_netmask"),label:"Netmask",type:"number",value:"24",validation:"between:0,32","validation-visibility":"live",help:"Values between 0 and 32"},null,8,["name"]),l(a,{name:e.formKey("ipv4_gateway"),label:"Gateway",placeholder:"___.___.___.___",type:"text",validation:[["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"Gateway address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"])])):g("",!0),l(a,{name:e.formKey("ipv4_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evalutated automatically."},null,8,["name"]),l(a,{name:e.formKey("ipv4_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(a,{name:e.formKey("ipv6_enabled"),label:"IPv6 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv6enabled,"onUpdate:modelValue":i[2]||(i[2]=u=>e.ipv6enabled=u)},null,8,["name","modelValue"]),e.ipv6enabled===!0?(m(),p("div",Lt,[r("div",Rt,[r("div",Ht,[Mt,r("div",zt,[l(a,{type:"select",name:e.formKey("ipv6_network_type"),modelValue:e.ipv6networkType,"onUpdate:modelValue":i[3]||(i[3]=u=>e.ipv6networkType=u),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv6 Address"]},null,8,["name","modelValue"]),e.ipv6networkType==="fixed IPv6 Address"?(m(),p("div",Wt,[l(a,{name:e.formKey("ipv6_address"),label:"IP Address",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["required"],["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"IPv6 address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"]),l(a,{name:e.formKey("ipv6_netmask"),label:"Netmask",type:"number",value:"64",validation:"between:0,128","validation-visibility":"live",help:"Values between 0 and 128"},null,8,["name"]),l(a,{name:e.formKey("ipv6_gateway"),label:"Gateway",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"Gateway address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"])])):g("",!0),l(a,{name:e.formKey("ipv6_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evalutated automatically."},null,8,["name"]),l(a,{name:e.formKey("ipv6_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(a,{name:e.formKey("wifi_enabled"),label:"enable WiFi",type:"checkbox","validation-behavior":"live",modelValue:e.wifienabled,"onUpdate:modelValue":i[4]||(i[4]=u=>e.wifienabled=u),help:"Whether interface will be connected to WiFi."},null,8,["name","modelValue"]),e.wifienabled===!0?(m(),p("div",Dt,[r("div",Jt,[r("div",Gt,[Yt,r("div",Zt,[l(a,{name:e.formKey("wifi_ssid_content"),label:"SSID",type:"text",placeholder:"Service Set IDentifier (SSID)",validation:"required","validation-behavior":"live",help:"Uniquely name of a wireless local area network (WLAN)."},null,8,["name"]),l(a,{type:"select",name:e.formKey("key_mgmt"),modelValue:e.keymgmt,"onUpdate:modelValue":i[5]||(i[5]=u=>e.keymgmt=u),label:"Key Management",help:"Key management used for the connection.",options:["none","WPA & WPA2 Personal","WPA3 Personal"],value:"WPA & WPA2 Personal"},null,8,["name","modelValue"]),e.keymgmt!=="none"?(m(),p("div",Qt,[l(a,{name:e.formKey("wifi_password_content"),label:"Password",type:"text",help:"Password required for the WiFi connection."},null,8,["name"])])):g("",!0)])])])])):g("",!0)],64)}var G=$(At,[["render",Xt]]);const T="start_service",jt={setup:()=>{const e=d.uid();return{sourceType:x("data"),formKey:n=>d.getFormKey(T,n,e)}},methods:{encodeToIgn:function(e,i){const n=(t,o)=>d.getFormValue(T,i,t,o),s=T+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd="systemd"in e?e.systemd:{units:[]};let o=n("enabled",t),a=o==="omit";e.systemd.units.push({name:n("name",t),enabled:a?void 0:o==="yes",contents:n("contents",t)})})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(T,i,t,o),s=T+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.units===void 0&&(e.systemd.units=[]);let o={};o.name=n("name",t),o.enabled=n("enabled",t),o.contents=n("contents",t),e.systemd.units.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(T,i,t,o,a),s=T+"_name_";e.systemd==null||e.systemd.units==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.systemd.units.shift();n("name",t,o.name),n("enabled",t,o.enabled),n("contents",t,o.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.units!=null?e.systemd.units.length:0}}},en={class:"startservices"};function tn(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",en,[l(a,{name:e.formKey("name"),label:"Service Name (required)",validation:"required","validation-behavior":"live",value:"example.service",help:"Every unit must have a unique name. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(a,{name:e.formKey("enabled"),label:"enabled",value:"yes",validation:"optional",type:"select","validation-behavior":"live",help:"Whether or not the service shall be enabled. When true, the service is enabled. When false, the service is disabled. When omitted, the service is unmodified.",options:["yes","no","omit"]},null,8,["name"]),l(a,{name:e.formKey("contents"),label:"Service Unit Content (optional)",placeholder:"write the service unit content here, spaces, newlines etc. are preserved",type:"textarea",validation:"optional","validation-behavior":"live",help:"The contents of the unit."},null,8,["name"])])}var Y=$(jt,[["render",tn]]);const O="modify_service",nn={setup:()=>{const e=d.uid();return{formKey:i=>d.getFormKey(O,i,e)}},methods:{encodeToIgn:function(e,i){const n=(t,o)=>d.getFormValue(O,i,t,o),s=O+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd="systemd"in e?e.systemd:{units:[]};let o=e.systemd.units.find(u=>u.name===n("name",t)),a={name:n("dropin_name",t),contents:n("contents",t)};if(o!==void 0){if(o.dropins!==void 0){o.dropins.push(a);return}o.dropins=[a];return}e.systemd.units.push({name:n("name",t),dropins:[a]})})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(O,i,t,o),s=O+"_name_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.dropins===void 0&&(e.systemd.dropins=[]);let o={};o.name=n("name",t),o.dropin_name=n("dropin_name",t),o.contents=n("contents",t),e.systemd.dropins.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(O,i,t,o,a),s=O+"_name_";e.systemd==null||e.systemd.dropins==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.systemd.dropins.shift();n("name",t,o.name),n("dropin_name",t,o.dropin_name),n("contents",t,o.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.dropins!=null?e.systemd.dropins.length:0}}},on={class:"modifyservice"};function an(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",on,[l(a,{name:e.formKey("name"),label:"Name of the service that you want to modify (required)",validation:"required","validation-behavior":"live",value:"example.service",placeholder:"e.g. systemd-journald.service",help:"The name of the unit. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(a,{name:e.formKey("dropin_name"),label:"Name of the drop-in file",validation:"required","validation-behavior":"live",value:"debug.conf",help:"The name of the drop-in. This must be suffixed with \u201C.conf\u201D."},null,8,["name"]),l(a,{name:e.formKey("contents"),label:"Drop-In Unit Content (required)",placeholder:"e.g. [Service].. | spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Write the service unit content here, spaces, newlines etc. are preserved."},null,8,["name"])])}var Z=$(nn,[["render",an]]);const Q="debug_bytes",sn={setup:()=>{const e=d.uid();return{uid:e,formKey:i=>d.getFormKey(Q,i,e)}},methods:{encodeToIgn:function(e,i){const n=(t,o)=>d.getFormValue(Q,i,t,o),s=Q+"_size_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{var o=new Array(parseInt(n("size",t)-128)+1).join("B");e.debugBytes=e.debugBytes!==void 0?e.debugBytes:[],e.debugBytes.push(o)})}}},rn={class:"users"};function ln(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",rn,[l(a,{name:e.formKey("size"),label:"Bytes To Add",type:"number",validation:"required","validation-behavior":"live",value:"2048",help:"This is a debug form."},null,8,["name"])])}var X=$(sn,[["render",ln]]);const le="debug_analyze",cn={setup:()=>{const e=d.uid();let i=new re;return console.log(i),{uid:e,formKey:n=>d.getFormKey(le,n,e)}},methods:{encodeToIgn:function(e,i){const n=le+"_file_";Object.keys(i).filter(s=>s.includes(n)).map(s=>s.replace(n,"")).forEach(s=>{console.log("--- debug analyze file ---");let t;try{console.log('formData["debug_analyze_file_" + id] :>> ',i["debug_analyze_file_"+s]),t=Object.assign({},i["debug_analyze_file_"+s][0])}catch{}console.log(t),console.log("-----")})}}},dn={class:"analyze"};function un(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",dn,[l(a,{name:e.formKey("file"),label:"File To Analyze (Console Log)",type:"file",validation:"required","validation-behavior":"live",help:"This is a debug form."},null,8,["name"])])}var ce=$(cn,[["render",un]]);const B="comb_registration",mn={setup:()=>{const e=d.uid();return{uid:e,formKey:i=>d.getFormKey(B,i,e)}},methods:{encodeToIgn:function(e,i){const n=(o,a)=>d.getFormValue(B,i,o,a);let s=0;const t=B+"_registrationserver_";Object.keys(i).filter(o=>o.includes(t)).map(o=>o.replace(t,"")).forEach(o=>{s===0&&(e.combustion+=`
# Registration
if ! which SUSEConnect > /dev/null 2>&1; then
    zypper --non-interactive install suseconnect-ng
fi
`),s++,e.combustion+="SUSEConnect ",n("product",o)!=="Base Product"&&(e.combustion+="--product "+n("product",o)+" "),n("email",o)&&(e.combustion+="--email "+n("email",o)+" "),e.combustion+="--url "+n("registrationserver",o)+" --regcode "+n("regcode",o)+`
`})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(B,i,t,o),s=B+"_registrationserver_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.registration===void 0&&(e.registration={}),e.registration.registrations===void 0&&(e.registration.registrations=[]);let o={};o.registrationserver=n("registrationserver",t),o.regcode=n("regcode",t),o.product=n("product",t),o.email=n("email",t),e.registration.registrations.push(o)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(B,i,t,o,a),s=B+"_registrationserver_";e.registration==null||e.registration.registrations==null||Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{let o=e.registration.registrations.shift();n("registrationserver",t,o.registrationserver),n("regcode",t,o.regcode),n("product",t,o.product),n("email",t,o.email)})},countImport:function(e){return e.registration!=null&&e.registration.registrations!=null?e.registration.registrations.length:0}}};function pn(e,i,n,s,t,o){const a=w("FormKit");return m(),p(V,null,[l(a,{name:e.formKey("registrationserver"),label:"Registration server",type:"text",value:"https://scc.suse.com",help:"URL of the registration server"},null,8,["name"]),l(a,{name:e.formKey("product"),label:"Product name",type:"text",value:"Base Product",help:"Product or extension name"},null,8,["name"]),l(a,{name:e.formKey("regcode"),label:"Registration code",type:"text",value:"",help:"Subscription registration code for the product to be registered."},null,8,["name"]),l(a,{name:e.formKey("email"),label:"Email",type:"email",validation:"required|email","validation-visibility":"live",help:"Email address for which the registration will be done."},null,8,["name"])],64)}var j=$(mn,[["render",pn]]);const N="comb_salt",_n={setup:()=>{const e=d.uid();return{preseedKeyVia:x("defining keys manually"),uid:e,formKey:n=>d.getFormKey(N,n,e)}},methods:{encodeToIgn:function(e,i){const n=(t,o)=>d.getFormValue(N,i,t,o),s=N+"_master_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.combustion+=`
# Salt Minion
if ! which salt-minion > /dev/null 2>&1; then
    zypper --non-interactive install salt-minion
fi
`,n("master",t)&&(e.combustion+='echo "master: '+n("master",t)+`" \\
 >/etc/salt/minion.d/fuel-ignition.conf
`),n("preseed_key_via",t)=="defining keys manually"&&(n("minion_pem_key",t)&&(e.combustion+='echo "'+n("minion_pem_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pem
`),n("minion_pub_key",t)&&(e.combustion+='echo "'+n("minion_pub_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pub
`)),n("preseed_key_via",t)=="downloading keys from a ftp/http server"&&(e.combustion+=`if ! which curl > /dev/null 2>&1; then
    zypper --non-interactive install curl
fi
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pub "+n("key_url",t)+"/"+n("key_name",t)+`.pub
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pem "+n("key_url",t)+"/"+n("key_name",t)+`.pem
`),n("enableservice",t)&&(e.combustion+=`systemctl enable salt-minion.service
`)})},encodeToExport:function(e,i){const n=(t,o)=>d.getFormValue(N,i,t,o),s=N+"_master_";Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{e.salt===void 0&&(e.salt={}),e.salt.master=n("master",t),e.salt.preseed_key_via=n("preseed_key_via",t),e.salt.minion_pem_key=n("minion_pem_key",t),e.salt.minion_pub_key=n("minion_pub_key",t),e.salt.url_login_name=n("url_login_name",t),e.salt.url_login_password=n("url_login_password",t),e.salt.key_url=n("key_url",t),e.salt.key_name=n("key_name",t),e.salt.enableservice=n("enableservice",t)})},fillImport:function(e,i){const n=(t,o,a)=>d.setFormValue(N,i,t,o,a),s=N+"_master_";e.salt!=null&&Object.keys(i).filter(t=>t.includes(s)).map(t=>t.replace(s,"")).forEach(t=>{n("master",t,e.salt.master),n("preseed_key_via",t,e.salt.preseed_key_via),n("minion_pem_key",t,e.salt.minion_pem_key),n("minion_pub_key",t,e.salt.minion_pub_key),n("url_login_name",t,e.salt.url_login_name),n("url_login_password",t,e.salt.url_login_password),n("key_url",t,e.salt.key_url),n("key_name",t,e.salt.key_name),n("enableservice",t,e.salt.enableservice)})},countImport:function(e){return e.salt!=null?1:0}}},fn={key:0},hn={key:1};function vn(e,i,n,s,t,o){const a=w("FormKit");return m(),p(V,null,[l(a,{name:e.formKey("master"),label:"Salt master",type:"text",validation:"required",help:"Host name or IP address of the configuration management server."},null,8,["name"]),l(a,{type:"select",name:e.formKey("preseed_key_via"),modelValue:e.preseedKeyVia,"onUpdate:modelValue":i[0]||(i[0]=u=>e.preseedKeyVia=u),label:"Preseed salt minion with accepted key",help:"Select how the keys are given.",options:["defining keys manually","downloading keys from a ftp/http server"]},null,8,["name","modelValue"]),e.preseedKeyVia==="defining keys manually"?(m(),p("div",fn,[l(a,{name:e.formKey("minion_pem_key"),label:"Minion pem key",placeholder:`-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----`,type:"textarea","validation-behavior":"live",help:"Private key for communitcation with the master."},null,8,["name"]),l(a,{name:e.formKey("minion_pub_key"),label:"Minion pub key",placeholder:`-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY-----`,type:"textarea","validation-behavior":"live",help:"Public key for communitcation with the master."},null,8,["name"])])):g("",!0),e.preseedKeyVia==="downloading keys from a ftp/http server"?(m(),p("div",hn,[l(a,{name:e.formKey("key_name"),label:"Minion ID",type:"text",validation:"required","validation-behavior":"live",help:"Minion-ID which is the name of the key too. (<Minion ID>.pem, <Minion ID>.pub)"},null,8,["name"]),l(a,{name:e.formKey("key_url"),label:"Key download URL",type:"text",placeholder:"http://<download_server>/<directory>",validation:"required","validation-behavior":"live",help:"Path to a HTTP/FTP (and other curl formats) server which contains the files <Minion ID>.pem and <Minion ID>.pub"},null,8,["name"]),l(a,{name:e.formKey("url_login_name"),label:"Login name of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"]),l(a,{name:e.formKey("url_login_password"),label:"Login password of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"])])):g("",!0),l(a,{name:e.formKey("enableservice"),label:"Enable Salt Minion Service",type:"checkbox",value:!0,"validation-behavior":"live",help:"Whether the service will be enabled."},null,8,["name"])],64)}var ee=$(_n,[["render",vn]]);const H="comb_install",gn={setup:()=>{const e=d.uid();return{uid:e,formKey:i=>d.getFormKey(H,i,e)}},methods:{encodeToIgn:function(e,i){Object.keys(i).filter(n=>n.includes(H)).forEach(n=>{e.combustion+=`
zypper --non-interactive install `+d.normalizeZypperPackages(i[n])})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(H)).forEach(n=>{e.package===void 0&&(e.package={}),e.package.install===void 0&&(e.package.install=[]),e.package.install.push(i[n])})},fillImport:function(e,i){e.package==null||e.package.install==null||Object.keys(i).filter(n=>n.includes(H)).forEach(n=>{i[n]=e.package.install.shift()})},countImport:function(e){return e.package!=null&&e.package.install!=null?e.package.install.length:0}}},yn={class:"combustioninstall"};function bn(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",yn,[l(a,{name:e.formKey("package_name"),label:"Packages you want to install (space or comma separated)",type:"text",validation:"required","validation-behavior":"live",value:"vim-small",help:"This will add a 'zypper --non-interactive install [packages]' line to the combustion script."},null,8,["name"])])}var te=$(gn,[["render",bn]]);const M="comb_raw",wn={setup:()=>{const e=d.uid();return{uid:e,formKey:i=>d.getFormKey(M,i,e)}},methods:{encodeToIgn:function(e,i){Object.keys(i).filter(n=>n.includes(M)).forEach(n=>{e.combustion+=`
`+i[n]})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(M)).forEach(n=>{e.scripts===void 0&&(e.scripts=[]),e.scripts.push(i[n])})},fillImport:function(e,i){e.scripts!=null&&Object.keys(i).filter(n=>n.includes(M)).forEach(n=>{i[n]=e.scripts.shift()})},countImport:function(e){return e.scripts!=null?e.scripts.length:0}}},kn={class:"combustionraw"};function xn(e,i,n,s,t,o){const a=w("FormKit");return m(),p("div",kn,[l(a,{name:e.formKey("script_content"),label:"Lines to add",type:"textarea",validation:"required","validation-behavior":"live",value:'echo "hello combustion"',help:"You can find examples of a combustion script here: https://en.opensuse.org/Portal:MicroOS/Combustion#Simple_example"},null,8,["name"])])}var ne=$(wn,[["render",xn]]);const $n={class:"page-section p-2 bg-dark",id:"edit"},Fn={class:"container mt-5 px-0"},Kn=r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[r("h1",{class:"mt-5"},"Ignition Config Generator"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("img",{class:"text-center mx-auto w-50",src:ot})])])],-1),In={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Vn={class:"col-lg-6"},Pn={class:"form-floating mb-3"},Sn={key:0},En={class:"row gx-4 gx-lg-5 justify-content-center"},Cn=r("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[r("h1",{class:"mt-5"},"Add Combustion Scripts"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("img",{class:"text-center mx-auto w-50",src:it})])],-1),An={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},Tn={class:"col-lg-6"},On={class:"form-floating mb-3"},Bn=r("hr",{class:"divider"},null,-1),Nn={class:"page-section p-2",id:"export"},Un={class:"container mt-5 px-0"},qn={class:"row gx-4 gx-lg-5 justify-content-center"},Ln={class:"col-lg-8 col-xl-6"},Rn=r("h1",{class:"mt-5 text-center"},"config.ign",-1),Hn=r("hr",{class:"divider"},null,-1),Mn={class:"d-grid mb-5"},zn={class:"form-data"},Wn={class:"double"},Dn=I(" Copy "),Jn=r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-clipboard",viewBox:"0 0 16 16"},[r("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),r("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})],-1),Gn=[Dn,Jn],Yn={key:0},Zn=r("h1",{class:"mt-5 text-center"},"combustion script",-1),Qn=r("hr",{class:"divider"},null,-1),Xn={class:"d-grid mb-5"},jn={class:"form-data"},eo={class:"mt-5 text-center"},to=I(" Convert to Ignition-"),no={key:0},oo=I("Ready Filesystem IMG in the Browser "),io=r("div",null,[r("h2",{class:"mt-5 text-center"}," Convert to ISO Filesystem with mkisofs "),r("pre",{class:"form-data"},"  # mkisofs -full-iso9660-filenames -o ignition.iso -V ignition config.ign"),r("br"),r("hr",{class:"divider"})],-1),ao=r("h2",{class:"mt-5 text-center"},"Load Settings from",-1),so=r("h2",{class:"mt-5 text-center"},"Save Settings to",-1),ro={setup(e){const i=[W,D,J,G,Y,Z,j,ee,te,ne,X,ce],n=x({debug:!1,save_to:"fuel-ignition.json"}),s=x({});i.forEach(f=>d.setupFormComponentWatcher(f,ve,n));let t=x(0);const o=()=>{t.value+=1},a=f=>f.methods.hasOwnProperty("countImport")?f.methods.countImport(s.value):0;ge(()=>{Object.keys(s.value).length>0&&(i.filter(f=>f.methods.hasOwnProperty("fillImport")).forEach(f=>f.methods.fillImport(s.value,n.value)),s.value={})});const u=f=>{console.log("downloading.."),d.saveTemplateAsFile("config.ign",h(f))},c=f=>{d.copy(JSON.stringify(h(f),null,2))},h=f=>{let _={ignition:{version:"3.2.0"}};return i.filter(v=>v.methods.hasOwnProperty("encodeToIgn")).forEach(v=>v.methods.encodeToIgn(_,f)),f.debug&&(_["debug:form"]=f),_.combustion=void 0,_},y=f=>{let _={combustion:""};return i.filter(v=>v.methods.hasOwnProperty("encodeToIgn")).forEach(v=>v.methods.encodeToIgn(_,f)),_.combustion!==""&&(console.log(_.combustion),_.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/

# Redirect output to the console
exec > >(exec tee -a /dev/tty0) 2>&1
`+_.combustion+`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/combustion`),_.output};async function K(f){let _=f.target.files[0];s.value=await d.parseJsonFile(_).catch(()=>{alert(jsonErrorMsg),clearFile()}),n.value={debug:n.value.debug,save_to:n.value.save_to},o()}const U=f=>{let _={};i.filter(v=>v.methods.hasOwnProperty("encodeToExport")).forEach(v=>v.methods.encodeToExport(_,f)),d.saveTemplateAsFile(f.save_to,_,!1)};return(f,_)=>{const v=w("FormKit");return m(),p("div",{key:R(t)},[r("section",$n,[r("div",Fn,[Kn,r("div",In,[r("div",Vn,[r("div",Pn,[l(v,{type:"group",modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=k=>n.value=k)},{default:b(()=>[l(F,{title:"Add Users",displaysAtBegin:a(W)},{default:b(()=>[l(W)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Create Files",displaysAtBegin:a(D)},{default:b(()=>[l(D)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Add Hostname",displaysAtBegin:a(J),maxComponents:1},{default:b(()=>[l(J)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Add Network Interface",displaysAtBegin:a(G)},{default:b(()=>[l(G)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Enable or Create Services",displaysAtBegin:a(Y)},{default:b(()=>[l(Y)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Modify Existing Services",displaysAtBegin:a(Z)},{default:b(()=>[l(Z)]),_:1},8,["displaysAtBegin"]),n.value.debug?(m(),p("div",Sn,[l(F,{title:"DEBUG: Add Bytes",displaysAtBegin:a(X)},{default:b(()=>[l(X)]),_:1},8,["displaysAtBegin"]),l(F,{title:"DEBUG: Analyze File",displaysAtBegin:1,maxComponents:1},{default:b(()=>[l(ce)]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])])]),r("div",En,[Cn,r("div",An,[r("div",Tn,[r("div",On,[l(v,{type:"group",modelValue:n.value,"onUpdate:modelValue":_[1]||(_[1]=k=>n.value=k)},{default:b(()=>[l(F,{title:"Register Product",displaysAtBegin:a(j)},{default:b(()=>[l(j)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Connect to Salt Master",maxComponents:1,displaysAtBegin:a(ee)},{default:b(()=>[l(ee)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Install Package With Combustion",displaysAtBegin:a(te)},{default:b(()=>[l(te)]),_:1},8,["displaysAtBegin"]),l(F,{title:"Add Custom Lines To Combustion Script",displaysAtBegin:a(ne)},{default:b(()=>[l(ne)]),_:1},8,["displaysAtBegin"])]),_:1},8,["modelValue"])])])])])]),Bn]),r("section",Nn,[r("div",Un,[r("div",qn,[r("div",Ln,[Rn,Hn,r("div",Mn,[r("pre",zn,L(h(n.value)),1),r("div",Wn,[l(v,{modelValue:n.value.debug,"onUpdate:modelValue":_[2]||(_[2]=k=>n.value.debug=k),type:"checkbox",label:"Debug",name:"debug"},null,8,["modelValue"]),r("button",{class:"btn btn-outline-secondary mb-2",onClick:_[3]||(_[3]=k=>c(n.value))},Gn)]),r("button",{class:"btn btn-primary mb-4",onClick:_[4]||(_[4]=k=>u(n.value))}," Download "),y(n.value)!==void 0?(m(),p("div",Yn,[Zn,Qn,r("div",Xn,[r("pre",jn,L(y(n.value)),1),r("button",{class:"btn btn-primary mb-4",onClick:_[5]||(_[5]=k=>R(d).saveTemplateAsFile("script",y(n.value),!0))}," Download ")])])):g("",!0),r("div",null,[r("h2",eo,[to,y(n.value)!==void 0?(m(),p("span",no,"Combustion-")):g("",!0),oo]),l(se,{ignJson:h(n.value),combustionScript:y(n.value)},null,8,["ignJson","combustionScript"])]),io,ao,l(v,{name:"load_from",type:"file",onChange:K}),so,l(v,{modelValue:n.value.save_to,"onUpdate:modelValue":_[6]||(_[6]=k=>n.value.save_to=k),type:"text",name:"save_to"},null,8,["modelValue"]),r("button",{class:"btn btn-primary mt-3",onClick:_[7]||(_[7]=k=>U(n.value))}," Save ")])])])])])])}}};var lo="/fuel-ignition/assets/undraw_convert_re_l0y1.2c99c673.svg";const co={class:"page-section p-2 bg-dark",id:"edit"},uo={class:"container mt-5 px-0"},mo=r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[r("h1",{class:"mt-5"},"Convert JSON to Ignition-Ready IMG"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("img",{class:"text-center mx-auto w-25",src:lo})])])],-1),po={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},_o={class:"col-lg-6 expandable-comp text-white"},fo={class:"form-floating mb-3"},ho=r("p",null,null,-1),vo=r("hr",{class:"divider"},null,-1),go={class:"page-section p-2",id:"export"},yo={class:"container mt-5 px-0"},bo={class:"row gx-4 gx-lg-5 justify-content-center"},wo={class:"col-lg-8 col-xl-6"},ko=r("h1",{class:"mt-5 text-center"},"JSON That Will Be Converted",-1),xo=r("hr",{class:"divider"},null,-1),$o={class:"d-grid mb-5"},Fo={class:"form-data"},Ko={setup(e){const i=x({}),n="The provided json is invalid.";let s=x({});function t(){return s}function o(){let c=document.querySelector(".formkit-remove-files");c!==void 0&&c.click()}async function a(c){let h=c.target.files[0];h!==void 0&&await d.parseJsonFile(h).catch(()=>{alert(n),o()}).then(y=>(s=y,i.value.convert_text=JSON.stringify(s,null,2),y))}const u=function(c){if(i.value.convert_file!==void 0){if(console.log("convert file defined"),!confirm("You already uploaded a file. Discard?")){i.value.convert_text=JSON.stringify(s,null,2);return}o();try{s=JSON.parse(i.value.convert_text)}catch{alert(n)}}};return(c,h)=>{const y=w("FormKit");return m(),p(V,null,[r("section",co,[r("div",uo,[mo,r("div",po,[r("div",_o,[l(y,{type:"group",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=K=>i.value=K)},{default:b(()=>[r("div",fo,[l(y,{name:"convert_file",label:"Either  -  Config.ign / Json File To Convert",type:"file",onChange:a}),ho,l(y,{name:"convert_text",label:"Or  -  JSON as Text",placeholder:'e.g. { "ignition": { "version": "3.2.0" } }',type:"textarea",id:"convert_text","validation-behavior":"live",onKeyup:u})])]),_:1},8,["modelValue"]),l(se,{ignJson:t()},null,8,["ignJson"])])])]),vo]),r("section",go,[r("div",yo,[r("div",bo,[r("div",wo,[ko,xo,r("div",$o,[r("pre",Fo,L(t()),1)])])])])])],64)}}};var de="/fuel-ignition/assets/undraw_freelancer_re_irh4.f098216d.svg";const Io={},Vo={class:"page-section bg-dark",id:"import"},Po={class:"container px-4 px-lg-5"},So={class:"row gx-4 gx-lg-5 justify-content-center"},Eo=r("div",{class:"d-grid"},[r("img",{class:"text-center mx-auto",src:de})],-1),Co={class:"col-lg-8 col-xl-6 text-white text-center"},Ao=r("h2",{class:"mt-2"},"Sorry, this is not implemented yet!",-1),To=r("hr",{class:"divider"},null,-1),Oo=r("p",{class:"mb-5"}," For now, Fuel Ignition can only create new configs. ",-1),Bo=I("Back Home");function No(e,i){const n=w("router-link");return m(),p("section",Vo,[r("div",Po,[r("div",So,[Eo,r("div",Co,[Ao,To,Oo,l(n,{class:"btn btn-primary btn-xl",to:"/"},{default:b(()=>[Bo]),_:1})])])])])}var Uo=$(Io,[["render",No]]);const qo=r("section",{class:"page-section bg-dark",id:"contact"},[r("div",{class:"container px-4 px-lg-5"},[r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("div",{class:"d-grid"},[r("img",{class:"text-center mx-auto",src:de})])])])],-1),Lo=r("section",{class:"page-section p-2",id:"export"},[r("div",{class:"container mt-5 px-0"},[r("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[r("h2",{class:"mt-5 text-center"},"Convert to ISO in the Browser (Alpha)"),r("hr",{class:"divider"}),r("div",{class:"d-grid mb-5"},[r("div",{class:"mx-auto"})])])])],-1),Ro={setup(e){return(i,n)=>(m(),p(V,null,[qo,Lo],64))}},Ho="/fuel-ignition/",Mo=[{path:"/",name:"Home",component:nt},{path:"/edit",name:"Edit",component:ro},{path:"/import",name:"Import",component:Uo},{path:"/convert",name:"Convert",component:Ko},{path:"/test",name:"Test",component:Ro}],zo=ye({history:be(Ho),routes:Mo});window.addEventListener("DOMContentLoaded",e=>{var i=function(){const t=document.body.querySelector("#mainNav");!t||(window.scrollY===0?t.classList.remove("navbar-shrink"):t.classList.add("navbar-shrink"))};i(),document.addEventListener("scroll",i);const n=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(t){t.addEventListener("click",()=>{window.getComputedStyle(n).display!=="none"&&n.click()})})});we(Re).use(ke,xe).use(zo).mount("#app");
