var $e=Object.defineProperty;var Ee=(e,i,n)=>i in e?$e(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var H=(e,i,n)=>(Ee(e,typeof i!="symbol"?i+"":i,n),n);import{r as b,o as m,c as p,a as c,b as l,w as A,d as R,e as Q,t as G,F as T,f as k,g,h as Te,i as xe,u as q,j as Fe,B as j,k as Pe,l as Se,m as D,n as Ke,p as Ie,q as Ve,s as Ce,v as Me,x as Be,y as Ue}from"./vendor.32f32c67.js";const Oe=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=n(t);fetch(t.href,a)}};Oe();var ye,u={PasswordHashes:(ye=class{},H(ye,"hashes",{}),ye),parseJsonFile:async function(e){return new Promise((i,n)=>{const o=new FileReader;o.onload=t=>{try{return i(JSON.parse(t.target.result))}catch(a){return n(a)}},o.onerror=t=>n(t),o.readAsText(e)})},clearFile:function(){const e=document.querySelector(".formkit-remove-files");e!==void 0&&e.click()},saveTemplateAsFile:(e,i,n)=>{const o=new Blob(n?[i]:[JSON.stringify(i,null,2)],{type:"text/json"}),t=document.createElement("a");t.download=e,t.href=window.URL.createObjectURL(o),t.dataset.downloadurl=["text/json",t.download,t.href].join(":");const a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(a),t.remove()},copy:function(e){var i=document.createElement("textarea");i.innerHTML=e,document.body.appendChild(i),i.select();var n=document.execCommand("copy");return document.body.removeChild(i),n},setupFormComponentWatcher:(e,i,n)=>{e!==void 0&&"methods"in e&&"watchFormData"in e.methods&&i(n,async(o,t)=>{e.methods.watchFormData(o,t)})},isNumerical:e=>/^\d+$/.test(e),b64EncodeUnicode:e=>window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(n,o){return String.fromCharCode("0x"+o)})),uid:()=>(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,""),getFormKey:(e,i,n)=>e+"_"+i+"_"+n,getFormValue:function(e,i,n,o){return i[this.getFormKey(e,n,o)]},generateTOTPSecret:function(){const e=new Uint32Array(5),i=[];return self.crypto.getRandomValues(e),e.map(n=>i.push(n.toString(16))),i.join("")},hexToUint8Array:function(e){for(var i=new Uint8Array(Math.ceil(e.length/2)),n=0;n<i.length;n++)i[n]=parseInt(e.substr(n*2,2),16);return i},normalizeZypperPackages:function(e){return e.split(/[ ,]/).filter(i=>i).join(" ")},setFormValue:function(e,i,n,o,t){i[this.getFormKey(e,n,o)]=t}},w=(e,i)=>{for(const[n,o]of i)e[n]=o;return e};const Ne={},ze={class:"navbar navbar-expand-lg navbar-light fixed-top py-3",id:"mainNav"},Le={class:"container px-4 px-lg-5"},Re=R("Fuel Ignition \u{1F680}"),qe=Q('<button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto my-2 my-lg-0"><li class="nav-item"><a class="nav-link" href="#/">Start</a></li><li class="nav-item"><a class="nav-link" href="#about">About</a></li><li class="nav-item"><a class="nav-link" href="https://microos.opensuse.org/" target="_blank" rel="noopener noreferrer">MicroOS</a></li><li class="nav-item"><a class="nav-link" href="https://github.com/openSUSE/combustion" target="_blank" rel="noopener noreferrer">Combustion Docs</a></li></ul></div>',2);function He(e,i){const n=b("router-link");return m(),p("nav",ze,[c("div",Le,[l(n,{class:"navbar-brand",to:"/"},{default:A(()=>[Re]),_:1}),qe])])}var Ge=w(Ne,[["render",He]]);const De={},We={class:"page-section bg-primary",id:"about"},Je=Q('<div class="container px-4 px-lg-5"><div class="row gx-4 gx-lg-5 justify-content-center"><div class="col-lg-8 text-center"><h2 class="text-white mt-0">We&#39;ve got what you need!</h2><hr class="divider divider-light"><p class="text-white-75 mb-4">Looking for an easy way to write and edit Combustion configs? Look no further than Fuel Ignition! Our user-friendly web application makes it a breeze to create the config files you need. No strings attached!</p><a class="btn btn-light btn-xl" href="/fuel-ignition/edit">Get Started!</a></div></div></div>',1),Ye=[Je];function Xe(e,i){return m(),p("section",We,Ye)}var Ze=w(De,[["render",Xe]]);const Qe={class:"bg-light py-5"},je={class:"container px-4 px-lg-5"},et={class:"small text-center text-muted"},tt={setup(e){return(i,n)=>{const o=b("router-view");return m(),p(T,null,[l(Ge),l(o),l(Ze),c("footer",Qe,[c("div",je,[c("div",et," Copyright \xA9 "+G(new Date().getFullYear())+" \u2013 built with \u{1F49A}, Vue, and openSUSE ",1)])])],64)}}},nt={},at={class:"masthead"},it={class:"container px-4 px-lg-5 h-75"},ot={class:"row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center"},rt=c("div",{class:"col-lg-8 align-self-end"},[c("h1",{class:"text-white font-weight-bold"},[R(" Combustion "),c("br"),R("Config Generator ")]),c("hr",{class:"divider"})],-1),st={class:"col-lg-8 align-self-baseline"},lt=c("p",{class:"text-white-75 mb-5"}," Easily generate new or edit existing Combustion config. ",-1),ct={class:"container-fluid"},ut={class:"row"},dt={class:"col-xs-6 mb-3"},mt=R("Create New Config");function pt(e,i){const n=b("router-link");return m(),p("header",at,[c("div",it,[c("div",ot,[rt,c("div",st,[lt,c("div",ct,[c("div",ut,[c("div",dt,[l(n,{class:"btn btn-primary btn-xl",to:"/edit"},{default:A(()=>[mt]),_:1})])])])])])])])}var ft=w(nt,[["render",pt]]),_t="/fuel-ignition/assets/undraw_programming_re_kg9v.a835d9b3.svg";const ht={style:{width:"100% !important"},class:"expandable-comp text-white"},yt={key:0},gt={key:0,class:"mb-5"},vt=c("hr",{class:"divider"},null,-1),bt=[vt],At={class:"mt-1"},$={props:{displaysAtBegin:{type:Number,default:0},maxComponents:{type:Number,default:-1},title:String},setup(e){const i=e,n=k(i.displaysAtBegin);return(o,t)=>(m(),p("div",ht,[i.title!==void 0?(m(),p("h4",yt,G(i.title),1)):g("",!0),(m(!0),p(T,null,Te(n.value,a=>(m(),p("div",{key:a},[xe(o.$slots,"default",{index:a}),a<n.value?(m(),p("div",gt,bt)):g("",!0)]))),128)),c("div",At,[e.maxComponents===-1||e.maxComponents!==-1&&e.maxComponents>n.value?(m(),p("button",{key:0,class:"btn btn-primary mr-5 mb-5",onClick:t[0]||(t[0]=a=>n.value++)}," \xA0\xA0\xA0Add\xA0\xA0\xA0 ")):g("",!0),n.value>=1?(m(),p("button",{key:1,class:"btn btn-danger ml-5 mr-5 mb-5",onClick:t[1]||(t[1]=a=>n.value>=1?n.value--:n.value)}," Remove ")):g("",!0)])]))}},kt={key:0,class:"sk-folding-cube"},wt=c("div",{class:"sk-cube1 sk-cube"},null,-1),$t=c("div",{class:"sk-cube2 sk-cube"},null,-1),Et=c("div",{class:"sk-cube4 sk-cube"},null,-1),Tt=c("div",{class:"sk-cube3 sk-cube"},null,-1),xt=[wt,$t,Et,Tt],Ft={props:["combustionScript"],setup(e){const i=e;var n=k(!1);const o=new ve,t=async function(){a();try{let r=await o.convertToImage(i.combustionScript);o.downloadImageFile(r)}catch(r){alert(r)}a()},a=function(){document.querySelector("#loadingToggle").click()};return(r,s)=>(m(),p(T,null,[c("button",{class:"btn btn-primary mb-4",style:{width:"100%"},onClick:s[0]||(s[0]=_=>t())}," Convert and Download "),q(n)?(m(),p("div",kt,xt)):g("",!0),c("button",{id:"loadingToggle",hidden:"",onClick:s[1]||(s[1]=_=>Fe(n)?n.value=!q(n):n=!q(n))})],64))}};class ve{constructor(){H(this,"images",{combustion:{ignFatDirEntry:61632,combFatDirEntry:63680,ignFileOffset:15796224,combFileOffset:3244032}});H(this,"alphabet",["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whisky","X-ray","Yankee","Zulu","Nico","Ignaz","Robert","Moritz"]);String.prototype.replaceAt=function(i,n){return this.substring(0,i)+n+this.substring(i+n.length)},String.prototype.hexEncode=function(){var i,n,o="";for(n=0;n<this.length;n++)i=this.charCodeAt(n).toString(16),o+=("000"+i).slice(-4);return o}}bufferToHex(i){return[...new Uint8Array(i)].map(n=>n.toString(16).padStart(2,"0")).join("")}strToHex(i){for(var n="",o=0;o<i.length;o++)n+=i.charCodeAt(o).toString(16);return n}async fetchImage(i){return fetch("templates/ignition-"+i+"-template.img").then(n=>n.arrayBuffer())}async convertToImage(i){let n=`{
  "ignition": {
    "version": "3.2.0"
  }
}`,o="combustion";console.log("images["+o+"] :>> ",this.images[o]);let t=await this.fetchImage(o),a=new DataView(t),r=this.images[o].ignFatDirEntry,s=new DataView(t,r+28,4),_=new TextEncoder,f=_.encode(n),y=s.getInt32(0,!0);if(s.setInt32(0,f.length,!0),f.length>=y)throw new Error(`Warning!

Ignition configuration is too large.

The maximum file size for the Ignition configuration is currently set to `+y+"B.");for(let E=0;E<f.length;E++)a.setInt8(this.images[o].ignFileOffset+E,f[E]);console.log("jsonSize(string): "+n.length),console.log("jsonSize(bin): "+f.length),console.log("dirEntry :>> ",r),console.log("images["+o+"] :>> ",this.images[o]);let d=this.images[o].combFatDirEntry;s=new DataView(t,d+28,4);let h=_.encode(i),v=s.getInt32(0,!0);if(s.setInt32(0,h.length,!0),h.length>=v)throw new Error(`Warning!

Combustion configuration is too large.

The maximum file size for the Combustion configuration is currently set to `+v+"B.");for(let E=0;E<h.length;E++)a.setInt8(this.images[o].combFileOffset+E,h[E]);var x=new Uint8Array(t);return new Blob([x],{type:"application/octet-stream"})}downloadImageFile(i){var n=window.document.createElement("a");n.href=window.URL.createObjectURL(i),n.download="combustion-"+this.alphabet[Math.floor(Math.random()*this.alphabet.length)].toLowerCase()+".img",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}const O="user",N=O+"_name_",Pt={props:["index"],setup:()=>{const e=u.uid(),i=k(!1),n=k("root"),o=k(u.generateTOTPSecret());return{uid:e,totpEnabled:i,name:n,secret:o,Utils:u,formKey:t=>u.getFormKey(O,t,e)}},methods:{encodeToInstallation:function(e,i){const n=(o,t)=>u.getFormValue(O,i,o,t);Object.keys(i).filter(o=>o.includes(N)).map(o=>o.replace(N,"")).forEach(o=>{const t=n("ssh_keys",o),a=n("name",o),r=n("passwd",o)===""||n("passwd",o)===void 0;n("runs_on_suse",o)===!0&&(e.combustion+=`
# Setup /home...
DEVICE="/dev/disk/by-label/ROOT"
MOUNT_POINT="/home"
SUBVOL_PATH="/@/home"
# Check if the device exists
if [ ! -e "$DEVICE" ]; then
  echo "Error: Device $DEVICE not found. Cannot proceed with storage setup."
  exit 1
fi
# Mount the subvolume to /home
mkdir -p "$MOUNT_POINT"
if ! mountpoint -q "$MOUNT_POINT"; then
  echo "Mounting $DEVICE ($SUBVOL_PATH) to $MOUNT_POINT..."
  mount -t btrfs -o "subvol=$SUBVOL_PATH" "$DEVICE" "$MOUNT_POINT"
fi
# Ensure persistence in /etc/fstab
if ! grep -q "$MOUNT_POINT" /etc/fstab; then
  echo "Create $MOUNT_POINT in /etc/fstab"
  echo "$DEVICE $MOUNT_POINT btrfs subvol=$SUBVOL_PATH 0 0" >> /etc/fstab
else
  echo "/etc/fstab already contains $MOUNT_POINT."
fi
`);let s;if(e.combustion+=`
# Configuring user: `+a+` ...
`,a!=="root"?(e.combustion+="useradd -m -s /bin/bash "+a+`
`,s="/home/"):s="/",r||(e.combustion+="echo '"+a+":"+u.PasswordHashes.hashes[o]+`' | chpasswd -e
`),t!==void 0&&t!==""){const _=t!==void 0&&t.includes(",")?t.replaceAll(" ","").split(","):[t];e.combustion+=`
# Configure SSH keys for `+a+`
mkdir -p "`+s+a+`/.ssh"
{
`;for(const f of _)e.combustion+='  echo "'+f+`"
`;e.combustion+='} > "'+s+a+`/.ssh/authorized_keys"
# Set correct ownership and permissions
chown -R `+a+":"+a+' "'+s+a+`/.ssh"
chmod 700 "`+s+a+`/.ssh"
chmod 600 "`+s+a+`/.ssh/authorized_keys"

`}if(n("totp_enabled",o)){const _="HOTP/T30/6 "+n("name",o)+" - "+n("totp_secret",o),f=n("name",o);let y;n("name",o)==="root"?y="/root/.pam_oath_usersfile":y="/home/"+n("name",o)+"/.pam_oath_usersfile",e.combustion+=`# Set Time-based one-time password
FILE_PATH="`+y+`"
CONTENT="`+_+`"
mkdir -p "$(dirname "$FILE_PATH")"
echo "$CONTENT" > "$FILE_PATH"
chown `+f+":"+f+` "$FILE_PATH"
chmod 600 "$FILE_PATH"
`}})},watchFormData:async function(e,i){const n=(o,t)=>e[u.getFormKey(O,o,t)];Object.keys(e).filter(o=>o.includes("totp_enabled")).map(o=>o.replace("user_totp_enabled_","")).forEach(async o=>{const t=n("name",o),a=document.getElementById("user_qrcode_"+o),r=n("totp_secret",o);t&&a&&r&&this.renderQRCode(r,t,a)}),Object.keys(e).filter(o=>o.includes("user_passwd")&&!o.includes("hashed")).map(o=>o.replace("user_passwd_","")).forEach(async o=>{const t=n("passwd",o),a=t===""||t===void 0,r=e["user_passwd_"+o]===i["user_passwd_"+o];a||r||St(t).then(s=>u.PasswordHashes.hashes[o]=s)})},encodeToExport:function(e,i){const n=(o,t)=>u.getFormValue(O,i,o,t);Object.keys(i).filter(o=>o.includes(N)).map(o=>o.replace(N,"")).forEach(o=>{e.login===void 0&&(e.login={}),e.login.users===void 0&&(e.login.users=[]);let t={};t.name=n("name",o),t.passwd=n("passwd",o),t.ssh_keys=n("ssh_keys",o),t.runs_on_suse=n("runs_on_suse",o),t.totp_enabled=n("totp_enabled",o),n("totp_enabled",o)&&(t.totp_secret=n("totp_secret",o)),e.login.users.push(t)})},fillImport:function(e,i){const n=(o,t,a)=>u.setFormValue(O,i,o,t,a);e.login==null||e.login.users==null||Object.keys(i).filter(o=>o.includes(N)).map(o=>o.replace(N,"")).forEach(o=>{let t=e.login.users.shift();n("name",o,t.name),t.passwd&&(n("passwd",o,t.passwd),u.PasswordHashes.hashes[o]=j.hashSync(t.passwd,8)),n("ssh_keys",o,t.ssh_keys),n("runs_on_suse",o,t.runs_on_suse),n("totp_enabled",o,t.totp_enabled),n("totp_secret",o,t.totp_secret)})},countImport:function(e){return e.login!=null&&e.login.users!=null?e.login.users.length:0},totpSecretToBase32:function(e){const i=u.hexToUint8Array(e);return Pe(i,"RFC4648",{padding:!1})},readableTOTPSecret:function(e){return(this.totpSecretToBase32(e).match(/.{1,4}/g)||[]).join(" ")},renderQRCode:function(e,i,n){const o=this.totpSecretToBase32(e);Se.toCanvas(n,"otpauth://totp/"+i+"?secret="+o+"&issuer=Fuel%20Ignition",function(t){t&&alert(t)})}}};async function St(e){var i=await j.genSalt(10).then();return j.hash(e,i)}const Kt={class:"users"},It={key:0},Vt=["id"],Ct={key:1};function Mt(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",Kt,[l(r,{class:"form-control",name:e.formKey("name"),label:"Username (required)",placeholder:"write your os username here",validation:"required","validation-behavior":"live",value:"root",help:"A new user will be created, if it does not exist.",modelValue:e.name,"onUpdate:modelValue":i[0]||(i[0]=s=>e.name=s)},null,8,["name","modelValue"]),l(r,{name:e.formKey("passwd"),label:"Password",placeholder:"write the corresponding password here",type:"password",validation:"optional","validation-behavior":"live",help:"Your password is never sent over the internet, everything is local."},null,8,["name"]),l(r,{name:e.formKey("ssh_keys"),label:"SSH Public Keys",placeholder:"write the corresponding ssh keys here, separated by commas, spaces are ignored",type:"textarea",validation:"optional","validation-behavior":"live",help:"Your keys are never sent over the internet, everything is local."},null,8,["name"]),l(r,{name:e.formKey("totp_enabled"),label:"Generate Time-based one-time password (TOTP) Secret",type:"checkbox",validation:"required","validation-behavior":"live ",help:"Enabling Two-Factor Authentication (2FA) via an app based authenticator. This is for use with Cockpit on SUSE related systems. Please note Cockpit disallows root login by default.",modelValue:e.totpEnabled,"onUpdate:modelValue":i[1]||(i[1]=s=>e.totpEnabled=s)},null,8,["name","modelValue"]),e.totpEnabled===!0?(m(),p("div",It,[l(r,{name:e.formKey("totp_secret"),type:"text",label:"Time-based one-time password (TOTP) Secret",help:`Your secret (written to file /${(e.name==="root"?"":"home/")+e.name}/.pam_oath_usersfile) is never sent over the internet. The following QR-Code defines how the app generates the code:`,modelValue:e.secret,"onUpdate:modelValue":i[2]||(i[2]=s=>e.secret=s)},null,8,["name","help","modelValue"]),c("canvas",{id:e.formKey("qrcode")},null,8,Vt),c("p",null,G(a.readableTOTPSecret(e.secret)),1)])):g("",!0),n.index===1?(m(),p("div",Ct,[l(r,{name:e.formKey("runs_on_suse"),label:"Mount /home",validation:"required",type:"checkbox","validation-behavior":"live",help:"Required on SUSE related systems for creating users not named root. Otherwise, applying the Combustion config will fail."},null,8,["name"])])):g("",!0)])}var ee=w(Pt,[["render",Mt]]);const F="add_hostname",Bt={setup:()=>{const e=u.uid();return{formKey:i=>u.getFormKey(F,i,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(F,i,t,a),o=F+"_hostname_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=n("hostname",t),r=a===void 0?"":a;e.combustion+=`
# Hostname
echo "`+r+`" > /etc/hostname
chmod 644 /etc/hostname
`})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(F,i,t,a),o=F+"_hostname_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=n("hostname",t);e.hostname=a===void 0?"":a})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(F,i,t,a,r),o=F+"_hostname_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.hostname!=null&&(n("hostname",t,e.hostname),e.hostname=void 0)})},countImport:function(e){return e.hostname!=null?1:0}}};function Ut(e,i,n,o,t,a){const r=b("FormKit");return m(),D(r,{name:e.formKey("hostname"),label:"Hostname",validation:"required","validation-behavior":"live",help:"Leaving this empty will create an empty file"},null,8,["name"])}var te=w(Bt,[["render",Ut]]);const be=new Map([["Arabic","arabic"],["Belgian","be"],["Croatian","hr"],["Canadian (CSA)","ca-multix"],["Chinese Traditional","tw"],["Chinese Simplified","cn"],["Czech","cz"],["Czech (qwerty)","cz-qwerty"],["Danish","dk"],["Dutch","nl"],["Dvorak","us-dvorak"],["Dvorak (programmer)","us-dvp"],["English (US)","us"],["English (UK)","gb"],["Estonian","ee"],["Finnish","fi-kotoistus"],["French","fr"],["French (Canada)","ca"],["French (Switzerland)","ch-fr"],["German","de-nodeadkeys"],["German (with deadkeys)","de"],["German (Switzerland)","sg-latin1"],["Greek","gr"],["Hungarian","hu"],["Icelandic","is"],["Italian","it"],["Japanese","jp"],["Khmer","khmer"],["Korean","kr"],["Lithuanian","lt"],["Norwegian","no"],["Persian","ir"],["Polish","pl"],["Portuguese","pt"],["Portuguese (Brazil)","br"],["Portuguese (Brazil -- US accents)","us-acentos"],["Romanian","ro"],["Russian","ru"],["Serbian","rs-latin"],["Slovak","sk"],["Slovak (qwerty)","sk-qwerty"],["Slovene","si"],["Spanish","es"],["Spanish (Asturian variant)","es-ast"],["Spanish (Latin America)","latam"],["Swedish","se"],["Tajik","tj_alt-UTF8"],["Turkish","tr"],["Ukrainian","ua-utf"],["US International","us-intl"]]),W=new Map([["Afrikaans",new Map([["lang_code","af_ZA"],["utf8",".UTF-8"],["none_utf8",""]])],["Arabic",new Map([["lang_code","ar_EG"],["utf8",".UTF-8"],["none_utf8",""]])],["Asturian",new Map([["lang_code","ast_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Bengali",new Map([["lang_code","bn_BD"],["utf8",".UTF-8"],["none_utf8",""]])],["Bosnian",new Map([["lang_code","bs_BA"],["utf8",".UTF-8"],["none_utf8",""]])],["Bulgarian",new Map([["lang_code","bg_BG"],["utf8",".UTF-8"],["none_utf8",""]])],["Catalan",new Map([["lang_code","ca_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Chinese Simplified",new Map([["lang_code","zh_CN"],["utf8",".UTF-8"],["none_utf8",""]])],["Chinese Traditional",new Map([["lang_code","zh_TW"],["utf8",".UTF-8"],["none_utf8",""]])],["Croatian",new Map([["lang_code","hr_HR"],["utf8",".UTF-8"],["none_utf8",""]])],["Czech",new Map([["lang_code","cs_CZ"],["utf8",".UTF-8"],["none_utf8",""]])],["Danish",new Map([["lang_code","da_DK"],["utf8",".UTF-8"],["none_utf8",""]])],["Dutch",new Map([["lang_code","nl_NL"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["English (UK)",new Map([["lang_code","en_GB"],["utf8",".UTF-8"],["none_utf8",""]])],["English (US)",new Map([["lang_code","en_US"],["utf8",".UTF-8"],["none_utf8",""]])],["Estonian",new Map([["lang_code","et_EE"],["utf8",".UTF-8"],["none_utf8",""]])],["Finnish",new Map([["lang_code","fi_FI"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["French",new Map([["lang_code","fr_FR"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Galician",new Map([["lang_code","gl_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Georgian",new Map([["lang_code","ka_GE"],["utf8",".UTF-8"],["none_utf8",""]])],["German",new Map([["lang_code","de_DE"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Greek",new Map([["lang_code","el_GR"],["utf8",".UTF-8"],["none_utf8",".ISO-8859-7"]])],["Gujarati",new Map([["lang_code","gu_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Hebrew",new Map([["lang_code","he_IL"],["utf8",".UTF-8"],["none_utf8",""]])],["Hindi",new Map([["lang_code","hi_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Hungarian",new Map([["lang_code","hu_HU"],["utf8",".UTF-8"],["none_utf8",""]])],["Indonesian",new Map([["lang_code","id_ID"],["utf8",".UTF-8"],["none_utf8",""]])],["Italian",new Map([["lang_code","it_IT"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Japanese",new Map([["lang_code","ja_JP"],["utf8",".UTF-8"],["none_utf8",".eucJP"]])],["Khmer",new Map([["lang_code","km_KH"],["utf8",".UTF-8"],["none_utf8",""]])],["Korean",new Map([["lang_code","ko_KR"],["utf8",".UTF-8"],["none_utf8",""]])],["Lithuanian",new Map([["lang_code","lt_LT"],["utf8",".UTF-8"],["none_utf8",""]])],["Macedonian",new Map([["lang_code","mk_MK"],["utf8",".UTF-8"],["none_utf8",""]])],["Marathi",new Map([["lang_code",""],["utf8",".UTF-8"],["none_utf8",""]])],["Norwegian",new Map([["lang_code","nb_NO"],["utf8",".UTF-8"],["none_utf8",""]])],["Nynorsk",new Map([["lang_code","nn_NO"],["utf8",".UTF-8"],["none_utf8",""]])],["Persian",new Map([["lang_code","fa_IR"],["utf8",".UTF-8"],["none_utf8",""]])],["Polish",new Map([["lang_code","pl_PL"],["utf8",".UTF-8"],["none_utf8",""]])],["Portuguese (Br)",new Map([["lang_code","pt_BR"],["utf8",".UTF-8"],["none_utf8",""]])],["Portuguese",new Map([["lang_code","pt_PT"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Punjabi",new Map([["lang_code","pa_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Romanian",new Map([["lang_code","ro_RO"],["utf8",".UTF-8"],["none_utf8",""]])],["Russian",new Map([["lang_code","ru_RU"],["utf8",".UTF-8"],["none_utf8",""]])],["Serbian",new Map([["lang_code","sr_RS"],["utf8",".UTF-8"],["none_utf8",""]])],["Sinhala",new Map([["lang_code","si_LK"],["utf8",".UTF-8"],["none_utf8",""]])],["Slovak",new Map([["lang_code","sk_SK"],["utf8",".UTF-8"],["none_utf8",""]])],["Slovenian",new Map([["lang_code","sl_SI"],["utf8",".UTF-8"],["none_utf8",""]])],["Spanish",new Map([["lang_code","es_ES"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Swedish",new Map([["lang_code","sv_SE"],["utf8",".UTF-8"],["none_utf8",""]])],["Tajik",new Map([["lang_code","tg_TJ"],["utf8",".UTF-8"],["none_utf8",""]])],["Tamil",new Map([["lang_code","ta_IN"],["utf8",".UTF-8"],["none_utf8",""]])],["Thai",new Map([["lang_code","th_TH"],["utf8",".UTF-8"],["none_utf8",""]])],["Turkish",new Map([["lang_code","tr_TR"],["utf8",".UTF-8"],["none_utf8",""]])],["Ukrainian",new Map([["lang_code","uk_UA"],["utf8",".UTF-8"],["none_utf8",""]])],["Vietnamese",new Map([["lang_code","vi_VN"],["utf8",".UTF-8"],["none_utf8",""]])],["Walloon",new Map([["lang_code","wa_BE"],["utf8",".UTF-8"],["none_utf8","@euro"]])],["Welsh",new Map([["lang_code","cy_GB"],["utf8",".UTF-8"],["none_utf8",""]])],["Xhosa",new Map([["lang_code","xh_ZA"],["utf8",".UTF-8"],["none_utf8",""]])],["Zulu",new Map([["lang_code","zu_ZA"],["utf8",".UTF-8"],["none_utf8",""]])]]);var z={availableLanguages:()=>Array.from(W.entries()).map(e=>e[0]),langCode:e=>W.get(e).get("lang_code"),utf8Encoding:e=>W.get(e).get("utf8"),noneUtf8Encoding:e=>W.get(e).get("none_utf8"),availableKeyboards:()=>Array.from(be.entries()).map(e=>e[0]),keyboardCode:e=>be.get(e)};const P="add_language",Ot={setup:()=>{const e=u.uid();return{formKey:i=>u.getFormKey(P,i,e),languages:()=>z.availableLanguages()}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(P,i,t,a),o=P+"_language_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{const a=n("language_utf8",t),r=n("language_name",t);e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let s=z.langCode(r);a===!0?s=s+z.utf8Encoding(r):s=s+z.noneUtf8Encoding(r);let _="LANG="+s;e.combustion+=`
# Language
echo "`+_+`" > /etc/locale.conf
chmod 644 /etc/locale.conf
`})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(P,i,t,a),o=P+"_language_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.language_name=n("language_name",t),e.language_utf8=n("language_utf8",t)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(P,i,t,a,r),o=P+"_language_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.language_name!=null&&(n("language_name",t,e.language_name),e.language_name=void 0),e.language_utf8!=null&&n("language_utf8",t,e.language_utf8)})},countImport:function(e){return e.language_name!=null?1:0}}};function Nt(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{type:"select",name:e.formKey("language_name"),label:"Language",validation:"required","validation-behavior":"live",options:e.languages(),help:"select primary language"},null,8,["name","options"]),l(r,{name:e.formKey("language_utf8"),label:"Use UTF-8 Encoding",type:"checkbox","validation-behavior":"live",value:!0,help:"enable UTF8-Code"},null,8,["name"])],64)}var ne=w(Ot,[["render",Nt]]);const S="add_network",zt={setup:()=>{const e=u.uid(),i=k("DHCP"),n=k("DHCP"),o=k(!1),t=k(!0),a=k(!0),r=k("WPA & WPA2 Personal");return{ipv4enabled:t,ipv4networkType:i,ipv6enabled:a,ipv6networkType:n,wifienabled:o,keymgmt:r,formKey:s=>u.getFormKey(S,s,e)}},methods:{encodeToInstallation:function(e,i){const n=(a,r)=>u.getFormValue(S,i,a,r),o=S+"_interface_";let t=0;Object.keys(i).filter(a=>a.includes(o)).map(a=>a.replace(o,"")).forEach(a=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let r="/etc/NetworkManager/system-connections/",s="";const _=n("wifi_enabled",a),f=n("available_in_initrd",a),y=n("ipv4_enabled",a),d=n("ipv4_auto_dns",a),h=n("ipv6_enabled",a),v=n("ipv6_auto_dns",a),x=n("ipv4_network_type",a)==="DHCP",E=n("ipv6_network_type",a)==="DHCP",L=n("key_mgmt",a),ge=n(_===!0?"wifi_ssid_content":"interface",a);r=r.concat(ge,".nmconnection"),s=s.concat(`
[connection]`,`
`,"id=",ge,`
`,"type=",_===!0?"wifi":"ethernet",`
`,"interface-name=",n("interface",a),`
`),s=s.concat(`
[ipv4]`,`
`,`dns-search=
`),y===!0?(s=s.concat("method=",x===!0?"auto":"manual",`
`),x===!1&&(s=s.concat("address1=",n("ipv4_address",a),"/",n("ipv4_netmask",a)),n("ipv4_gateway",a)!=null&&(s=s.concat(",",n("ipv4_gateway",a))),s=s.concat(`
`)),n("ipv4_dns",a)&&(s=s.concat("dns=",n("ipv4_dns",a),`
`)),d==!1&&(s=s.concat(`ignore_auto_dns=true
`))):s=s.concat("method=disabled",`
`),s=s.concat(`
[ipv6]`,`
`,`dns-search=
`,`addr-gen-mode=eui64
`),h===!0?(s=s.concat("method=",E===!0?"auto":"manual",`
`),E===!1&&(s=s.concat("address1=",n("ipv6_address",a),"/",n("ipv6_netmask",a)),n("ipv6_gateway",a)!=null&&(s=s.concat(",",n("ipv6_gateway",a))),s=s.concat(`
`)),n("ipv6_dns",a)&&(s=s.concat("dns=",n("ipv6_dns",a),`
`)),v==!1&&(s=s.concat(`ignore_auto_dns=true
`))):s=s.concat("method=ignore",`
`),_===!0&&(s=s.concat(`
[wifi]`,`
`,"ssid=",n("wifi_ssid_content",a),`
`),L!=="none"&&(s=s.concat(`
[wifi-security]`,`
`,"key-mgmt=",L==="WPA3 Personal"?"sae":"wpa-psk",`
`,"psk=",n("wifi_password_content",a),`
`))),f?e.combustion_initrd_and_running_system+=`# Network settings
umask 077 # Required for NM config
mkdir -p /etc/NetworkManager/system-connections/
cat >`+r+` <<-EOF
`+s+`EOF

`:e.combustion+=`# Network settings 
mkdir -p /etc/NetworkManager/system-connections/
cat >`+r+` <<-EOF
`+s+`EOF
chmod 600 `+r+`
`,t==0&&(s=`[main]
# Do not do automatic (DHCP/SLAAC) configuration on ethernet devices
# with no other matching connections.
no-auto-default=*
`,e.combustion+=`
# Network settings 
mkdir -p /etc/NetworkManager/conf.d/
cat >/etc/NetworkManager/conf.d/noauto.conf  <<-EOF
`+s+`EOF
chmod 644 /etc/NetworkManager/conf.d/noauto.conf
`),t++})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(S,i,t,a),o=S+"_interface_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.network===void 0&&(e.network={}),e.network.interfaces===void 0&&(e.network.interfaces=[]);let a={};a.name=n("interface",t),n("wifi_enabled",t)&&(a.wifi={},a.wifi.key_mgmt=n("key_mgmt",t),a.wifi.ssid=n("wifi_ssid_content",t),a.wifi.password=n("wifi_password_content",t)),a.available_in_initrd=n("available_in_initrd",t),n("ipv4_enabled",t)&&(a.ipv4={},a.ipv4.network_type=n("ipv4_network_type",t),a.ipv4.auto_dns_enabled=n("ipv4_auto_dns",t),a.ipv4.dns=n("ipv4_dns",t),a.ipv4.network_type==="fixed IPv4 Address"&&(a.ipv4.address=n("ipv4_address",t),a.ipv4.netmask=n("ipv4_netmask",t),a.ipv4.gateway=n("ipv4_gateway",t))),n("ipv6_enabled",t)&&(a.ipv6={},a.ipv6.network_type=n("ipv6_network_type",t),a.ipv6.auto_dns_enabled=n("ipv6_auto_dns",t),a.ipv6.dns=n("ipv6_dns",t),a.ipv6.network_type==="fixed IPv6 Address"&&(a.ipv6.address=n("ipv6_address",t),a.ipv6.netmask=n("ipv6_netmask",t),a.ipv6.gateway=n("ipv6_gateway",t))),e.network.interfaces.push(a)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(S,i,t,a,r),o=S+"_interface_";e.network==null||e.network.interfaces==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.network.interfaces.shift();n("interface",t,a.name),a.wifi!=null?(n("wifi_enabled",t,!0),n("key_mgmt",t,a.wifi.key_mgmt),n("wifi_ssid_content",t,a.wifi.ssid),n("wifi_password_content",t,a.wifi.password)):n("wifi_enabled",t,!1),a.available_in_initrd!=null&&n("available_in_initrd",t,a.available_in_initrd),a.ipv4!=null?(n("ipv4_enabled",t,!0),n("ipv4_network_type",t,a.ipv4.network_type),n("ipv4_auto_dns",t,a.ipv4.auto_dns_enabled),n("ipv4_dns",t,a.ipv4.dns),a.ipv4.network_type==="fixed IPv4 Address"&&(n("ipv4_address",t,a.ipv4.address),n("ipv4_netmask",t,a.ipv4.netmask),n("ipv4_gateway",t,a.ipv4.gateway))):n("ipv4_enabled",t,!1),a.ipv6!=null?(n("ipv6_enabled",t,!0),n("ipv6_network_type",t,a.ipv6.network_type),n("ipv6_auto_dns",t,a.ipv6.auto_dns_enabled),n("ipv6_dns",t,a.ipv6.dns),a.ipv6.network_type==="fixed IPv6 Address"&&(n("ipv6_address",t,a.ipv6.address),n("ipv6_netmask",t,a.ipv6.netmask),n("ipv6_gateway",t,a.ipv6.gateway))):n("ipv6_enabled",t,!1)})},countImport:function(e){return e.network!=null&&e.network.interfaces!=null?e.network.interfaces.length:0}}},Lt={key:0},Rt={class:"container-fluid"},qt={class:"row"},Ht=c("div",{class:"col-1"},null,-1),Gt={class:"col-12"},Dt={key:0},Wt={key:1},Jt={class:"container-fluid"},Yt={class:"row"},Xt=c("div",{class:"col-1"},null,-1),Zt={class:"col-12"},Qt={key:0},jt={key:2},en={class:"container-fluid"},tn={class:"row"},nn=c("div",{class:"col-1"},null,-1),an={class:"col-12"},on={key:0};function rn(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("interface"),label:"Interface Name",type:"text",placeholder:"e.g. eth0, wlan0,... ",validation:"required","validation-visibility":"live",help:" "},null,8,["name"]),l(r,{name:e.formKey("ipv4_enabled"),label:"IPv4 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv4enabled,"onUpdate:modelValue":i[0]||(i[0]=s=>e.ipv4enabled=s)},null,8,["name","modelValue"]),e.ipv4enabled===!0?(m(),p("div",Lt,[c("div",Rt,[c("div",qt,[Ht,c("div",Gt,[l(r,{type:"select",name:e.formKey("ipv4_network_type"),modelValue:e.ipv4networkType,"onUpdate:modelValue":i[1]||(i[1]=s=>e.ipv4networkType=s),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv4 Address"]},null,8,["name","modelValue"]),e.ipv4networkType==="fixed IPv4 Address"?(m(),p("div",Dt,[l(r,{name:e.formKey("ipv4_address"),label:"IP Address",placeholder:"___.___.___.___",type:"text",validation:[["required"],["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"IPv4 address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"]),l(r,{name:e.formKey("ipv4_netmask"),label:"Netmask",type:"number",value:"24",validation:"between:0,32","validation-visibility":"live",help:"Values between 0 and 32"},null,8,["name"]),l(r,{name:e.formKey("ipv4_gateway"),label:"Gateway",placeholder:"___.___.___.___",type:"text",validation:[["matches",/^(([1-9]?\d|[12]\d\d)\.){3}([1-9]?\d|[12]\d\d)$/]],"validation-messages":{matches:"IP number must be in the format xxx.xxx.xxx.xxx"},help:"Gateway address in the format xxx.xxx.xxx.xxx","validation-visibility":"live"},null,8,["name","validation","validation-messages"])])):g("",!0),l(r,{name:e.formKey("ipv4_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evaluated automatically."},null,8,["name"]),l(r,{name:e.formKey("ipv4_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(r,{name:e.formKey("ipv6_enabled"),label:"IPv6 Network enabled",type:"checkbox","validation-behavior":"live",modelValue:e.ipv6enabled,"onUpdate:modelValue":i[2]||(i[2]=s=>e.ipv6enabled=s)},null,8,["name","modelValue"]),e.ipv6enabled===!0?(m(),p("div",Wt,[c("div",Jt,[c("div",Yt,[Xt,c("div",Zt,[l(r,{type:"select",name:e.formKey("ipv6_network_type"),modelValue:e.ipv6networkType,"onUpdate:modelValue":i[3]||(i[3]=s=>e.ipv6networkType=s),label:"Network Address via",help:"Select how the network address of the interface will be set/evaluated.",options:["DHCP","fixed IPv6 Address"]},null,8,["name","modelValue"]),e.ipv6networkType==="fixed IPv6 Address"?(m(),p("div",Qt,[l(r,{name:e.formKey("ipv6_address"),label:"IP Address",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["required"],["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"IPv6 address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"]),l(r,{name:e.formKey("ipv6_netmask"),label:"Netmask",type:"number",value:"64",validation:"between:0,128","validation-visibility":"live",help:"Values between 0 and 128"},null,8,["name"]),l(r,{name:e.formKey("ipv6_gateway"),label:"Gateway",placeholder:"____:____:____:____:____:____:____:____",type:"text",validation:[["matches",/^[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){7}$/]],"validation-messages":{matches:"IP number must be in the format ____:____:____:____:____:____:____:____"},help:"Gateway address in the format ____:____:____:____:____:____:____:____","validation-visibility":"live"},null,8,["name","validation"])])):g("",!0),l(r,{name:e.formKey("ipv6_auto_dns"),label:"Evaluate DNS servers via DHCP",type:"checkbox",value:!0,"validation-behavior":"live",help:"DNS server settings are evaluated automatically."},null,8,["name"]),l(r,{name:e.formKey("ipv6_dns"),label:"DNS servers",type:"text","validation-behavior":"live",help:"Additional DNS servers separated by a semicolon (;)."},null,8,["name"])])])])])):g("",!0),l(r,{name:e.formKey("wifi_enabled"),label:"Enable WiFi",type:"checkbox","validation-behavior":"live",modelValue:e.wifienabled,"onUpdate:modelValue":i[4]||(i[4]=s=>e.wifienabled=s),help:"Whether interface will be connected to WiFi."},null,8,["name","modelValue"]),e.wifienabled===!0?(m(),p("div",jt,[c("div",en,[c("div",tn,[nn,c("div",an,[l(r,{name:e.formKey("wifi_ssid_content"),label:"SSID",type:"text",placeholder:"Service Set IDentifier (SSID)",validation:"required","validation-behavior":"live",help:"Uniquely name of a wireless local area network (WLAN)."},null,8,["name"]),l(r,{type:"select",name:e.formKey("key_mgmt"),modelValue:e.keymgmt,"onUpdate:modelValue":i[5]||(i[5]=s=>e.keymgmt=s),label:"Key Management",help:"Key management used for the connection.",options:["none","WPA & WPA2 Personal","WPA3 Personal"],value:"WPA & WPA2 Personal"},null,8,["name","modelValue"]),e.keymgmt!=="none"?(m(),p("div",on,[l(r,{name:e.formKey("wifi_password_content"),label:"Password",type:"text",help:"Password required for the WiFi connection."},null,8,["name"])])):g("",!0)])])])])):g("",!0),l(r,{name:e.formKey("available_in_initrd"),label:"Also enabled during installation process",type:"checkbox","validation-behavior":"live",help:"Whether interface will also be available during the installation process."},null,8,["name"])],64)}var ae=w(zt,[["render",rn]]);const K="change_storage",sn={setup:()=>{const e=u.uid(),i=k("Grow root partition"),n=k(!0),o=k(!0);return{task:i,root_full_size:n,swap_full_size:o,formKey:t=>u.getFormKey(K,t,e)}},methods:{encodeToInstallation:function(e,i){const n=(s,_)=>u.getFormValue(K,i,s,_),o=K+"_task_";let t=0,a=!0,r=!1;Object.keys(i).filter(s=>s.includes(o)).map(s=>s.replace(o,"")).forEach(s=>{n("task",s)==="Encrypt disk"&&(r=!0)}),Object.keys(i).filter(s=>s.includes(o)).map(s=>s.replace(o,"")).forEach(s=>{e.storage===void 0&&(e.storage={}),e.storage.files===void 0&&(e.storage.files=[]);let _="/etc/repart.d/",f="";const y=n("task",s);if(y==="Grow root partition"){_=_.concat(t+10,"-root.conf"),f=f.concat(`[Partition]
`,`Type=root
`);const d=n("min_root",s),h=n("max_root",s),v=n("root_full_size",s);d&&!v&&(f=f.concat("SizeMinBytes=",d,`M
`)),h&&!v&&(f=f.concat("SizeMaxBytes=",h,`M
`))}if(y==="Create swap partition if missing"){_=_.concat(t+10,"-swap.conf"),f=f.concat(`[Partition]
`,`Type=swap
`);const d=n("min_swap",s),h=n("max_swap",s),v=n("swap_full_size",s);d&&!v&&(f=f.concat("SizeMinBytes=",d,`M
`)),h&&!v&&(f=f.concat("SizeMaxBytes=",h,`M
`))}if(y==="Apply custom storage changes"){_=_.concat(t+10,"-partition.conf"),f=f.concat(`[Partition]
`);const d=n("type",s);d&&(f=f.concat("Type=",d.split(" ")[0],`
`));const h=n("label",s);h&&(f=f.concat("Label=",h,`
`));const v=n("format",s);v&&v!=="none"&&(f=f.concat("Format=",v,`
`));const x=n("min_disk_space",s),E=n("max_disk_space",s);x&&(f=f.concat("SizeMinBytes=",x,`M
`)),E&&(f=f.concat("SizeMaxBytes=",E,`M
`));const L=n("individuals",s);L&&(f=f.concat(L))}if(y==="Encrypt disk"){e.combustion_initrd+=`  # We set disk-encryption-tool-dracut.encryption credential to
  # "force".  This will make disk-encryption-tool-dracut force the
  # encryption, ignoring that Combusion configured the system, and
  # will skip the permission countdown
  #
  # After the encryption the recovery key is registered in the
  # kernel keyring %user:cryptenroll
  mkdir -p /run/credstore
  echo "force" > /run/credstore/disk-encryption-tool-dracut.encrypt
`;const d=n("password",s),h=n("tpm2_enroll",s),v=n("fido2_enroll",s);e.combustion+=`
# Disk Encryption
#
# Create a valid machine-id, as this will be required to create later
# the host secret
systemd-machine-id-setup
# We want to persist the host secret key created via systemd-cred
# (/var/lib/systemd/credential.secret)
mount /var
mkdir -p /etc/credstore.encrypted
credential="$(mktemp disk-encryption-tool.XXXXXXXXXX)"
# Enroll extra password
echo "`+d+`" > "$credential"
systemd-creds encrypt --name=sdbootutil-enroll.pw "$credential" \\
               /etc/credstore.encrypted/sdbootutil-enroll.pw
`,h&&(e.combustion+=`# Enroll TPM2
echo "1" > "$credential"
systemd-creds encrypt --name=sdbootutil-enroll.tpm2 "$credential" \\
             /etc/credstore.encrypted/sdbootutil-enroll.tpm2
`),v&&(e.combustion+=`# Enroll FIDO2. While firstboot the FIDO key has to be inserted/available.
echo "1" > "$credential"
systemd-creds encrypt --name=sdbootutil-enroll.fido2 "$credential" \\
	      /etc/credstore.encrypted/sdbootutil-enroll.fido2
`),e.combustion+=`shred -u "$credential"
# Umount back /var to not confuse tukit later
umount /var
`}else r?(a&&(a=!1,e.combustion_initrd+=`   mkdir -p /etc/repart.d
`),e.combustion_initrd+='   echo -e "'+f+'" >'+_+`
`):(e.combustion+=`
# Repartition
`,a&&(a=!1,e.combustion+=`mkdir -p /etc/repart.d
`),e.combustion+='echo -e "'+f+'" >'+_+`
chmod 600 `+_+`
`);t++})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(K,i,t,a),o=K+"_task_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.storage===void 0&&(e.storage={}),e.storage.tasks===void 0&&(e.storage.tasks=[]);const a={};if(a.kind=n("task",t),a.kind==="Encrypt disk"&&(a.password=n("password",t),a.tpm2_enroll=n("tpm2_enroll",t),a.fido2_enroll=n("fido2_enroll",t)),a.kind==="Grow root partition"){const r=n("min_root",t),s=n("max_root",t),_=n("root_full_size",t);a.auto=_,r&&!_&&(a.min=r),s&&!_&&(a.max=s)}if(a.kind==="Create swap partition if missing"){const r=n("min_swap",t),s=n("max_swap",t),_=n("swap_full_size",t);a.auto=_,r&&!_&&(a.min=r),s&&!_&&(a.max=s)}if(a.kind==="Apply custom storage changes"){const r=n("type",t);r&&(a.type=r);const s=n("label",t);s&&(a.label=s);const _=n("format",t);_&&(a.format=_);const f=n("min_disk_space",t),y=n("max_disk_space",t);f&&(a.min=f),y&&(a.max=y);const d=n("individuals",t);d&&(a.individuals=d)}e.storage.tasks.push(a)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(K,i,t,a,r),o=K+"_task_";e.storage==null||e.storage.tasks==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.storage.tasks.shift();a.kind!=null&&n("task",t,a.kind),a.kind==="Grow root partition"&&(a.auto&&n("root_full_size",t,!0),a.auto||(a.min&&n("min_root",t,a.min),a.min&&n("max_root",t,a.max))),a.kind==="Encrypt disk"&&(a.password&&n("password",t,a.password),a.tpm2_enroll&&n("tpm2_enroll",t,!0),a.fido2_enroll&&n("fido2_enroll",t,!0)),a.kind==="Create swap partition if missing"&&(a.auto&&n("swap_full_size",t,!0),a.auto||(a.min&&n("min_swap",t,a.min),a.min&&n("max_swap",t,a.max))),a.kind==="Apply custom storage changes"&&(a.type&&n("type",t,a.type),a.label&&n("label",t,a.label),a.format&&n("format",t,a.format),a.min&&n("min_disk_space",t,a.min),a.min&&n("max_disk_space",t,a.max),a.individuals&&n("individuals",t,a.individuals))})},countImport:function(e){return e.storage!=null&&e.storage.tasks!=null?e.storage.tasks.length:0}}},ln={key:0},cn={key:1},un={key:0},dn={class:"row"},mn=c("div",{class:"col-1"},null,-1),pn={class:"col-12"},fn={key:2},_n={key:0},hn={class:"row"},yn=c("div",{class:"col-1"},null,-1),gn={class:"col-12"},vn={key:3};function bn(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("task"),label:"Task",type:"select",modelValue:e.task,"onUpdate:modelValue":i[0]||(i[0]=s=>e.task=s),options:["Grow root partition","Create swap partition if missing","Encrypt disk","Apply custom storage changes"],validation:"required","validation-visibility":"live",help:"Increasing/Adding partitions/swaps needs free space on the medium. Otherwise it will run into an error while installaiton."},null,8,["name","modelValue"]),e.task==="Encrypt disk"?(m(),p("div",ln,[l(r,{name:e.formKey("password"),type:"text",label:"Password",placeholder:"Encryption password",validation:"required","validation-visibility":"live",help:" "},null,8,["name"]),l(r,{name:e.formKey("tpm2_enroll"),label:"Add TPM2 (Trusted Platform Module) support",type:"checkbox",help:"Using secure chip with integrated cryptographic keys. An automatic way to decrypt the storage."},null,8,["name"]),l(r,{name:e.formKey("fido2_enroll"),label:"Add FIDO2 (Fast Identity Online) support",type:"checkbox",help:"Using e.g. external USB FIDO2 security key. An automatic way to decrypt the storage. The key has to be inserted/available during the first boot."},null,8,["name"])])):g("",!0),e.task==="Grow root partition"?(m(),p("div",cn,[l(r,{name:e.formKey("root_full_size"),label:"to the full disk size",type:"checkbox",modelValue:e.root_full_size,"onUpdate:modelValue":i[1]||(i[1]=s=>e.root_full_size=s),help:" "},null,8,["name","modelValue"]),e.root_full_size===!1?(m(),p("div",un,[c("div",dn,[mn,c("div",pn,[l(r,{type:"number",name:e.formKey("min_root"),"validation-behavior":"live",label:"Minimum required disk space (MByte)",help:" "},null,8,["name"]),l(r,{type:"number",name:e.formKey("max_root"),"validation-behavior":"live",label:"Maximum required disk space (MByte)",help:" "},null,8,["name"])])])])):g("",!0)])):g("",!0),e.task==="Create swap partition if missing"?(m(),p("div",fn,[l(r,{name:e.formKey("swap_full_size"),label:"take all available disk space",type:"checkbox",modelValue:e.swap_full_size,"onUpdate:modelValue":i[2]||(i[2]=s=>e.swap_full_size=s),help:" "},null,8,["name","modelValue"]),e.swap_full_size===!1?(m(),p("div",_n,[c("div",hn,[yn,c("div",gn,[l(r,{type:"number",name:e.formKey("min_swap"),"validation-behavior":"live",label:"Minimum required disk space (MByte)",help:" "},null,8,["name"]),l(r,{type:"number",name:e.formKey("max_swap"),"validation-behavior":"live",label:"Maximum required disk space (MByte)",help:" "},null,8,["name"])])])])):g("",!0)])):g("",!0),e.task==="Apply custom storage changes"?(m(),p("div",vn,[l(r,{name:e.formKey("type"),label:"Type",type:"select",options:["esp - EFI System Partition","xbootldr - Extended Boot Loader Partition","swap - Swap partition","home - Home (/home/) partition","srv - Server data (/srv/) partition","var - Variable data (/var/) partition","tmp - Temporary data (/var/tmp/) partition","linux-generic - Generic Linux file system partition","root - Root file system partition type appropriate for the local architecture ","root-verity - Verity data for the root file system partition for the local architecture","root-verity-sig - Verity signature data for the root file system partition for the local architecture","root-secondary - Root file system partition of the secondary architecture of the local architecture","root-secondary-verity - Verity data for the root file system partition of the secondary architecture","root-secondary-verity-sig - Verity signature data for the root file system partition of the secondary architecture","root-x86-64 - Root file system partition of the given architecture ","root-ppc - Root file system partition of the given architecture ","root-s390- Root file system partition of the given architecture ","root-s390x - Root file system partition of the given architecture ","root-ia64 - Root file system partition of the given architecture ","root-x86-64-verity - Verity data for the root file system partition of the given architecture","root-ppc-verity - Verity data for the root file system partition of the given architecture","root-s390-verity - Verity data for the root file system partition of the given architecture","root-s390x-verity - Verity data for the root file system partition of the given architecture","root-ia64-verity - Verity data for the root file system partition of the given architecture","root-x86-64-verity-sig - Verity signature data for the root file system partition of the given architecture","root-ppc-verity-sig - Verity signature data for the root file system partition of the given architecture","root-s390-verity-sig - Verity signature data for the root file system partition of the given architecture","root-s390x-verity-sig - Verity signature data for the root file system partition of the given architecture","root-ia64-verity-sig - Verity signature data for the root file system partition of the given architecture","usr - /usr/ file system partition type appropriate for the local architecture","usr-verity - Verity data for the /usr/ file system partition for the local architecture","usr-verity-sig - Verity signature data for the /usr/ file system partition for the local architecture","usr-secondary - /usr/ file system partition of the secondary architecture of the local architecture","usr-secondary-verity - Verity data for the /usr/ file system partition of the secondary architecture","usr-secondary-verity-sid - Verity signature data for the /usr/ file system partition of the secondary architecture","usr-x86-64 - /usr/ file system partition of the given architecture","usr-ppc - /usr/ file system partition of the given architecture","usr-s390 - /usr/ file system partition of the given architecture","usr-s390x - /usr/ file system partition of the given architecture","usr-ia64 - /usr/ file system partition of the given architecture","usr-x86-64-verity - Verity data for the /usr/ file system partition of the given architecture","usr-ppc-verity - Verity data for the /usr/ file system partition of the given architecture","usr-s390-verity - Verity data for the /usr/ file system partition of the given architecture","usr-s390x-verity - Verity data for the /usr/ file system partition of the given architecture","usr-ia64-verity - Verity data for the /usr/ file system partition of the given architecture","usr-x86-64-verity-sig - Verity signature data for the /usr/ file system partition of the given architecture","usr-ppc-verity-sig - Verity signature data for the /usr/ file system partition of the given architecture","usr-s390-verity-sig - Verity signature data for the /usr/ file system partition of the given architecture","usr-s390x-verity-sig - Verity signature data for the /usr/ file system partition of the given architecture","usr-ia64-verity-sig - Verity signature data for the /usr/ file system partition of the given architecture"],validation:"required","validation-visibility":"live",help:"GPT partition type identifiers"},null,8,["name","options"]),l(r,{name:e.formKey("label"),label:"Label",type:"text",help:"The textual label to assign to the partition if none is assigned yet."},null,8,["name"]),l(r,{name:e.formKey("format"),label:"Format",type:"select",options:["none","ext4","btrfs","xfs","vfat","erofs","squashfs","swap"],validation:"required","validation-visibility":"live",help:"If specified and the partition is newly created it is formatted with the specified file system (or as swap device)."},null,8,["name"]),l(r,{type:"number",name:e.formKey("min_disk_space"),label:"Minimum required disk space (MByte)",help:" "},null,8,["name"]),l(r,{type:"number",name:e.formKey("max_disk_space"),label:"Maximum required disk space (MByte)",help:" "},null,8,["name"]),l(r,{name:e.formKey("individuals"),label:"Individual settings",placeholder:`e.g.
Priority=5
Weight=100`,type:"textarea","validation-behavior":"live",help:"defined in https://www.freedesktop.org/software/systemd/man/latest/repart.d.html"},null,8,["name"])])):g("",!0)],64)}var ie=w(sn,[["render",bn]]);const I="start_service",An={setup:()=>{const e=u.uid();return{sourceType:k("data"),formKey:n=>u.getFormKey(I,n,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(I,i,t,a),o=I+"_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=n("name",t),r=n("enabled",t),s=n("contents",t);e.combustion+=`
# start Service `+a+`
`,s&&(e.combustion+='echo "'+s+'" > /etc/systemd/system/'+a+`
`),r==="yes"&&(e.combustion+="systemctl enable "+a+`
`),r==="no"&&(e.combustion+="systemctl disable "+a+`
`)})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(I,i,t,a),o=I+"_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.units===void 0&&(e.systemd.units=[]);let a={};a.name=n("name",t),a.enabled=n("enabled",t),n("contents",t)&&(a.contents=n("contents",t)),e.systemd.units.push(a)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(I,i,t,a,r),o=I+"_name_";e.systemd==null||e.systemd.units==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.systemd.units.shift();n("name",t,a.name),n("enabled",t,a.enabled),n("contents",t,a.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.units!=null?e.systemd.units.length:0}}},kn={class:"startservices"};function wn(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",kn,[l(r,{name:e.formKey("name"),label:"Service Name (required)",validation:"required","validation-behavior":"live",value:"example.service",help:"Every unit must have a unique name. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:e.formKey("enabled"),label:"enabled",value:"yes",validation:"optional",type:"select","validation-behavior":"live",help:"Whether or not the service shall be enabled. When true, the service is enabled. When false, the service is disabled. When omitted, the service is unmodified.",options:["yes","no","omit"]},null,8,["name"]),l(r,{name:e.formKey("contents"),label:"Service Unit Content (optional)",placeholder:"write the service unit content here, spaces, newlines etc. are preserved",type:"textarea",validation:"optional","validation-behavior":"live",help:"The contents of the unit."},null,8,["name"])])}var oe=w(An,[["render",wn]]);const V="modify_service",$n={setup:()=>{const e=u.uid();return{formKey:i=>u.getFormKey(V,i,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(V,i,t,a),o=V+"_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=n("name",t),r=n("dropin_name",t),s=n("contents",t);e.combustion+=`
# modify Service `+a+`
mkdir -p /etc/systemd/system/`+a+`.d/
echo "`+s+'" > /etc/systemd/system/'+a+".d/"+r+`
`})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(V,i,t,a),o=V+"_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.systemd===void 0&&(e.systemd={}),e.systemd.dropins===void 0&&(e.systemd.dropins=[]);let a={};a.name=n("name",t),a.dropin_name=n("dropin_name",t),a.contents=n("contents",t),e.systemd.dropins.push(a)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(V,i,t,a,r),o=V+"_name_";e.systemd==null||e.systemd.dropins==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.systemd.dropins.shift();n("name",t,a.name),n("dropin_name",t,a.dropin_name),n("contents",t,a.contents)})},countImport:function(e){return e.systemd!=null&&e.systemd.dropins!=null?e.systemd.dropins.length:0}}},En={class:"modifyservice"};function Tn(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",En,[l(r,{name:e.formKey("name"),label:"Name of the service that you want to modify (required)",validation:"required","validation-behavior":"live",value:"example.service",placeholder:"e.g. systemd-journald.service",help:"The name of the unit. This must be suffixed with a valid unit type (e.g. \u201Cthing.service\u201D)."},null,8,["name"]),l(r,{name:e.formKey("dropin_name"),label:"Name of the drop-in file",validation:"required","validation-behavior":"live",value:"debug.conf",help:"The name of the drop-in. This must be suffixed with \u201C.conf\u201D."},null,8,["name"]),l(r,{name:e.formKey("contents"),label:"Drop-In Unit Content (required)",placeholder:"e.g. [Service].. | spaces, newlines etc. are preserved",type:"textarea",validation:"required","validation-behavior":"live",help:"Write the service unit content here, spaces, newlines etc. are preserved."},null,8,["name"])])}var re=w($n,[["render",Tn]]);const se="debug_bytes",xn={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(se,i,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(se,i,t,a),o=se+"_size_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{var a=new Array(parseInt(n("size",t)-128)+1).join("B");e.debugBytes=e.debugBytes!==void 0?e.debugBytes:[],e.debugBytes.push(a)})}}},Fn={class:"users"};function Pn(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",Fn,[l(r,{name:e.formKey("size"),label:"Bytes To Add",type:"number",validation:"required","validation-behavior":"live",value:"2048",help:"This is a debug form."},null,8,["name"])])}var le=w(xn,[["render",Pn]]);const Ae="debug_analyze",Sn={setup:()=>{const e=u.uid();let i=new ve;return console.log(i),{uid:e,formKey:n=>u.getFormKey(Ae,n,e)}},methods:{encodeToInstallation:function(e,i){const n=Ae+"_file_";Object.keys(i).filter(o=>o.includes(n)).map(o=>o.replace(n,"")).forEach(o=>{console.log("--- debug analyze file ---");let t;try{console.log('formData["debug_analyze_file_" + id] :>> ',i["debug_analyze_file_"+o]),t=Object.assign({},i["debug_analyze_file_"+o][0])}catch{}console.log(t),console.log("-----")})}}},Kn={class:"analyze"};function In(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",Kn,[l(r,{name:e.formKey("file"),label:"File To Analyze (Console Log)",type:"file",validation:"required","validation-behavior":"live",help:"This is a debug form."},null,8,["name"])])}var ke=w(Sn,[["render",In]]);const J="comb_keyboard",Vn={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(J,i,e),keyboards:()=>z.availableKeyboards()}},methods:{encodeToInstallation:function(e,i){Object.keys(i).filter(n=>n.includes(J)).forEach(n=>{e.combustion+=`
# Keyboard
systemd-firstboot --force --keymap=`+z.keyboardCode(i[n])+`
`})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(J)).forEach(n=>{e.keyboard=i[n]})},fillImport:function(e,i){e.keyboard!=null&&Object.keys(i).filter(n=>n.includes(J)).forEach(n=>{i[n]=e.keyboard})},countImport:function(e){return e.keyboard!=null?1:0}}};function Cn(e,i,n,o,t,a){const r=b("FormKit");return m(),D(r,{type:"select",name:e.formKey("keyboard"),label:"Keyboard",validation:"required","validation-behavior":"live",options:e.keyboards(),help:"select keyboard"},null,8,["name","options"])}var ce=w(Vn,[["render",Cn]]);const Mn=new Array("UTC","Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Timbuktu","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/ComodRivadavia","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Atka","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Ciudad_Juarez","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Ensenada","America/Fort_Nelson","America/Fort_Wayne","America/Fortaleza","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Knox_IN","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Louisville","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Nuuk","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Acre","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Rosario","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Virgin","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Ashkhabad","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beijing","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Chita","Asia/Choibalsan","Asia/Chongqing","Asia/Chungking","Asia/Colombo","Asia/Dacca","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Harbin","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Istanbul","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Katmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macao","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Tel_Aviv","Asia/Thimbu","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ujung_Pandang","Asia/Ulaanbaatar","Asia/Ulan_Bator","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Faroe","Atlantic/Jan_Mayen","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/ACT","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Canberra","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/LHI","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/NSW","Australia/North","Australia/Perth","Australia/Queensland","Australia/South","Australia/Sydney","Australia/Tasmania","Australia/Victoria","Australia/West","Australia/Yancowinna","Brazil/Acre","Brazil/DeNoronha","Brazil/East","Brazil/West","Canada/Atlantic","Canada/Central","Canada/Eastern","Canada/Mountain","Canada/Newfoundland","Canada/Pacific","Canada/Saskatchewan","Canada/Yukon","Chile/Continental","Chile/EasterIsland","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belfast","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Kyiv","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Nicosia","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Tiraspol","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Mexico/BajaNorte","Mexico/BajaSur","Mexico/General","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kanton","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Samoa","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis","Pacific/Yap");var Bn={availableTimezones:()=>Mn};const Y="comb_timezone",Un={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(Y,i,e),timezones:()=>Bn.availableTimezones()}},methods:{encodeToInstallation:function(e,i){Object.keys(i).filter(n=>n.includes(Y)).forEach(n=>{e.combustion+=`
# Timezone
systemd-firstboot --force --timezone=`+i[n]+`
`})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(Y)).forEach(n=>{e.timezone=i[n]})},fillImport:function(e,i){e.timezone!=null&&Object.keys(i).filter(n=>n.includes(Y)).forEach(n=>{i[n]=e.timezone})},countImport:function(e){return e.timezone!=null?1:0}}};function On(e,i,n,o,t,a){const r=b("FormKit");return m(),D(r,{type:"select",name:e.formKey("timezone"),label:"Timezone",validation:"required","validation-behavior":"live",options:e.timezones(),help:"select timezone"},null,8,["name","options"])}var ue=w(Un,[["render",On]]);const C="comb_registration",Nn={setup:()=>{const e=u.uid(),i=k(!1),n=k(!0);return{uid:e,usb_regcode:i,base_product:n,formKey:o=>u.getFormKey(C,o,e)}},methods:{encodeToInstallation:function(e,i){const n=(a,r)=>u.getFormValue(C,i,a,r);let o=0;const t=C+"_registrationserver_";Object.keys(i).filter(a=>a.includes(t)).map(a=>a.replace(t,"")).forEach(a=>{o===0&&(e.combustion+=`
# Registration
if which SUSEConnect > /dev/null 2>&1; then
`),o++,n("base_product",a)===!1?e.combustion+='  product="'+n("product",a)+`"
`:e.combustion+='  product=`xmllint --xpath "/product/name/text()" /etc/products.d/baseproduct`\n',e.combustion+="  architecture=`arch`\n",e.combustion+='  version=`xmllint --xpath "/product/version/text()" /etc/products.d/baseproduct`\n',n("usb_regcode",a)===!0?e.combustion+=`  for I in \`fdisk -l | grep '^/dev' | awk '{print $1}'\`
  do
    if ! findmnt $I > /dev/null; then
      if mount $I /mnt; then
        if  [ -f /mnt/regcodes.xml ]; then
          regcode=\`cat /mnt/regcodes.xml|sed '2 s/xmlns=".*"//g'|xmllint --xpath "//addon[name='$product']/reg_code/text()" -\`
          umount /mnt
          break
        fi
        if  [ -f /mnt/regcodes.txt ]; then
          regcode=$(grep -P "$product |$product\\t" /mnt/regcodes.txt|awk '{print $2}')
          umount /mnt
          break
        fi
        umount /mnt
      fi
    fi
  done
`:e.combustion+='  regcode="'+n("regcode",a)+`"
`,e.combustion+="  echo Registering $product/$version/$architecture with "+n("registrationserver",a)+`
`,e.combustion+="  SUSEConnect --product $product/$version/$architecture ",n("email",a)&&(e.combustion+="--email "+n("email",a)+" "),e.combustion+="--url "+n("registrationserver",a)+` --regcode $regcode
`}),o>0&&(e.combustion+=`fi
`)},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(C,i,t,a),o=C+"_registrationserver_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.registration===void 0&&(e.registration={}),e.registration.registrations===void 0&&(e.registration.registrations=[]);let a={};a.registrationserver=n("registrationserver",t),a.regcode=n("regcode",t),a.product=n("product",t),a.email=n("email",t),a.usb_regcode=n("usb_regcode",t),a.base_product=n("base_product",t),e.registration.registrations.push(a)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(C,i,t,a,r),o=C+"_registrationserver_";e.registration==null||e.registration.registrations==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.registration.registrations.shift();n("registrationserver",t,a.registrationserver),n("usb_regcode",t,a.usb_regcode),n("base_product",t,a.base_product),n("regcode",t,a.regcode),n("product",t,a.product),n("email",t,a.email)})},countImport:function(e){return e.registration!=null&&e.registration.registrations!=null?e.registration.registrations.length:0}}},zn={key:0},Ln={key:1},Rn=c("a",{href:"https://github.com/openSUSE/fuel-ignition/wiki/How-to-store-Registration-Codes-on-an-USB-Stick-which-will-be-used-for-combustion-registration-workflow",target:"_blank"},"How to store registation keys on an USB stick.",-1),qn=[Rn],Hn={key:2};function Gn(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("registrationserver"),label:"Registration server",type:"text",value:"https://scc.suse.com",help:"URL of the registration server"},null,8,["name"]),l(r,{name:e.formKey("base_product"),label:"Registering Base Product",type:"checkbox","validation-behavior":"live",modelValue:e.base_product,"onUpdate:modelValue":i[0]||(i[0]=s=>e.base_product=s)},null,8,["name","modelValue"]),e.base_product===!1?(m(),p("div",zn,[l(r,{name:e.formKey("product"),label:"Product name",type:"text",value:"",help:"Product or extension name"},null,8,["name"])])):g("",!0),l(r,{name:e.formKey("usb_regcode"),label:"Reading registration code from mounted USB medium",type:"checkbox","validation-behavior":"live",modelValue:e.usb_regcode,"onUpdate:modelValue":i[1]||(i[1]=s=>e.usb_regcode=s)},null,8,["name","modelValue"]),e.usb_regcode===!0?(m(),p("div",Ln,qn)):g("",!0),e.usb_regcode===!1?(m(),p("div",Hn,[l(r,{name:e.formKey("regcode"),label:"Registration code",type:"text",value:"",help:"Subscription registration code for the product to be registered."},null,8,["name"])])):g("",!0),l(r,{name:e.formKey("email"),label:"Email",type:"email",validation:"email","validation-visibility":"live",help:"Email address for which the registration will be done (optional)."},null,8,["name"])],64)}var de=w(Nn,[["render",Gn]]);const M="comb_salt",Dn={setup:()=>{const e=u.uid();return{preseedKeyVia:k("defining keys manually"),uid:e,formKey:n=>u.getFormKey(M,n,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(M,i,t,a),o=M+"_master_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.combustion+=`
# Salt Minion
if ! which salt-minion > /dev/null 2>&1; then
    zypper --non-interactive install salt-minion
fi
`,n("master",t)&&(e.combustion+='echo "master: '+n("master",t)+`" \\
 >/etc/salt/minion.d/fuel-ignition.conf
`),n("preseed_key_via",t)=="defining keys manually"&&(n("minion_pem_key",t)&&(e.combustion+='echo "'+n("minion_pem_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pem
`),n("minion_pub_key",t)&&(e.combustion+='echo "'+n("minion_pub_key",t)+`" \\
 >/etc/salt/pki/minion/minion.pub
`)),n("preseed_key_via",t)=="downloading keys from a ftp/http server"&&(e.combustion+=`if ! which curl > /dev/null 2>&1; then
    zypper --non-interactive install curl
fi
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pub "+n("key_url",t)+"/"+n("key_name",t)+`.pub
`,e.combustion+="curl ",n("url_login_name",t)&&n("url_login_password",t)&&(e.combustion+=" --user="+n("url_login_name",t)+":"+n("url_login_password",t)+" "),e.combustion+="-o /etc/salt/pki/minion/minion.pem "+n("key_url",t)+"/"+n("key_name",t)+`.pem
`),n("enableservice",t)&&(e.combustion+=`systemctl enable salt-minion.service
`)})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(M,i,t,a),o=M+"_master_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{e.salt===void 0&&(e.salt={}),e.salt.master=n("master",t),e.salt.preseed_key_via=n("preseed_key_via",t),e.salt.minion_pem_key=n("minion_pem_key",t),e.salt.minion_pub_key=n("minion_pub_key",t),e.salt.url_login_name=n("url_login_name",t),e.salt.url_login_password=n("url_login_password",t),e.salt.key_url=n("key_url",t),e.salt.key_name=n("key_name",t),e.salt.enableservice=n("enableservice",t)})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(M,i,t,a,r),o=M+"_master_";e.salt!=null&&Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{n("master",t,e.salt.master),n("preseed_key_via",t,e.salt.preseed_key_via),n("minion_pem_key",t,e.salt.minion_pem_key),n("minion_pub_key",t,e.salt.minion_pub_key),n("url_login_name",t,e.salt.url_login_name),n("url_login_password",t,e.salt.url_login_password),n("key_url",t,e.salt.key_url),n("key_name",t,e.salt.key_name),n("enableservice",t,e.salt.enableservice)})},countImport:function(e){return e.salt!=null?1:0}}},Wn={key:0},Jn={key:1};function Yn(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("master"),label:"Salt master",type:"text",validation:"required",help:"Host name or IP address of the configuration management server."},null,8,["name"]),l(r,{type:"select",name:e.formKey("preseed_key_via"),modelValue:e.preseedKeyVia,"onUpdate:modelValue":i[0]||(i[0]=s=>e.preseedKeyVia=s),label:"Preseed salt minion with accepted key",help:"Select how the keys are given.",options:["defining keys manually","downloading keys from a ftp/http server"]},null,8,["name","modelValue"]),e.preseedKeyVia==="defining keys manually"?(m(),p("div",Wn,[l(r,{name:e.formKey("minion_pem_key"),label:"Minion pem key",placeholder:`-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----`,type:"textarea","validation-behavior":"live",help:"Private key for communitcation with the master."},null,8,["name"]),l(r,{name:e.formKey("minion_pub_key"),label:"Minion pub key",placeholder:`-----BEGIN PUBLIC KEY-----
...
-----END PUBLIC KEY-----`,type:"textarea","validation-behavior":"live",help:"Public key for communitcation with the master."},null,8,["name"])])):g("",!0),e.preseedKeyVia==="downloading keys from a ftp/http server"?(m(),p("div",Jn,[l(r,{name:e.formKey("key_name"),label:"Minion ID",type:"text",validation:"required","validation-behavior":"live",help:"Minion-ID which is the name of the key too. (<Minion ID>.pem, <Minion ID>.pub)"},null,8,["name"]),l(r,{name:e.formKey("key_url"),label:"Key download URL",type:"text",placeholder:"http://<download_server>/<directory>",validation:"required","validation-behavior":"live",help:"Path to a HTTP/FTP (and other curl formats) server which contains the files <Minion ID>.pem and <Minion ID>.pub"},null,8,["name"]),l(r,{name:e.formKey("url_login_name"),label:"Login name of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"]),l(r,{name:e.formKey("url_login_password"),label:"Login password of the download server",type:"text","validation-behavior":"live",help:"optional"},null,8,["name"])])):g("",!0),l(r,{name:e.formKey("enableservice"),label:"Enable Salt Minion Service",type:"checkbox",value:!0,"validation-behavior":"live",help:"Whether the service will be enabled."},null,8,["name"])],64)}var me=w(Dn,[["render",Yn]]);const B="s390_channel",Xn={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(B,i,e)}},methods:{encodeToInstallation:function(e,i){const n=(t,a)=>u.getFormValue(B,i,t,a),o=B+"_read_channel_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{n("read_channel",t)!=null&&n("write_channel",t)!=null&&n("data_channel",t)&&(e.combustion_initrd_and_running_system+=`# S390 Channels Setup
chzdev qeth `+n("read_channel",t)+","+n("write_channel",t)+","+n("data_channel",t)+` -e
`)})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(B,i,t,a),o=B+"_read_channel_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{if(n("read_channel",t)!=null&&n("write_channel",t)!=null&&n("data_channel",t)){e.s390===void 0&&(e.s390={}),e.s390.channels===void 0&&(e.s390.channels=[]);let a={};a.read=n("read_channel",t),a.write=n("write_channel",t),a.data=n("data_channel",t),e.s390.channels.push(a)}})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(B,i,t,a,r),o=B+"_read_channel_";e.s390==null||e.s390.channels==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.s390.channels.shift();console.log("test"),n("read_channel",t,a.read),n("write_channel",t,a.write),n("data_channel",t,a.data)})},countImport:function(e){return e.s390!=null&&e.s390.channels!=null?e.s390.channels.length:0}}};function Zn(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("read_channel"),label:"Read I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.800",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"]),l(r,{name:e.formKey("write_channel"),label:"Write I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.801",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"]),l(r,{name:e.formKey("data_channel"),label:"Data I/O Subchannel",type:"text",validation:[["required"],["matches",/^([0-9a-fA-F]{1,4}\.){2}([0-9a-fA-F]{1,4})$/]],"validation-messages":{matches:"Channel number must be in the format ____.____.____"},"validation-visibility":"live",placeholder:"e.g. 0.0.802",help:"S390 subchannel definition"},null,8,["name","validation","validation-messages"])],64)}var pe=w(Xn,[["render",Zn]]);const X="install_package",Qn={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(X,i,e)}},methods:{encodeToInstallation:function(e,i){Object.keys(i).filter(n=>n.includes(X)).forEach(n=>{i[n]&&(e.combustion+=`
# Installing Package: `+u.normalizeZypperPackages(i[n])+`
zypper --non-interactive install `+u.normalizeZypperPackages(i[n])+`
`)})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(X)).forEach(n=>{e.package===void 0&&(e.package={}),e.package.install===void 0&&(e.package.install=[]),e.package.install.push(i[n])})},fillImport:function(e,i){e.package==null||e.package.install==null||Object.keys(i).filter(n=>n.includes(X)).forEach(n=>{i[n]=e.package.install.shift()})},countImport:function(e){return e.package!=null&&e.package.install!=null?e.package.install.length:0}}};function jn(e,i,n,o,t,a){const r=b("FormKit");return m(),D(r,{name:e.formKey("package_name"),label:"Packages you want to install (space or comma separated)",type:"text",validation:"required","validation-behavior":"live",value:"vim-small",help:"This will add a 'zypper --non-interactive install [packages]' line to the combustion script."},null,8,["name"])}var fe=w(Qn,[["render",jn]]);const U="add_repository",ea={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(U,i,e)}},methods:{encodeToInstallation:function(e,i){const n=(a,r)=>u.getFormValue(U,i,a,r);let o=0;const t=U+"_repository_name_";Object.keys(i).filter(a=>a.includes(t)).map(a=>a.replace(t,"")).forEach(a=>{o===0&&(e.combustion+=`
# Add repositories
`),o++,n("repository_url",a)&&n("repository_name",a)&&(e.combustion+="zypper addrepo --refresh "+n("repository_url",a)+' "'+n("repository_name",a)+`"
`)})},encodeToExport:function(e,i){const n=(t,a)=>u.getFormValue(U,i,t,a),o=U+"_repository_name_";Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{if(e.repository===void 0&&(e.repository={}),e.repository.repositories===void 0&&(e.repository.repositories=[]),n("repository_url",t)&&n("repository_name",t)){let a={};a.name=n("repository_name",t),a.url=n("repository_url",t),e.repository.repositories.push(a)}})},fillImport:function(e,i){const n=(t,a,r)=>u.setFormValue(U,i,t,a,r),o=U+"_repository_name_";e.repository==null||e.repository.repositories==null||Object.keys(i).filter(t=>t.includes(o)).map(t=>t.replace(o,"")).forEach(t=>{let a=e.repository.repositories.shift();n("repository_name",t,a.name),n("repository_url",t,a.url)})},countImport:function(e){return e.repository!=null&&e.repository.repositories!=null?e.repository.repositories.length:0}}};function ta(e,i,n,o,t,a){const r=b("FormKit");return m(),p(T,null,[l(r,{name:e.formKey("repository_name"),label:"Name",type:"text",validation:"required","validation-visibility":"live",help:"Alias name of the repository."},null,8,["name"]),l(r,{name:e.formKey("repository_url"),label:"URL",type:"text",validation:"required|url","validation-visibility":"live",help:"This will add a 'zypper addrepo --refresh <URL> <Name>' line to the combustion script."},null,8,["name"])],64)}var _e=w(ea,[["render",ta]]);const Z="comb_raw",na={setup:()=>{const e=u.uid();return{uid:e,formKey:i=>u.getFormKey(Z,i,e)}},methods:{encodeToInstallation:function(e,i){Object.keys(i).filter(n=>n.includes(Z)).forEach(n=>{i[n]!=null&&(e.combustion+=`
`+i[n]+`
`)})},encodeToExport:function(e,i){Object.keys(i).filter(n=>n.includes(Z)).forEach(n=>{e.scripts===void 0&&(e.scripts=[]),i[n]!=null&&e.scripts.push(i[n])})},fillImport:function(e,i){e.scripts!=null&&Object.keys(i).filter(n=>n.includes(Z)).forEach(n=>{i[n]=e.scripts.shift()})},countImport:function(e){return e.scripts!=null?e.scripts.length:0}}},aa={class:"combustionraw"};function ia(e,i,n,o,t,a){const r=b("FormKit");return m(),p("div",aa,[l(r,{name:e.formKey("script_content"),label:"Lines to add",type:"textarea",validation:"required","validation-behavior":"live",value:'echo "hello combustion"',help:"You can find examples of a combustion script here: https://en.opensuse.org/Portal:MicroOS/Combustion#Simple_example"},null,8,["name"])])}var he=w(na,[["render",ia]]);const oa={class:"page-section p-2 bg-dark",id:"edit"},ra={class:"container mt-5 px-0"},sa=c("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[c("div",{class:"col-lg-8 col-xl-6 text-white text-center"},[c("h1",{class:"mt-5"},"Config Generator"),c("div",{class:"d-grid mb-5"},[c("img",{class:"text-center mx-auto w-50",src:_t})])])],-1),la={class:"row gx-4 gx-lg-5 justify-content-center mb-5"},ca={class:"col-lg-6"},ua={class:"form-floating mb-3"},da=c("hr",{class:"divider-long"},null,-1),ma=c("hr",{class:"divider-long"},null,-1),pa=c("hr",{class:"divider-long"},null,-1),fa=c("hr",{class:"divider-long"},null,-1),_a=c("hr",{class:"divider-long"},null,-1),ha={key:0},ya={class:"page-section p-2",id:"export"},ga={class:"container mt-5 px-0"},va={class:"row gx-4 gx-lg-5 justify-content-center"},ba={class:"col-lg-8 col-xl-6"},Aa={class:"d-grid mb-5"},ka={key:0},wa=c("h1",{class:"mt-5 text-center"},"combustion script",-1),$a={class:"d-grid mb-5"},Ea={class:"form-data"},Ta=c("hr",{class:"divider"},null,-1),xa=c("h2",{class:"mt-5 text-center"}," Convert to Combustion-Ready Filesystem IMG in the Browser ",-1),Fa=Q(`<div><h2 class="mt-5 text-center"> Convert to ISO Filesystem with mkisofs </h2><pre class="form-data">  Using combustion file only:
  # mkisofs -full-iso9660-filenames -o combustion.iso -V combustion -root combustion fuel-ignition/combustion/script
                </pre><p> How to use the generated data with <a href="https://github.com/openSUSE/combustion" target="_blank">combustion</a> . </p><hr class="divider"></div><h2 class="mt-5 text-center">Load Settings from</h2>`,2),Pa=c("h2",{class:"mt-5 text-center"},"Save Settings to",-1),Sa={setup(e){const i=[ee,te,ne,ie,ae,oe,re,ce,ue,de,me,pe,_e,fe,he,le,ke],n=k({debug:!1,save_to:"fuel-ignition.json"}),o=k({});i.forEach(y=>u.setupFormComponentWatcher(y,Ke,n));let t=k(0);const a=()=>{t.value+=1},r=y=>y.methods.hasOwnProperty("countImport")?y.methods.countImport(o.value):0;Ie(()=>{Object.keys(o.value).length>0&&(i.filter(y=>y.methods.hasOwnProperty("fillImport")).forEach(y=>y.methods.fillImport(o.value,n.value)),o.value={})});const s=y=>{let d={combustion:"",combustion_initrd:"",combustion_initrd_and_running_system:"",output:""};return i.filter(h=>h.methods.hasOwnProperty("encodeToInstallation")).forEach(h=>h.methods.encodeToInstallation(d,y)),d.combustion_initrd_and_running_system!=""||d.combustion_initrd!=""?(d.output==""&&(d.output=`#!/bin/bash
# combustion: network prepare
# script generated with https://opensuse.github.io/fuel-ignition/

`),d.combustion_initrd_and_running_system!=""&&(console.log("initrd and running system: "+d.combustion_initrd_and_running_system),d.output+=d.combustion_initrd_and_running_system+`
`),d.output+='if [ "${1-}" = "--prepare" ]; then\n',d.combustion_initrd!=""&&(console.log("initrd: "+d.combustion_initrd),d.output+=d.combustion_initrd+`
`),d.output+=`  exit 0
fi
`):d.output=`#!/bin/bash
# combustion: network
# script generated with https://opensuse.github.io/fuel-ignition/
`,d.output+=`
# Redirect output to the console
exec > >(exec tee -a /dev/tty0) 2>&1
`,d.combustion="",d.combustion_initrd_and_running_system="",d.combustion_initrd="",i.filter(h=>h.methods.hasOwnProperty("encodeToInstallation")).forEach(h=>h.methods.encodeToInstallation(d,y)),d.combustion!==""&&(console.log(d.combustion),d.output+=d.combustion),d.output+=`
# Leave a marker
echo "Configured with combustion" > /etc/issue.d/85-combustion.conf
`,d.output+='echo "Configured with combustion" > /etc/issue.d/85-combustion.issue',d.output+=`

# Close outputs and wait for tee to finish.
exec 1>&- 2>&-; wait;`,d.output};async function _(y){let d=y.target.files[0];o.value=await u.parseJsonFile(d).catch(h=>{alert(h),u.clearFile()}),n.value={debug:n.value.debug,save_to:n.value.save_to},a()}const f=y=>{let d={};i.filter(h=>h.methods.hasOwnProperty("encodeToExport")).forEach(h=>h.methods.encodeToExport(d,y)),u.saveTemplateAsFile(y.save_to,d,!1)};return(y,d)=>{const h=b("FormKit");return m(),p("div",{key:q(t)},[c("section",oa,[c("div",ra,[sa,c("div",la,[c("div",ca,[c("div",ua,[l(h,{type:"group",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=v=>n.value=v)},{default:A(()=>[l($,{title:"Add User",displaysAtBegin:r(ee)},{default:A(({index:v})=>[l(ee,{index:v},null,8,["index"])]),_:1},8,["displaysAtBegin"]),l($,{title:"Set Hostname",displaysAtBegin:r(te),maxComponents:1},{default:A(()=>[l(te)]),_:1},8,["displaysAtBegin"]),da,l($,{title:"Set Language",displaysAtBegin:r(ne),maxComponents:1},{default:A(()=>[l(ne)]),_:1},8,["displaysAtBegin"]),l($,{title:"Set Keyboard",displaysAtBegin:r(ce),maxComponents:1},{default:A(()=>[l(ce)]),_:1},8,["displaysAtBegin"]),l($,{title:"Set Timezone",displaysAtBegin:r(ue),maxComponents:1},{default:A(()=>[l(ue)]),_:1},8,["displaysAtBegin"]),ma,l($,{title:"Change Storage",displaysAtBegin:r(ie)},{default:A(()=>[l(ie)]),_:1},8,["displaysAtBegin"]),pa,l($,{title:"Add Network Interface",displaysAtBegin:r(ae)},{default:A(()=>[l(ae)]),_:1},8,["displaysAtBegin"]),l($,{title:"Register Products",displaysAtBegin:r(de)},{default:A(()=>[l(de)]),_:1},8,["displaysAtBegin"]),l($,{title:"Connect to Salt Master",maxComponents:1,displaysAtBegin:r(me)},{default:A(()=>[l(me)]),_:1},8,["displaysAtBegin"]),l($,{title:"Set S390 Channels",displaysAtBegin:r(pe)},{default:A(()=>[l(pe)]),_:1},8,["displaysAtBegin"]),fa,l($,{title:"Enable or Create Service",displaysAtBegin:r(oe)},{default:A(()=>[l(oe)]),_:1},8,["displaysAtBegin"]),l($,{title:"Modify Existing Service",displaysAtBegin:r(re)},{default:A(()=>[l(re)]),_:1},8,["displaysAtBegin"]),_a,l($,{title:"Adding Repository",displaysAtBegin:r(_e)},{default:A(()=>[l(_e)]),_:1},8,["displaysAtBegin"]),l($,{title:"Install Additional Packages",displaysAtBegin:r(fe)},{default:A(()=>[l(fe)]),_:1},8,["displaysAtBegin"]),l($,{title:"Add Custom Lines To Combustion Script",displaysAtBegin:r(he)},{default:A(()=>[l(he)]),_:1},8,["displaysAtBegin"]),n.value.debug?(m(),p("div",ha,[l($,{title:"DEBUG: Add Bytes",displaysAtBegin:r(le)},{default:A(()=>[l(le)]),_:1},8,["displaysAtBegin"]),l($,{title:"DEBUG: Analyze File",displaysAtBegin:1,maxComponents:1},{default:A(()=>[l(ke)]),_:1})])):g("",!0)]),_:1},8,["modelValue"])])])])])]),c("section",ya,[c("div",ga,[c("div",va,[c("div",ba,[c("div",Aa,[s(n.value)!==void 0?(m(),p("div",ka,[wa,c("div",$a,[c("pre",Ea,G(s(n.value)),1),c("button",{class:"btn btn-primary mb-4","data-testid":"download_combustion",onClick:d[1]||(d[1]=v=>q(u).saveTemplateAsFile("script",s(n.value),!0))}," Download ")])])):g("",!0),c("div",null,[Ta,xa,l(Ft,{combustionScript:s(n.value)},null,8,["combustionScript"])]),Fa,l(h,{name:"load_from",type:"file",onChange:_}),Pa,l(h,{modelValue:n.value.save_to,"onUpdate:modelValue":d[2]||(d[2]=v=>n.value.save_to=v),type:"text",name:"save_to"},null,8,["modelValue"]),c("button",{class:"btn btn-primary mt-3",onClick:d[3]||(d[3]=v=>f(n.value))}," Save ")])])])])])])}}};var we="/fuel-ignition/assets/undraw_freelancer_re_irh4.f098216d.svg";const Ka={},Ia={class:"page-section bg-dark",id:"import"},Va={class:"container px-4 px-lg-5"},Ca={class:"row gx-4 gx-lg-5 justify-content-center"},Ma=c("div",{class:"d-grid"},[c("img",{class:"text-center mx-auto",src:we})],-1),Ba={class:"col-lg-8 col-xl-6 text-white text-center"},Ua=c("h2",{class:"mt-2"},"Sorry, this is not implemented yet!",-1),Oa=c("hr",{class:"divider"},null,-1),Na=c("p",{class:"mb-5"}," For now, Fuel Ignition can only create new configs. ",-1),za=R("Back Home");function La(e,i){const n=b("router-link");return m(),p("section",Ia,[c("div",Va,[c("div",Ca,[Ma,c("div",Ba,[Ua,Oa,Na,l(n,{class:"btn btn-primary btn-xl",to:"/"},{default:A(()=>[za]),_:1})])])])])}var Ra=w(Ka,[["render",La]]);const qa=c("section",{class:"page-section bg-dark",id:"contact"},[c("div",{class:"container px-4 px-lg-5"},[c("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[c("div",{class:"d-grid"},[c("img",{class:"text-center mx-auto",src:we})])])])],-1),Ha=c("section",{class:"page-section p-2",id:"export"},[c("div",{class:"container mt-5 px-0"},[c("div",{class:"row gx-4 gx-lg-5 justify-content-center"},[c("h2",{class:"mt-5 text-center"},"Convert to ISO in the Browser (Alpha)"),c("hr",{class:"divider"}),c("div",{class:"d-grid mb-5"},[c("div",{class:"mx-auto"})])])])],-1),Ga={setup(e){return(i,n)=>(m(),p(T,null,[qa,Ha],64))}},Da="/fuel-ignition/",Wa=[{path:"/",name:"Home",component:ft},{path:"/edit",name:"Edit",component:Sa},{path:"/import",name:"Import",component:Ra},{path:"/test",name:"Test",component:Ga}],Ja=Ve({history:Ce(Da),routes:Wa});window.addEventListener("DOMContentLoaded",e=>{var i=function(){const t=document.body.querySelector("#mainNav");!t||(window.scrollY===0?t.classList.remove("navbar-shrink"):t.classList.add("navbar-shrink"))};i(),document.addEventListener("scroll",i);const n=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(t){t.addEventListener("click",()=>{window.getComputedStyle(n).display!=="none"&&n.click()})})});Me(tt).use(Be,Ue).use(Ja).mount("#app");
